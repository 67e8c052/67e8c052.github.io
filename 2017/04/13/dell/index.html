<!DOCTYPE html>
<html lang=en>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5" />
    <meta name="description" content="racadm get log12345678910111213141516171819202122232425262728293031$ rm -rf &#x2F;var&#x2F;run&#x2F;local_racadm.pid$ racadm  techsupreport collect -t sysinfo,ttylogJob ID &#x3D; JID_777352347829RAC1154: The requested op">
<meta property="og:type" content="article">
<meta property="og:title" content="Dell command line in linux">
<meta property="og:url" content="http://example.com/2017/04/13/dell/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="racadm get log12345678910111213141516171819202122232425262728293031$ rm -rf &#x2F;var&#x2F;run&#x2F;local_racadm.pid$ racadm  techsupreport collect -t sysinfo,ttylogJob ID &#x3D; JID_777352347829RAC1154: The requested op">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2017-04-13T02:39:34.000Z">
<meta property="article:modified_time" content="2023-03-09T07:29:49.620Z">
<meta property="article:author" content="John Doe">
<meta property="article:tag" content="dell">
<meta property="article:tag" content="smcli">
<meta property="article:tag" content="racadm">
<meta name="twitter:card" content="summary">
    
    
      
        
          <link rel="shortcut icon" href="/images/favicon.ico">
        
      
      
        
          <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
        
      
      
        
          <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
        
      
    
    <!-- title -->
    <title>Dell command line in linux</title>
    <!-- styles -->
    
<link rel="stylesheet" href="/css/style.css">

    <!-- persian styles -->
    
    <!-- rss -->
    
    
	<!-- mathjax -->
	
<meta name="generator" content="Hexo 6.3.0"></head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#" aria-label="Menu"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#" aria-label="Menu"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" aria-label="Top" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
        <!--
       --><li><a href="/">Home</a></li><!--
     --><!--
       --><li><a href="/about/">About</a></li><!--
     --><!--
       --><li><a href="/archives/">Writing</a></li><!--
     --><!--
       --><li><a target="_blank" rel="noopener" href="http://github.com/probberechts">Projects</a></li><!--
     -->
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" aria-label="Previous post" href="/2017/11/21/linux_calls/"><i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" aria-label="Next post" href="/2016/12/28/learn-zfs-internals-p1-p5/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" aria-label="Back to top" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" aria-label="Share post" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=http://example.com/2017/04/13/dell/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=http://example.com/2017/04/13/dell/&text=Dell command line in linux"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=http://example.com/2017/04/13/dell/&title=Dell command line in linux"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=http://example.com/2017/04/13/dell/&is_video=false&description=Dell command line in linux"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Dell command line in linux&body=Check out this article: http://example.com/2017/04/13/dell/"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=http://example.com/2017/04/13/dell/&title=Dell command line in linux"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=http://example.com/2017/04/13/dell/&title=Dell command line in linux"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=http://example.com/2017/04/13/dell/&title=Dell command line in linux"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=http://example.com/2017/04/13/dell/&title=Dell command line in linux"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=http://example.com/2017/04/13/dell/&name=Dell command line in linux&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=http://example.com/2017/04/13/dell/&t=Dell command line in linux"><i class="fab fa-hacker-news " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#racadm-get-log"><span class="toc-number">1.</span> <span class="toc-text">racadm get log</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#set-fan"><span class="toc-number">2.</span> <span class="toc-text">set fan</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#remote-control"><span class="toc-number">3.</span> <span class="toc-text">remote control]</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#RACAMD-modify-BIOS"><span class="toc-number">4.</span> <span class="toc-text">RACAMD modify BIOS</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SMcli"><span class="toc-number">5.</span> <span class="toc-text">SMcli</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Discovery-devices"><span class="toc-number">5.1.</span> <span class="toc-text">Discovery devices</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Got-serial-number"><span class="toc-number">5.2.</span> <span class="toc-text">Got serial number</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Get-storage-system-name"><span class="toc-number">5.3.</span> <span class="toc-text">Get storage-system-name</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Get-storage-system-status"><span class="toc-number">5.4.</span> <span class="toc-text">Get storage system status</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Show-all-info"><span class="toc-number">5.5.</span> <span class="toc-text">Show all info</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Output-controller-log"><span class="toc-number">5.6.</span> <span class="toc-text">Output controller log</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Reset-controller"><span class="toc-number">5.7.</span> <span class="toc-text">Reset controller</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Blink-the-device"><span class="toc-number">5.8.</span> <span class="toc-text">Blink the device</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Set-the-blue-allowed-indicator-light-to-on-or-off"><span class="toc-number">5.9.</span> <span class="toc-text">Set the blue allowed indicator light to on or off</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Set-the-time"><span class="toc-number">5.10.</span> <span class="toc-text">Set the time</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#get-the-rebuild-status"><span class="toc-number">5.11.</span> <span class="toc-text">get the rebuild status</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Move-all-volumes-to-their-preferred-controller"><span class="toc-number">5.12.</span> <span class="toc-text">Move all volumes to their preferred controller</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Get-battery-status"><span class="toc-number">5.13.</span> <span class="toc-text">Get battery status</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Get-battery-status-1"><span class="toc-number">5.14.</span> <span class="toc-text">Get battery status</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Dump-all-logs"><span class="toc-number">5.15.</span> <span class="toc-text">Dump all logs</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Enable-media-scan"><span class="toc-number">5.16.</span> <span class="toc-text">Enable media scan</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Important-check"><span class="toc-number">5.17.</span> <span class="toc-text">Important check</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#show-distribution"><span class="toc-number">5.18.</span> <span class="toc-text">show distribution</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#shmcli"><span class="toc-number">6.</span> <span class="toc-text">shmcli</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Found-the-relationship-driver-and-JBOD"><span class="toc-number">6.1.</span> <span class="toc-text">Found the relationship driver and JBOD</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Blink-dev-led"><span class="toc-number">6.2.</span> <span class="toc-text">Blink dev led</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Get-JBOD-log"><span class="toc-number">6.3.</span> <span class="toc-text">Get JBOD log</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Replace-dev"><span class="toc-number">6.4.</span> <span class="toc-text">Replace dev</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Online-upgrade-SAS-HDD-firmware"><span class="toc-number">6.5.</span> <span class="toc-text">Online upgrade SAS HDD firmware</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Dell-EMC-OpenManage-Linux-Remote-Access-Utilities-v9-1-2"><span class="toc-number">7.</span> <span class="toc-text">Dell EMC OpenManage Linux Remote Access Utilities, v9.1.2</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#upgrade-EMM-firmware"><span class="toc-number">7.1.</span> <span class="toc-text">upgrade EMM firmware</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#PSU"><span class="toc-number">8.</span> <span class="toc-text">PSU</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#I-can-%E2%80%98t-believe-the-dell-limit-SR-IOV-in-R230-and-R330-and-disable-AES-NI-CPU-instruction"><span class="toc-number">9.</span> <span class="toc-text">I can â€˜t believe the dell limit SR-IOV in R230 and R330 and disable AES-NI CPU instruction</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#debug-the-BIN-file"><span class="toc-number">10.</span> <span class="toc-text">debug the BIN file</span></a></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index py4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        Dell command line in linux
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">John Doe</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2017-04-13T02:39:34.000Z" itemprop="datePublished">2017-04-13</time>
        
      
    </div>


      
    <div class="article-category">
        <i class="fas fa-archive"></i>
        <a class="category-link" href="/categories/Hardware/">Hardware</a>
    </div>


      
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link-link" href="/tags/dell/" rel="tag">dell</a>, <a class="tag-link-link" href="/tags/racadm/" rel="tag">racadm</a>, <a class="tag-link-link" href="/tags/smcli/" rel="tag">smcli</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <h3 id="racadm-get-log"><a href="#racadm-get-log" class="headerlink" title="racadm get log"></a>racadm get log</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">rm</span> -rf /var/run/local_racadm.pid</span><br><span class="line">$ racadm  techsupreport collect -t sysinfo,ttylog</span><br><span class="line">Job ID = JID_777352347829</span><br><span class="line">RAC1154: The requested operation is initiated.</span><br><span class="line">Run the RACADM jobqueue sub-command, using the job <span class="built_in">id</span> to check the status of </span><br><span class="line">the requested operation.</span><br><span class="line"></span><br><span class="line">$ racadm jobqueue view -i JID_777352347829</span><br><span class="line">---------------------------- JOB -------------------------</span><br><span class="line">[Job ID=JID_777352347829]</span><br><span class="line">Job Name=SupportAssist Collection</span><br><span class="line">Status=Running</span><br><span class="line">Start Time=[Not Applicable]</span><br><span class="line">Expiration Time=[Not Applicable]</span><br><span class="line">Message=[SRV001: The SupportAssist Collection operation started.]</span><br><span class="line">Percent Complete=[12]</span><br><span class="line">----------------------------------------------------------</span><br><span class="line"></span><br><span class="line">$ racadm jobqueue view -i JID_777352347829</span><br><span class="line">---------------------------- JOB -------------------------</span><br><span class="line">[Job ID=JID_777352347829]</span><br><span class="line">Job Name=SupportAssist Collection</span><br><span class="line">Status=Completed</span><br><span class="line">Start Time=[Not Applicable]</span><br><span class="line">Expiration Time=[Not Applicable]</span><br><span class="line">Message=[SRV088: The SupportAssist Collection Operation is completed successfully.]</span><br><span class="line">Percent Complete=[100]</span><br><span class="line">----------------------------------------------------------</span><br><span class="line"></span><br><span class="line">$ racadm techsupreport <span class="built_in">export</span> -f $(dmidecode -s system-serial-number)_dell_tsr_$(<span class="built_in">date</span> +%Y%M%d-%H%M%S-%s).zip</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="set-fan"><a href="#set-fan" class="headerlink" title="set fan"></a><a target="_blank" rel="noopener" href="https://www.dell.com/community/Systems-Management-General/Dell-PowerEdge-fan-speed-change-fanspeed-offset/td-p/5187784">set fan</a></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">racadm get system.thermalsettings.FanSpeedOffset</span><br><span class="line">racadm set system.thermalsettings.FanSpeedOffset 0</span><br><span class="line"></span><br><span class="line">The X values are:</span><br><span class="line"></span><br><span class="line">0 - Low Fan Speed</span><br><span class="line">1 - High Fan Speed</span><br><span class="line">2 - Medium Fan Speed</span><br><span class="line">3 - Max Fan Speed</span><br><span class="line">255 - None</span><br></pre></td></tr></table></figure>

<h3 id="remote-control"><a href="#remote-control" class="headerlink" title="remote control]"></a>remote control]</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">racadm set idrac.users.$newid.Privilege 0x1ff</span><br></pre></td></tr></table></figure>

<h3 id="RACAMD-modify-BIOS"><a href="#RACAMD-modify-BIOS" class="headerlink" title="RACAMD modify BIOS"></a><a target="_blank" rel="noopener" href="https://www.gooksu.com/2015/04/racadm-quick-dirty-cheatsheet">RACAMD modify BIOS</a></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">$ racadm setled -l 1 <span class="comment"># the server led blink</span></span><br><span class="line">$ racadm setled -l 0 <span class="comment"># disable</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">$ racadm get BIOS.ProcSettings.LogicalProc</span><br><span class="line">$ racadm <span class="built_in">set</span> BIOS.ProcSettings.LogicalProc Disabled</span><br><span class="line">[Key=BIOS.Setup.1-1<span class="comment">#ProcSettings]</span></span><br><span class="line">...</span><br><span class="line">$ racadm jobqueue create BIOS.Setup.1-1 -r pwrcycle -s TIME_NOW -e TIME_NA</span><br><span class="line">RAC1024: Successfully scheduled a job.</span><br><span class="line"></span><br><span class="line"><span class="comment"># export and import</span></span><br><span class="line">$ racadm get -f config.txt</span><br><span class="line">$ racadm <span class="built_in">set</span> -f config.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># front Hostname</span></span><br><span class="line">$ racadm <span class="built_in">set</span> System.LCD.Configuration 16</span><br><span class="line"></span><br><span class="line"><span class="comment"># Reset iDRAC to factory defaults</span></span><br><span class="line">$ racadm racresetcfg</span><br><span class="line"></span><br><span class="line"><span class="comment"># reboot idrac</span></span><br><span class="line">$ racadm racreset soft/hard/cold</span><br><span class="line"></span><br><span class="line"><span class="comment"># reboot server</span></span><br><span class="line">$ racadm serveraction powercycle</span><br><span class="line"></span><br><span class="line"><span class="comment">#  Get Serial number (service tag)</span></span><br><span class="line">$ racadm getsvctag</span><br><span class="line"></span><br><span class="line"><span class="comment"># set boot dev</span></span><br><span class="line">$ racadm <span class="built_in">set</span> BIOS.OneTimeBoot.OneTimeBootSeqDev NIC.Integrated.1-1-1</span><br><span class="line"></span><br><span class="line"><span class="comment"># serial redirection</span></span><br><span class="line">$ racadm config -g cfgSerial -o cfgSerialConsoleEnable 1</span><br><span class="line">$ racadm config -g cfgSerial -o cfgSerialBaudRate 115200</span><br><span class="line">$ racadm config -g cfgSerial -o cfgSerialCom2RedirEnable 1</span><br><span class="line">$ racadm config -g cfgSerial -o cfgSerialTelnetEnable 0</span><br><span class="line">$ racadm config -g cfgSerial -o cfgSerialSshEnable 1</span><br><span class="line"></span><br><span class="line"><span class="comment"># set power work mode</span></span><br><span class="line">$ racadm <span class="built_in">set</span> BIOS.SysProfileSettings PerfPerWattOptimizedOs</span><br><span class="line"></span><br><span class="line"><span class="comment"># Set AC Power Recovery</span></span><br><span class="line">$ racadm <span class="built_in">set</span> BIOS.SysSecurity.AcPwdRcvry Last</span><br><span class="line">$ racadm <span class="built_in">set</span> BIOS.SysSecurity.AcPwdRcvryDelay Immediate</span><br></pre></td></tr></table></figure>

<h3 id="SMcli"><a href="#SMcli" class="headerlink" title="SMcli"></a>SMcli</h3><h4 id="Discovery-devices"><a href="#Discovery-devices" class="headerlink" title="Discovery devices"></a>Discovery devices</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SMcli -A</span><br></pre></td></tr></table></figure>

<h4 id="Got-serial-number"><a href="#Got-serial-number" class="headerlink" title="Got serial number"></a>Got serial number</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SMcli localhost -n <span class="variable">$yourstoragename</span>  -c <span class="string">&quot; show storagearray;&quot;</span> | grep -Ei <span class="string">&#x27;Chassis Serial Number|Part number|$serial_number&#x27;</span></span><br><span class="line">   Chassis Serial Number:                     SVC <span class="variable">$serial_number</span></span><br><span class="line">      RAID Controller Module DNS/Network name:   <span class="variable">$serial_number</span></span><br><span class="line">      RAID Controller Module DNS/Network name:   <span class="variable">$serial_number</span></span><br><span class="line">         Part number:                     SVC <span class="variable">$serial_number</span></span><br></pre></td></tr></table></figure>
<h4 id="Get-storage-system-name"><a href="#Get-storage-system-name" class="headerlink" title="Get storage-system-name"></a>Get storage-system-name</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-n means storage-system-name</span><br><span class="line">SMcli localhost</span><br></pre></td></tr></table></figure>
<h4 id="Get-storage-system-status"><a href="#Get-storage-system-status" class="headerlink" title="Get storage system status"></a>Get storage system status</h4><p>show ip address (ipaddr)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SMcli  -n ControllerA  -c <span class="string">&quot; show storagearray healthstatus;&quot;</span></span><br><span class="line">SMcli localhost -n ControllerA  -c <span class="string">&quot; show storagearray healthstatus;&quot;</span></span><br></pre></td></tr></table></figure>
<p><a target="_blank" rel="noopener" href="https://knowledge.broadcom.com/external/article/172468/helpful-netapp-smcli-commands.html#mcetoc_1f5mc9nrq1h">SMcli info, not work the old version</a></p>
<h4 id="Show-all-info"><a href="#Show-all-info" class="headerlink" title="Show all info"></a>Show all info</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">SMcli localhost -n ControllerA -c <span class="string">&#x27;show storageArray profile;&#x27;</span> <span class="comment">## show the serial number</span></span><br><span class="line">SMcli  -n ControllerA  -c <span class="string">&quot;show allControllers  summary;&quot;</span></span><br><span class="line">SMcli -n ControllerA -c <span class="string">&quot;Show allVirtualDisks;&quot;</span></span><br><span class="line">SMcli -n ControllerA -c <span class="string">&quot;show AllPhysicalDisks summary;&quot;</span></span><br><span class="line">SMcli localhost -n MD3460 -c <span class="string">&#x27;show alldrives;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#### If no summary , it will output all details for each devices.</span></span><br><span class="line">SMcli -n ControllerA -c <span class="string">&quot;show allcontrollers;&quot;</span> <span class="comment">##NVRAM status, cache mirror</span></span><br><span class="line">SMcli  -n ControllerA  -c <span class="string">&quot;Show allphysicalDisks summary;&quot;</span></span><br><span class="line">SMcli  -n ControllerA  -c <span class="string">&quot;Show allphysicalDisks ;&quot;</span></span><br></pre></td></tr></table></figure>
<h4 id="Output-controller-log"><a href="#Output-controller-log" class="headerlink" title="Output controller log"></a>Output controller log</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SMcli  -n ControllerA  -c <span class="string">&quot;save storageArray supportdata file=\&quot;/tmp/controller.log\&quot; force=true;&quot;</span></span><br></pre></td></tr></table></figure>

<h4 id="Reset-controller"><a href="#Reset-controller" class="headerlink" title="Reset controller"></a>Reset controller</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SMcli -n  ControllerA -c <span class="string">&quot;reset controller 0;&quot;</span></span><br><span class="line">SMcli -n  ControllerA -c <span class="string">&quot;reset controller 1;&quot;</span></span><br></pre></td></tr></table></figure>

<h4 id="Blink-the-device"><a href="#Blink-the-device" class="headerlink" title="Blink the device"></a>Blink the device</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SMcli -n ControllerA -c <span class="string">&quot;start physicalDisk [1,0,11] blink;&quot;</span></span><br><span class="line">SMcli -n ControllerA -c <span class="string">&quot;stop physicalDisk blink;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># new ver</span></span><br><span class="line">SMcli -n array_name -c <span class="string">&#x27;start drive [99,drawer_number,slot_number] locate;&#x27;</span></span><br><span class="line">SMcli -n array_name -c <span class="string">&#x27;stop drive locate;&#x27;</span></span><br></pre></td></tr></table></figure>

<h4 id="Set-the-blue-allowed-indicator-light-to-on-or-off"><a href="#Set-the-blue-allowed-indicator-light-to-on-or-off" class="headerlink" title="Set the blue allowed indicator light to on or off"></a>Set the blue allowed indicator light to on or off</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">This is used to identify PSU during canister replacement.</span><br><span class="line"></span><br><span class="line">SMcli -n array_name -c <span class="string">&#x27;set tray [99] powerfan [top] serviceAllowedIndicator=on;&#x27;</span></span><br><span class="line">SMcli -n array_name -c <span class="string">&#x27;set tray [99] powerfan [top] serviceAllowedIndicator=off;&#x27;</span></span><br></pre></td></tr></table></figure>

<h4 id="Set-the-time"><a href="#Set-the-time" class="headerlink" title="Set the time"></a>Set the time</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SMcli -n array_name -c <span class="string">&#x27;set storageArray time;&#x27;</span></span><br><span class="line">SMcli -n array_name -c <span class="string">&#x27;show storageArray time;&#x27;</span></span><br><span class="line"></span><br><span class="line">SMcli controller_IP -c <span class="string">&#x27;show storagearray profile;&#x27;</span> | grep NTP</span><br><span class="line">SMcli controller_IP -c <span class="string">&#x27;set controller[A] NTPServers=(&quot;1.2.3.4&quot; &quot;5.6.7.8&quot;);&#x27;</span></span><br><span class="line">SMcli controller_IP -c <span class="string">&#x27;set controller[B] NTPServers=(&quot;ntp.google.com&quot; &quot;ntp.time.com&quot;);&#x27;</span></span><br></pre></td></tr></table></figure>

<h4 id="get-the-rebuild-status"><a href="#get-the-rebuild-status" class="headerlink" title="get the rebuild status"></a>get the rebuild status</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">$ SMcli localhost -n MD3460 -c <span class="string">&quot;show virtualDisk [\&quot;md34xx-vd3\&quot;] actionProgress;&quot;</span></span><br><span class="line">Performing syntax check...</span><br><span class="line"></span><br><span class="line">Syntax check complete.</span><br><span class="line"></span><br><span class="line">Executing script...</span><br><span class="line"></span><br><span class="line">Virtual Disk md34xx-vd3</span><br><span class="line">Action: Reconstruction</span><br><span class="line">Percent Complete: 92%</span><br><span class="line">Time To Completion: 166 minutes.</span><br><span class="line"></span><br><span class="line">Script execution complete.</span><br><span class="line"></span><br><span class="line">SMcli completed successfully.</span><br></pre></td></tr></table></figure>

<h4 id="Move-all-volumes-to-their-preferred-controller"><a href="#Move-all-volumes-to-their-preferred-controller" class="headerlink" title="Move all volumes to their preferred controller"></a>Move all volumes to their preferred controller</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ SMcli -n array_name -c <span class="string">&#x27;reset storageArray volumeDistribution;&#x27;</span></span><br></pre></td></tr></table></figure>

<h4 id="Get-battery-status"><a href="#Get-battery-status" class="headerlink" title="Get battery status"></a>Get battery status</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SMcli -n ControllerA -c <span class="string">&quot;show storageArray batteryage;&quot;</span></span><br></pre></td></tr></table></figure>

<h4 id="Get-battery-status-1"><a href="#Get-battery-status-1" class="headerlink" title="Get battery status"></a>Get battery status</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SMcli -n ControllerA -c <span class="string">&quot;show storageArray powerInfo;&quot;</span></span><br></pre></td></tr></table></figure>

<h4 id="Dump-all-logs"><a href="#Dump-all-logs" class="headerlink" title="Dump all logs"></a>Dump all logs</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SMcli localhost -n MD3460 -c &#x27;save storageArray allEvents file=&quot;all_events.log&quot;;&#x27;</span><br></pre></td></tr></table></figure>

<h4 id="Enable-media-scan"><a href="#Enable-media-scan" class="headerlink" title="Enable media scan"></a>Enable media scan</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SMcli localhost -n MD3460 -c <span class="string">&quot;show storagearray;&quot;</span>  | grep <span class="string">&quot;frequency&quot;</span> -i</span><br><span class="line">   Media scan frequency:               1 days</span><br><span class="line">      Frequency:                         NA</span><br><span class="line"></span><br><span class="line">SMcli localhost -n MD3460 -c <span class="string">&quot;set storagearray mediaScanRate=1;&quot;</span> <span class="comment">#days, 1 means 1 day, max is 30 days ,defaults is 15 days</span></span><br><span class="line">SMcli localhost -n MD3460 -c <span class="string">&quot;set allVirtualDisks mediaScanEnabled=TRUE;&quot;</span> <span class="comment">#enable all VD media scan</span></span><br><span class="line">SMcli localhost -n MD3460 -c <span class="string">&quot;set allVirtualDisks consistencyCheckEnabled=False;&quot;</span> <span class="comment"># first time, don &#x27;t suggest enable consistency check</span></span><br></pre></td></tr></table></figure>

<h4 id="Important-check"><a href="#Important-check" class="headerlink" title="Important check"></a>Important check</h4><p><code>Because some of SAN dual controller create diff usable size cause data loss</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 2018-10-20 SAN log</span></span><br><span class="line">$ <span class="built_in">cat</span> storage-array-profile.txt | grep <span class="string">&quot;Usable capacity:         9,118.500&quot;</span> -c</span><br><span class="line">60</span><br><span class="line">$ <span class="built_in">cat</span> storage-array-profile.txt | grep <span class="string">&quot;Usable capacity:         9,123.500&quot;</span> -c</span><br><span class="line">60</span><br><span class="line"></span><br><span class="line"><span class="comment"># it trigger the SAN bug cause dual controller lockdown</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># after re-import config, 2018-11-09 SAN log</span></span><br><span class="line"><span class="built_in">cat</span> storage-array-profile.txt | grep <span class="string">&quot;Usable capacity:         9,118.500&quot;</span> -c</span><br><span class="line">120</span><br></pre></td></tr></table></figure>

<h4 id="show-distribution"><a href="#show-distribution" class="headerlink" title="show distribution"></a>show distribution</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">$ $ ./SMcli localhost -n test_name -c <span class="string">&quot;set virtualDisks [\&quot;1\&quot; \&quot;3\&quot; \&quot;4\&quot; \&quot;7\&quot;] owner=0;&quot;</span></span><br><span class="line"></span><br><span class="line">$ SMcli localhost -n test_name -c <span class="string">&quot;show storageArray virtualDiskDistribution;&quot;</span></span><br><span class="line">Performing syntax check...</span><br><span class="line"></span><br><span class="line">Syntax check complete.</span><br><span class="line"></span><br><span class="line">Executing script...</span><br><span class="line"></span><br><span class="line">Virtual Disk name: 1</span><br><span class="line">	Current owner is RAID controller module <span class="keyword">in</span> slot: 0</span><br><span class="line">Virtual Disk name: 2</span><br><span class="line">	Current owner is RAID controller module <span class="keyword">in</span> slot: 1</span><br><span class="line">Virtual Disk name: 3</span><br><span class="line">	Current owner is RAID controller module <span class="keyword">in</span> slot: 0</span><br><span class="line">Virtual Disk name: 4</span><br><span class="line">	Current owner is RAID controller module <span class="keyword">in</span> slot: 0</span><br><span class="line">Virtual Disk name: 5</span><br><span class="line">	Current owner is RAID controller module <span class="keyword">in</span> slot: 1</span><br><span class="line">Virtual Disk name: 6</span><br><span class="line">	Current owner is RAID controller module <span class="keyword">in</span> slot: 1</span><br><span class="line">Virtual Disk name: 7</span><br><span class="line">	Current owner is RAID controller module <span class="keyword">in</span> slot: 0</span><br><span class="line">Virtual Disk name: 8</span><br><span class="line">	Current owner is RAID controller module <span class="keyword">in</span> slot: 1</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#Dell not support</span></span><br><span class="line"><span class="comment">#set storageArray autoLoadBalancingEnable=(TRUE | FALSE)</span></span><br></pre></td></tr></table></figure>

<h3 id="shmcli"><a href="#shmcli" class="headerlink" title="shmcli"></a>shmcli</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">$ systemctl disable ServerHardwareManagerMonitor.service ServerHardwareManagerServer.service; systemctl stop ServerHardwareManagerMonitor.service ServerHardwareManagerServer.service</span><br><span class="line"></span><br><span class="line">$ shmcli list drives -enc = 50080e520d585000 -verbose</span><br><span class="line">$ shmcli list drives -enc = 50080e520b7df000 -verbose</span><br><span class="line">$ shmcli list drives -enc = 50080e520b613000 -verbose</span><br><span class="line"></span><br><span class="line">sed -i &#x27;s/CentOS/RedHat Enterprise/g&#x27; /etc/redhat-release</span><br><span class="line">sed -i &#x27;s/CentOS/RedHat Enterprise/g&#x27; /etc/centos-release</span><br><span class="line">./ServerHardwareManager-2.1.1.r3f319ece-RHEL7-installer --mode unattended</span><br><span class="line"></span><br><span class="line">#disable service</span><br><span class="line">$ systemctl stop ServerHardwareManagerMonitor.service</span><br><span class="line">$ systemctl disable ServerHardwareManagerMonitor.service</span><br></pre></td></tr></table></figure>

<p>Because Dell MD1280 could not blink by sas2ircu</p>
<h4 id="Found-the-relationship-driver-and-JBOD"><a href="#Found-the-relationship-driver-and-JBOD" class="headerlink" title="Found the relationship driver and JBOD"></a>Found the relationship driver and JBOD</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">$ shmcli list physical enclosures</span><br><span class="line"></span><br><span class="line">list physical enclosures - Executing <span class="built_in">command</span>..</span><br><span class="line">Encl<span class="comment">#            Name     Service Tag Encl Overall Sts              WWN   # Adapters Connected</span></span><br><span class="line">-----            ----     ----------- ----------------              ---   --------------------</span><br><span class="line">    0  EN-8435A-E6EBD     0002000                 OK 50050cc000000001                      1</span><br><span class="line">    1  EN-8435A-E6EBD     0001000                 OK 50050cc000000002                      1</span><br><span class="line"></span><br><span class="line">$ shmcli list drives </span><br><span class="line">WWN                OS Path   Vendor ProductId        Serial   Rev  Size   PredFail              Enclosure                     PPID</span><br><span class="line">5000cca2736726c7 /dev/sg10   HGSTHUH721010AL5200    2000000D  LS14 8.91TB          50050cc000000001 (EN-8435A-E6EBD)  TH007FPRHGT0087F678PA02</span><br><span class="line"></span><br><span class="line"><span class="comment"># you can see /dev/sg10 is attach in 50050cc000000001(JBOD)</span></span><br><span class="line"><span class="comment"># WWN is 5000cca2736726c7 in first column</span></span><br><span class="line"></span><br><span class="line">$ shmcli list drives -verbose</span><br><span class="line"></span><br><span class="line"><span class="comment">#Got high await and util SAS dev</span></span><br><span class="line">[[ ! -f /dev/shm/shmcli_list_drivers ]] &amp;&amp; shmcli list drives -verbose &gt; /dev/shm/shmcli_list_drivers</span><br><span class="line">[[ ! -f /dev/shm/lsscsi.log ]] &amp;&amp; lsscsi -gi &gt; /dev/shm/lsscsi.log</span><br><span class="line">iostat -xm 2 14 | awk <span class="string">&#x27;NF==14 &amp;&amp; $1~/sd/&#123;if($NF&gt;80 &amp;&amp; $(NF-4)&gt;80) &#123;a[$1]++&#125;&#125; END&#123;for (i in a) &#123;print &quot;/dev/&quot;i,a[i]&#125;&#125;&#x27;</span> &gt; /dev/shm/high-lat-devs</span><br><span class="line"><span class="built_in">echo</span> OS-dev<span class="string">&quot;    &quot;</span>driver-dev<span class="string">&quot;   &quot;</span>dev-type<span class="string">&quot;    &quot;</span>serial<span class="string">&quot; &quot;</span>Firmware<span class="string">&quot; &quot;</span>size<span class="string">&quot;             &quot;</span>JBOD-NO<span class="string">&quot;             &quot;</span>Slot<span class="string">&quot;  &quot;</span>zpool</span><br><span class="line"><span class="built_in">cd</span> /dev/shm &amp;&amp; awk <span class="string">&#x27;NF==2 &#123;a[$1]=$2&#125;;NF==6 &amp;&amp; $0~/3500/&#123;b[$(NF-2)]=$(NF)&#125;; NF=18 &#123;c[$2]=$4&quot; &quot;$5&quot; &quot;$6&quot; &quot;$7&quot; &quot;$8&quot; &quot;$9&quot; &quot;$11&#125;;END&#123;for(i in a) &#123;res[b[i]]=i&#125;; for (i in res) &#123;print res[i],i,c[i]&#125;&#125; ;&#x27;</span> high-lat-devs lsscsi.log shmcli_list_drivers | <span class="keyword">while</span> <span class="built_in">read</span> line; <span class="keyword">do</span> zfspool=$(zdb -l $(<span class="built_in">echo</span> <span class="variable">$line</span> | awk <span class="string">&#x27;&#123;print $1&#125;&#x27;</span>)1 | grep ost_); <span class="built_in">echo</span> -n <span class="variable">$line</span><span class="string">&quot; &quot;</span><span class="variable">$zfspool</span>; <span class="built_in">echo</span> ; <span class="keyword">done</span></span><br><span class="line"></span><br><span class="line">OS-dev    driver-dev   dev-type    serial Firmware size             JBOD-NO             Slot  zpool</span><br><span class="line">/dev/sddt /dev/sg131 ST10000NM0256 ZA2839LZ TT54 8.91TB 50050cc11ac01694 (EN-8435A-E6EBD)  name: <span class="string">&#x27;ost_1&#x27;</span></span><br><span class="line">/dev/sddl /dev/sg123 ST10000NM0256 ZA27H764 TT54 8.91TB 50050cc11ac01694 (EN-8435A-E6EBD)  name: <span class="string">&#x27;ost_1&#x27;</span></span><br><span class="line">/dev/sddv /dev/sg133 ST10000NM0256 ZA27YFPB TT54 8.91TB 50050cc11ac01694 (EN-8435A-E6EBD)  name: <span class="string">&#x27;ost_1&#x27;</span></span><br><span class="line">/dev/sdde /dev/sg116 ST10000NM0256 ZA27YQLV TT54 8.91TB 50050cc11ac01694 (EN-8435A-E6EBD)  name: <span class="string">&#x27;ost_1&#x27;</span></span><br><span class="line">/dev/sddf /dev/sg117 ST10000NM0256 ZA27H83K TT54 8.91TB 50050cc11ac01694 (EN-8435A-E6EBD)  name: <span class="string">&#x27;ost_1&#x27;</span></span><br><span class="line">/dev/sddx /dev/sg136 ST10000NM0256 ZA2839NH TT54 8.91TB 50050cc11ac01694 (EN-8435A-E6EBD)  name: <span class="string">&#x27;ost_1&#x27;</span></span><br><span class="line">/dev/sddq /dev/sg128 ST10000NM0256 ZA2839VX TT54 8.91TB 50050cc11ac01694 (EN-8435A-E6EBD)  name: <span class="string">&#x27;ost_1&#x27;</span></span><br><span class="line"></span><br><span class="line">lsscsi -git  | grep sg10</span><br><span class="line">[17:0:8:0]   disk    sas:0x5000cca2736726c5          /dev/sdi   35000cca2736726c4  /dev/sg10</span><br></pre></td></tr></table></figure>

<h4 id="Blink-dev-led"><a href="#Blink-dev-led" class="headerlink" title="Blink dev led"></a>Blink dev led</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">$ shmcli blink drive -d = 5000cca2736726c7</span><br><span class="line">blink drive - Executing <span class="built_in">command</span>..</span><br><span class="line">Blink drive successful.</span><br><span class="line">blink drive - Command execution complete.</span><br><span class="line"></span><br><span class="line">$ shmcli list drive slots -a = 0 -enc = 0 -verbose | grep 2000000D -i</span><br><span class="line"><span class="comment"># -a = 0 first SAS HBA</span></span><br><span class="line"><span class="comment"># -enc enclosure number</span></span><br><span class="line">Enc Slot Drwr/Slot Status Vendor  ProductId       Serial   Size   Lnk   Rev Blnk? Logical Vols       SAS Connections</span><br><span class="line">65    1 / 23         OK    HGST   HUH721010AL5200 2000000D 8.91TB 6G,6G LS14 YES,  5000cca27330a695,      n/a</span><br><span class="line"><span class="comment"># you can see Blnk filed is YES</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#disable led</span></span><br><span class="line">$ shmcli blink drive -d = 5000cca2736726c7 -off</span><br></pre></td></tr></table></figure>

<h4 id="Get-JBOD-log"><a href="#Get-JBOD-log" class="headerlink" title="Get JBOD log"></a>Get JBOD log</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">shmcli view <span class="built_in">log</span> -count=1000</span><br><span class="line"></span><br><span class="line">view <span class="built_in">log</span> - Executing <span class="built_in">command</span>..</span><br><span class="line">No valid <span class="built_in">log</span> files found.</span><br></pre></td></tr></table></figure>

<h4 id="Replace-dev"><a href="#Replace-dev" class="headerlink" title="Replace dev"></a>Replace dev</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">[Sat Sep 29 16:14:02 2018] scsi 17:0:178:0: Direct-Access     HGST     HUH721010AL5200  LS03 PQ: 0 ANSI: 6</span><br><span class="line">[Sat Sep 29 16:14:02 2018] scsi 17:0:178:0: SSP: handle(0x00c5), sas_addr(0x5000cca266d6b0ce), phy(12), device_name(0x5000cca266d6b0cf)</span><br><span class="line">[Sat Sep 29 16:14:02 2018] scsi 17:0:178:0: SSP: enclosure_logical_id(0x50050cc11ac01572), slot(56)</span><br><span class="line">[Sat Sep 29 16:14:02 2018] scsi 17:0:178:0: serial_number(7JKU27GC)</span><br><span class="line">[Sat Sep 29 16:14:02 2018] scsi 17:0:178:0: qdepth(254), tagged(1), simple(0), ordered(0), scsi_level(7), cmd_que(1)</span><br><span class="line">[Sat Sep 29 16:14:02 2018] sd 17:0:178:0: Attached scsi generic sg119 type 0</span><br><span class="line">[Sat Sep 29 16:14:02 2018] sd 17:0:178:0: [sddh] Enabling DIF Type 2 protection</span><br><span class="line">[Sat Sep 29 16:14:02 2018] sd 17:0:178:0: [sddh] 19134414848 512-byte logical blocks: (9.79 TB/8.91 TiB)</span><br><span class="line">[Sat Sep 29 16:14:02 2018] sd 17:0:178:0: [sddh] 4096-byte physical blocks</span><br><span class="line">[Sat Sep 29 16:14:02 2018] sd 17:0:178:0: [sddh] Write Protect is off</span><br><span class="line">[Sat Sep 29 16:14:02 2018] sd 17:0:178:0: [sddh] Mode Sense: f7 00 10 08</span><br><span class="line">[Sat Sep 29 16:14:03 2018] sd 17:0:178:0: [sddh] Write cache: disabled, read cache: enabled, supports DPO and FUA</span><br><span class="line">[Sat Sep 29 16:14:03 2018] sd 17:0:178:0: [sddh] Attached SCSI disk</span><br><span class="line"></span><br><span class="line">$ zpool status -x</span><br><span class="line">  pool: ost_85</span><br><span class="line"> state: DEGRADED</span><br><span class="line">status: One or more devices has been taken offline by the administrator.</span><br><span class="line">	Sufficient replicas exist for the pool to continue functioning in a</span><br><span class="line">	degraded state.</span><br><span class="line">action: Online the device using &#x27;zpool online&#x27; or replace the device with</span><br><span class="line">	&#x27;zpool replace&#x27;.</span><br><span class="line">  scan: scrub repaired 0B in 0h1m with 0 errors on Sat Sep 29 12:01:22 2018</span><br><span class="line">config:</span><br><span class="line"></span><br><span class="line">	NAME                        STATE     READ WRITE CKSUM</span><br><span class="line">	ost_85                      DEGRADED     0     0     0</span><br><span class="line">	  raidz3-0                  DEGRADED     0     0     0</span><br><span class="line">	    sddd                    ONLINE       0     0     0</span><br><span class="line">	    sdde                    ONLINE       0     0     0</span><br><span class="line">	    sddf                    ONLINE       0     0     0</span><br><span class="line">	    sddg                    ONLINE       0     0     0</span><br><span class="line">	    sddh                    OFFLINE      0     0     0</span><br><span class="line">	    sddi                    ONLINE       0     0     0</span><br><span class="line">	    scsi-35000c500a670b2a3  ONLINE       0     0     0</span><br><span class="line">	    scsi-35000c500a670cadb  ONLINE       0     0     0</span><br><span class="line">	    scsi-35000c500a670cb6f  ONLINE       0     0     0</span><br><span class="line">	    scsi-35000c500a670ae37  ONLINE       0     0     0</span><br><span class="line">	    scsi-35000c500a670bdb3  ONLINE       0     0     0</span><br><span class="line">	    scsi-35000c500a670b0db  ONLINE       0     0     0</span><br><span class="line">	    scsi-35000c500956f033b  ONLINE       0     0     0</span><br><span class="line">	    scsi-35000c500a675adef  ONLINE       0     0     0</span><br><span class="line">	    scsi-35000c500a65b3f6b  ONLINE       0     0     0</span><br><span class="line">	    scsi-35000c500a663b6b7  ONLINE       0     0     0</span><br><span class="line">	    scsi-35000c500a670b6a3  ONLINE       0     0     0</span><br><span class="line">	    scsi-35000c500a65a83d3  ONLINE       0     0     0</span><br><span class="line">	    scsi-35000c500a670b0eb  ONLINE       0     0     0</span><br><span class="line">	    scsi-35000c500a66ce193  ONLINE       0     0     0</span><br><span class="line">	    scsi-35000c500a6754c87  ONLINE       0     0     0</span><br><span class="line">	    scsi-35000c500a6754373  ONLINE       0     0     0</span><br><span class="line"></span><br><span class="line">errors: No known data errors</span><br><span class="line">$ zpool replace ost_85 sddh</span><br></pre></td></tr></table></figure>

<h4 id="Online-upgrade-SAS-HDD-firmware"><a href="#Online-upgrade-SAS-HDD-firmware" class="headerlink" title="Online upgrade SAS HDD firmware"></a>Online upgrade SAS HDD firmware</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br></pre></td><td class="code"><pre><span class="line">$ zpool status -x</span><br><span class="line">  pool: tank</span><br><span class="line"> state: ONLINE</span><br><span class="line">status: One or more devices is currently being resilvered.  The pool will</span><br><span class="line">	<span class="built_in">continue</span> to <span class="keyword">function</span>, possibly <span class="keyword">in</span> a degraded state.</span><br><span class="line">action: Wait <span class="keyword">for</span> the resilver to complete.</span><br><span class="line">  scan: resilver <span class="keyword">in</span> progress since Sat Apr  6 11:14:31 2019</span><br><span class="line">	56.6T scanned out of 143T at 131M/s, 192h27m to go</span><br><span class="line">	3.14T resilvered, 39.52% <span class="keyword">done</span></span><br><span class="line">config:</span><br><span class="line"></span><br><span class="line">	NAME                        STATE     READ WRITE CKSUM</span><br><span class="line">	tank                       ONLINE       0     0     0</span><br><span class="line">	  raidz3-0                  ONLINE       0     0     0</span><br><span class="line">	    scsi-35000c500a675430f  ONLINE       0     0     0</span><br><span class="line">	    scsi-35000c500a6753f3f  ONLINE       0     0     0</span><br><span class="line">	    scsi-35000c500a6754a27  ONLINE       0     0     0</span><br><span class="line">	    scsi-35000c500a670c9f3  ONLINE       0     0     0</span><br><span class="line">	    scsi-35000c500a65b51eb  ONLINE       0     0     0</span><br><span class="line">	    scsi-35000c500a6755097  ONLINE       0     0     0</span><br><span class="line">	    scsi-35000c500a65b327f  ONLINE       0     0     0</span><br><span class="line">	    scsi-35000c500a675682f  ONLINE       0     0     0</span><br><span class="line">	    scsi-35000c500a67547f3  ONLINE       0     0     0</span><br><span class="line">	    scsi-35000c500a670cb23  ONLINE       0     0     0</span><br><span class="line">	    scsi-35000c500a670c7cf  ONLINE       0     0     0</span><br><span class="line">	    scsi-35000c500a67555db  ONLINE       0     0     0</span><br><span class="line">	    scsi-35000c500a670c717  ONLINE       0     0     0</span><br><span class="line">	    scsi-35000c500a65aa78f  ONLINE       0     0     0</span><br><span class="line">	    sdfm                    ONLINE       0     0     0  (resilvering)</span><br><span class="line">	    scsi-35000c500a675494f  ONLINE       0     0     0</span><br><span class="line">	    scsi-35000c500a65af82f  ONLINE       0     0     0</span><br><span class="line">	    scsi-35000c500a6753f4b  ONLINE       0     0     0</span><br><span class="line"></span><br><span class="line">errors: No known data errors</span><br><span class="line"></span><br><span class="line">$ lsscsi -gi | grep sdfm</span><br><span class="line">[17:0:177:0] disk    SEAGATE  ST10000NM0256    TT54  /dev/sdfm  35000c500a73fd773  /dev/sg179</span><br><span class="line">   h == hostadapter <span class="built_in">id</span> (first one being 0)</span><br><span class="line">   c == SCSI channel on hostadapter (first one being 0)</span><br><span class="line">   t == ID</span><br><span class="line">   l == LUN (first one being 0)</span><br><span class="line"></span><br><span class="line">$ shmcli list drives | grep sg179</span><br><span class="line">     5000c500a73fd770 /dev/sg179                SEAGATE                            ST10000NM0256            ZA29YQKE     TT54      8.91TB          50050cc11ac01694 (EN-8435A-E6EBD)  TH0YF87JSGT008AN006SA00</span><br><span class="line"></span><br><span class="line">$ shmcli info drive -d = 5000c500a73fd770</span><br><span class="line"></span><br><span class="line">info drive - Executing <span class="built_in">command</span>..</span><br><span class="line"></span><br><span class="line">Product Information :</span><br><span class="line">	ProductId: ST10000NM0256</span><br><span class="line">	Slot Number: 1</span><br><span class="line">	Vendor: SEAGATE</span><br><span class="line">	Size: 19134414847</span><br><span class="line">	Serial: ZA29YQKE</span><br><span class="line">	OS Path: /dev/sg179</span><br><span class="line">	Date: 2018</span><br><span class="line">	Primary Port WWN: 5000c500a73fd770</span><br><span class="line">	Secondary Port WWN: 5000c500a73fd772</span><br><span class="line">	Port SAS Addresses: 5000c500a73fd772, 0000000000000000</span><br><span class="line">	Drive Supported: YES</span><br><span class="line">	Rev: TT54</span><br><span class="line">	Blinking?: NO</span><br><span class="line">	Nominal Form Factor Height: 2540</span><br><span class="line">	Nominal Form Factor Width: 3500</span><br><span class="line"></span><br><span class="line">Predicted Failure: NO</span><br><span class="line"></span><br><span class="line">Logical Volume Info: n.a.,n.a. ()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Logical Drives Count: 0</span><br><span class="line"></span><br><span class="line">Device Speed Information :</span><br><span class="line">	Link Speed (Primary): 6G</span><br><span class="line">	Link Speed (Secondary): 6G</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Enclosure Page 2 :</span><br><span class="line">	Slot Status: OK</span><br><span class="line">	ENCL BYPED A: OFF</span><br><span class="line">	ENCL BYPED B: OFF</span><br><span class="line">	IDENT: OFF</span><br><span class="line">	FAULT REQSTED: OFF</span><br><span class="line">	DEVICE OFF: OFF</span><br><span class="line">	ENABLE BYP A: OFF</span><br><span class="line">	ENABLE BYP A: OFF</span><br><span class="line">	ENABLE BYP A: OFF</span><br><span class="line">	BYP A ENABLE: OFF</span><br><span class="line">	BYP B ENABLE: OFF</span><br><span class="line"></span><br><span class="line">info drive - Command execution complete.</span><br><span class="line"></span><br><span class="line">$ zpool offline tank sdfm</span><br><span class="line">$ shmcli update drive -d = 5000c500a73fd770 -file = ./Seagate_Tatsu_TT55.fwh</span><br><span class="line"></span><br><span class="line">update drive - Executing <span class="built_in">command</span>..</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	(SEAGATE / ST10000NM0256 / ZA29YQKE) - File firmware version = TT55</span><br><span class="line">	(SEAGATE / ST10000NM0256 / ZA29YQKE) - Current drive firmware version = TT54</span><br><span class="line">	(SEAGATE / ST10000NM0256 / ZA29YQKE) - Sending firmware file to device.</span><br><span class="line">        (SEAGATE / ST10000NM0256 / ZA29YQKE) - Firmware successfully sent to drive.</span><br><span class="line">	(SEAGATE / ST10000NM0256 / ZA29YQKE) - After update drive firmware version = TT55</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Drive Update Statistics:</span><br><span class="line">	Total Drives Attempted					 : 1</span><br><span class="line">	Successful Drive update count				 : 1</span><br><span class="line">	FW File transfer failures				 : 0</span><br><span class="line">	FW Update failures despite successful FW file transfer   : 0</span><br><span class="line">	Unsupported Drive count (Non-Dell Drives)		 : 0</span><br><span class="line">	Drives Incompatible with Firmware File			 : 0</span><br><span class="line">	Drives skipped because drive is same version		 : 0</span><br><span class="line">	Drives skipped because drive is newer version		 : 0</span><br><span class="line"></span><br><span class="line">$ <span class="built_in">echo</span> 1 &gt; /sys/block/sdfm/device/delete</span><br><span class="line"></span><br><span class="line">$ lspci | grep 3008</span><br><span class="line">b3:00.0 Serial Attached SCSI controller: LSI Logic / Symbios Logic SAS3008 PCI-Express Fusion-MPT SAS-3 (rev 02)</span><br><span class="line"></span><br><span class="line">$ ll /sys/class/scsi_host/ | grep b3</span><br><span class="line">lrwxrwxrwx 1 root root 0 Apr 11 17:01 host17 -&gt; ../../devices/pci0000:b2/0000:b2:00.0/0000:b3:00.0/host17/scsi_host/host17</span><br><span class="line"></span><br><span class="line">$ <span class="built_in">echo</span> 0 177 0  &gt; /sys/class/scsi_host/host17/scan</span><br><span class="line"></span><br><span class="line">$ dmesg -T | <span class="built_in">tail</span></span><br><span class="line">[Thu Apr 11 15:24:32 2019] scsi 17:0:177:0: qdepth(254), tagged(1), simple(0), ordered(0), scsi_level(7), cmd_que(1)</span><br><span class="line">[Thu Apr 11 15:24:32 2019] sd 17:0:177:0: Attached scsi generic sg179 <span class="built_in">type</span> 0</span><br><span class="line">[Thu Apr 11 15:24:32 2019] sd 17:0:177:0: [sdfm] Enabling DIF Type 2 protection</span><br><span class="line">[Thu Apr 11 15:24:32 2019] sd 17:0:177:0: [sdfm] 19134414848 512-byte logical blocks: (9.79 TB/8.91 TiB)</span><br><span class="line">[Thu Apr 11 15:24:32 2019] sd 17:0:177:0: [sdfm] 4096-byte physical blocks</span><br><span class="line">[Thu Apr 11 15:24:32 2019] sd 17:0:177:0: [sdfm] Write Protect is off</span><br><span class="line">[Thu Apr 11 15:24:32 2019] sd 17:0:177:0: [sdfm] Mode Sense: d7 00 10 08</span><br><span class="line">[Thu Apr 11 15:24:32 2019] sd 17:0:177:0: [sdfm] Write cache: enabled, <span class="built_in">read</span> cache: enabled, supports DPO and FUA</span><br><span class="line">[Thu Apr 11 15:24:32 2019]  sdfm: sdfm1 sdfm9</span><br><span class="line">[Thu Apr 11 15:24:32 2019] sd 17:0:177:0: [sdfm] Attached SCSI disk</span><br><span class="line">$ zpool online tank sdfm</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://topics-cdn.dell.com/pdf/software-tools_Administrator-Guide_en-us.pdf">reference</a></p>
<h3 id="Dell-EMC-OpenManage-Linux-Remote-Access-Utilities-v9-1-2"><a href="#Dell-EMC-OpenManage-Linux-Remote-Access-Utilities-v9-1-2" class="headerlink" title="Dell EMC OpenManage Linux Remote Access Utilities, v9.1.2"></a><a target="_blank" rel="noopener" href="https://www.dell.com/support/home/us/en/04/drivers/driversdetails?driverid=f20vm">Dell EMC OpenManage Linux Remote Access Utilities, v9.1.2</a></h3><p><a target="_blank" rel="noopener" href="https://downloads.dell.com/FOLDER05025571M/1/OM-MgmtStat-Dell-Web-LX-9.1.2-2965_A00.tar.gz?uid=38b7ca51-c5a7-476d-355c-5cbbbc9fa1e0&fn=OM-MgmtStat-Dell-Web-LX-9.1.2-2965_A00.tar.gz">Download</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">racadm supportassist accepteula</span><br><span class="line">racadm techsupreport collect -t SysInfo,TTYLog</span><br><span class="line">racadm techsupreport export -f dell_tsr.zip</span><br><span class="line">SupportAssist collection exported successfully.</span><br><span class="line"></span><br><span class="line">#disable hyper threading</span><br><span class="line">$ racadm set BIOS.ProcSettings.LogicalProc Disabled</span><br><span class="line">racadm get BIOS.ProcSettings.LogicalProc</span><br><span class="line">[Key=BIOS.Setup.1-1#ProcSettings]</span><br><span class="line">LogicalProc=Enabled (Pending Value=Disabled)</span><br><span class="line"></span><br><span class="line">$ racadm get BIOS.ProcSettings.LogicalProc</span><br><span class="line">$ racadm jobqueue create BIOS.Setup.1-1 -r pwrcycle -s TIME_NOW -e TIME_NA</span><br><span class="line">...power cycle...</span><br><span class="line"></span><br><span class="line">$ racadm get BIOS.ProcSettings.LogicalProc</span><br></pre></td></tr></table></figure>


<h4 id="upgrade-EMM-firmware"><a href="#upgrade-EMM-firmware" class="headerlink" title="upgrade EMM firmware"></a>upgrade EMM firmware</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ shmcli update emm -a = 0 -enc = 1 -emm = 1 -file = emm_canister_local_combined_non_disruptive_r2020.03.8.gff   </span><br><span class="line">-a  SAS Adapter index num</span><br><span class="line">-enc enclosure index num</span><br><span class="line">-emm EMM slot num</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://www.dell.com/support/manuals/us/en/04/integrated-dell-remote-access-cntrllr-8-with-lifecycle-controller-v2.00.00.00/racadm_idrac_pub-v1/techsupreport?guid=guid-6a1a7b81-683b-4e54-8ed7-b5d779213d07&lang=en-us">reference</a></p>
<h3 id="PSU"><a href="#PSU" class="headerlink" title="PSU"></a>PSU</h3><p>The redundancy policy(default) and set the hot spare(1+1) PSU settings are as follows:<br>If the load on the active PSU is more than 50 percent of PSU rated power wattage, then the redundant PSU is switched to the active state.<br>If the load on the active PSU falls below 20 percent of PSU rated power wattage, then the redundant PSU is switched to the sleep state.   </p>
<h3 id="I-can-â€˜t-believe-the-dell-limit-SR-IOV-in-R230-and-R330-and-disable-AES-NI-CPU-instruction"><a href="#I-can-â€˜t-believe-the-dell-limit-SR-IOV-in-R230-and-R330-and-disable-AES-NI-CPU-instruction" class="headerlink" title="I can â€˜t believe the dell limit SR-IOV in R230 and R330 and disable AES-NI CPU instruction"></a>I can â€˜t believe the dell limit SR-IOV in R230 and R330 and disable AES-NI CPU instruction</h3><p><a target="_blank" rel="noopener" href="https://www.dell.com/community/PowerEdge-OS-Forum/can-t-find-global-SR-IOV-option-in-BIOS-on-Dell-R220/m-p/5059224/highlight/true#M21670">No, regarding 13th generation rack servers the R230 and R330 do not support SR-IOV</a><br>The same issue in the Dell NIC, the RDMA funtion limit in some server too.    </p>
<h3 id="debug-the-BIN-file"><a href="#debug-the-BIN-file" class="headerlink" title="debug the BIN file"></a><a target="_blank" rel="noopener" href="https://sysadm.mielnet.pl/tag/sasdupie/">debug the BIN file</a></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Oct 26 13:51:15 mielnet-web-dev03 kernel: sasdupie[11976]: segfault at 20 ip 00007fe7b2f3000d sp 00007ffe7d58bb00 error 4 <span class="keyword">in</span> sasdupie[7fe7b2f0b000+110000]</span><br><span class="line"></span><br><span class="line"><span class="built_in">chmod</span> +x /tmp/SAS-RAID_Firmware_3P52K_LN_6.3.3-0002_X00.BIN </span><br><span class="line">/tmp/SAS-RAID_Firmware_3P52K_LN_6.3.3-0002_X00.BIN --extract /tmp/dup_extract_dir</span><br><span class="line"><span class="built_in">cd</span> /tmp/dup_extract_dir</span><br><span class="line">./sasdupie -i -o inv.xml -debug</span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> /opt/dell/srvadmin/lib64</span><br><span class="line"><span class="built_in">rm</span> libstorelibir.so.5</span><br><span class="line"><span class="built_in">ln</span> -s libstorelibir-3.so libstorelibir.so.5</span><br><span class="line"></span><br><span class="line">/tmp/SAS-RAID_Firmware_3P52K_LN_6.3.3-0002_X00.BIN</span><br></pre></td></tr></table></figure>


  </div>
</article>


    <div class="blog-post-comments">
        <div id="utterances_thread">
            <noscript>Please enable JavaScript to view the comments.</noscript>
        </div>
    </div>


        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a target="_blank" rel="noopener" href="http://github.com/probberechts">Projects</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#racadm-get-log"><span class="toc-number">1.</span> <span class="toc-text">racadm get log</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#set-fan"><span class="toc-number">2.</span> <span class="toc-text">set fan</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#remote-control"><span class="toc-number">3.</span> <span class="toc-text">remote control]</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#RACAMD-modify-BIOS"><span class="toc-number">4.</span> <span class="toc-text">RACAMD modify BIOS</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SMcli"><span class="toc-number">5.</span> <span class="toc-text">SMcli</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Discovery-devices"><span class="toc-number">5.1.</span> <span class="toc-text">Discovery devices</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Got-serial-number"><span class="toc-number">5.2.</span> <span class="toc-text">Got serial number</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Get-storage-system-name"><span class="toc-number">5.3.</span> <span class="toc-text">Get storage-system-name</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Get-storage-system-status"><span class="toc-number">5.4.</span> <span class="toc-text">Get storage system status</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Show-all-info"><span class="toc-number">5.5.</span> <span class="toc-text">Show all info</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Output-controller-log"><span class="toc-number">5.6.</span> <span class="toc-text">Output controller log</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Reset-controller"><span class="toc-number">5.7.</span> <span class="toc-text">Reset controller</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Blink-the-device"><span class="toc-number">5.8.</span> <span class="toc-text">Blink the device</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Set-the-blue-allowed-indicator-light-to-on-or-off"><span class="toc-number">5.9.</span> <span class="toc-text">Set the blue allowed indicator light to on or off</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Set-the-time"><span class="toc-number">5.10.</span> <span class="toc-text">Set the time</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#get-the-rebuild-status"><span class="toc-number">5.11.</span> <span class="toc-text">get the rebuild status</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Move-all-volumes-to-their-preferred-controller"><span class="toc-number">5.12.</span> <span class="toc-text">Move all volumes to their preferred controller</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Get-battery-status"><span class="toc-number">5.13.</span> <span class="toc-text">Get battery status</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Get-battery-status-1"><span class="toc-number">5.14.</span> <span class="toc-text">Get battery status</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Dump-all-logs"><span class="toc-number">5.15.</span> <span class="toc-text">Dump all logs</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Enable-media-scan"><span class="toc-number">5.16.</span> <span class="toc-text">Enable media scan</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Important-check"><span class="toc-number">5.17.</span> <span class="toc-text">Important check</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#show-distribution"><span class="toc-number">5.18.</span> <span class="toc-text">show distribution</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#shmcli"><span class="toc-number">6.</span> <span class="toc-text">shmcli</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Found-the-relationship-driver-and-JBOD"><span class="toc-number">6.1.</span> <span class="toc-text">Found the relationship driver and JBOD</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Blink-dev-led"><span class="toc-number">6.2.</span> <span class="toc-text">Blink dev led</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Get-JBOD-log"><span class="toc-number">6.3.</span> <span class="toc-text">Get JBOD log</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Replace-dev"><span class="toc-number">6.4.</span> <span class="toc-text">Replace dev</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Online-upgrade-SAS-HDD-firmware"><span class="toc-number">6.5.</span> <span class="toc-text">Online upgrade SAS HDD firmware</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Dell-EMC-OpenManage-Linux-Remote-Access-Utilities-v9-1-2"><span class="toc-number">7.</span> <span class="toc-text">Dell EMC OpenManage Linux Remote Access Utilities, v9.1.2</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#upgrade-EMM-firmware"><span class="toc-number">7.1.</span> <span class="toc-text">upgrade EMM firmware</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#PSU"><span class="toc-number">8.</span> <span class="toc-text">PSU</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#I-can-%E2%80%98t-believe-the-dell-limit-SR-IOV-in-R230-and-R330-and-disable-AES-NI-CPU-instruction"><span class="toc-number">9.</span> <span class="toc-text">I can â€˜t believe the dell limit SR-IOV in R230 and R330 and disable AES-NI CPU instruction</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#debug-the-BIN-file"><span class="toc-number">10.</span> <span class="toc-text">debug the BIN file</span></a></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=http://example.com/2017/04/13/dell/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=http://example.com/2017/04/13/dell/&text=Dell command line in linux"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=http://example.com/2017/04/13/dell/&title=Dell command line in linux"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=http://example.com/2017/04/13/dell/&is_video=false&description=Dell command line in linux"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Dell command line in linux&body=Check out this article: http://example.com/2017/04/13/dell/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=http://example.com/2017/04/13/dell/&title=Dell command line in linux"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=http://example.com/2017/04/13/dell/&title=Dell command line in linux"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=http://example.com/2017/04/13/dell/&title=Dell command line in linux"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=http://example.com/2017/04/13/dell/&title=Dell command line in linux"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=http://example.com/2017/04/13/dell/&name=Dell command line in linux&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=http://example.com/2017/04/13/dell/&t=Dell command line in linux"><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> Share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy;
    
    
    2016-2023
    John Doe
  </div>
  <div class="footer-right">
    <nav>
      <ul>
        <!--
       --><li><a href="/">Home</a></li><!--
     --><!--
       --><li><a href="/about/">About</a></li><!--
     --><!--
       --><li><a href="/archives/">Writing</a></li><!--
     --><!--
       --><li><a target="_blank" rel="noopener" href="http://github.com/probberechts">Projects</a></li><!--
     -->
      </ul>
    </nav>
  </div>
</footer>

    </div>
    <!-- styles -->



  <link rel="preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css" crossorigin="anonymous" onload="this.onload=null;this.rel='stylesheet'"/>


    <!-- jquery -->
 
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" crossorigin="anonymous"></script> 




<!-- clipboard -->

  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.7/clipboard.min.js" crossorigin="anonymous"></script> 
  
  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"Copy to clipboard!\">";
    btn += '<i class="far fa-clone"></i>';
    btn += '</span>'; 
    // mount it!
    $(".highlight table").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      text: function(trigger) {
        return Array.from(trigger.nextElementSibling.querySelectorAll('.code')).reduce((str,it)=>str+it.innerText+'\n','')
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "Copied!");
      e.clearSelection();
    })
  })
  </script>


<script src="/js/main.js"></script>

<!-- search -->

<!-- Google Analytics -->

<!-- Baidu Analytics -->

<!-- Cloudflare Analytics -->

<!-- Umami Analytics -->

<!-- Disqus Comments -->

<!-- utterances Comments -->

    <script type="text/javascript">
      var utterances_repo = '67e8c052/67e8c052.github.io';
      var utterances_issue_term = 'pathname';
      var utterances_label = 'blog-comments';
      var utterances_theme = 'github-dark';

      (function(){
          var script = document.createElement('script');

          script.src = 'https://utteranc.es/client.js';
          script.setAttribute('repo', utterances_repo);
          script.setAttribute('issue-term', 'pathname');
          script.setAttribute('label', utterances_label);
          script.setAttribute('theme', utterances_theme);
          script.setAttribute('crossorigin', 'anonymous');
          script.async = true;
          (document.getElementById('utterances_thread')).appendChild(script);
      }());
  </script>

</body>
</html>
