<!DOCTYPE html>
<html lang=en>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5" />
    <meta name="description" content="bash env ENV set12345-fDisable filename expansion (globbing).-vPrint shell input lines as they are read.  arguments12345678#input arguments value$ echo &quot;$&amp;#123;@&amp;#125;&quot;#input arguments numbe">
<meta property="og:type" content="article">
<meta property="og:title" content="Bash tips">
<meta property="og:url" content="http://example.com/2018/12/11/bash/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="bash env ENV set12345-fDisable filename expansion (globbing).-vPrint shell input lines as they are read.  arguments12345678#input arguments value$ echo &quot;$&amp;#123;@&amp;#125;&quot;#input arguments numbe">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2018-12-11T03:04:49.000Z">
<meta property="article:modified_time" content="2024-01-25T03:26:10.775Z">
<meta property="article:author" content="John Doe">
<meta property="article:tag" content="bash">
<meta name="twitter:card" content="summary">
    
    
      
        
          <link rel="shortcut icon" href="/images/favicon.ico">
        
      
      
        
          <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
        
      
      
        
          <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
        
      
    
    <!-- title -->
    <title>Bash tips</title>
    <!-- styles -->
    
<link rel="stylesheet" href="/css/style.css">

    <!-- persian styles -->
    
    <!-- rss -->
    
    
	<!-- mathjax -->
	
<meta name="generator" content="Hexo 6.3.0"></head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#" aria-label="Menu"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#" aria-label="Menu"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" aria-label="Top" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
        <!--
       --><li><a href="/">Home</a></li><!--
     --><!--
       --><li><a href="/about/">About</a></li><!--
     --><!--
       --><li><a href="/archives/">Writing</a></li><!--
     --><!--
       --><li><a target="_blank" rel="noopener" href="http://github.com/probberechts">Projects</a></li><!--
     -->
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" aria-label="Previous post" href="/2019/04/02/lxc_with_zfs/"><i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" aria-label="Next post" href="/2018/12/02/process/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" aria-label="Back to top" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" aria-label="Share post" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=http://example.com/2018/12/11/bash/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=http://example.com/2018/12/11/bash/&text=Bash tips"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=http://example.com/2018/12/11/bash/&title=Bash tips"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=http://example.com/2018/12/11/bash/&is_video=false&description=Bash tips"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Bash tips&body=Check out this article: http://example.com/2018/12/11/bash/"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=http://example.com/2018/12/11/bash/&title=Bash tips"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=http://example.com/2018/12/11/bash/&title=Bash tips"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=http://example.com/2018/12/11/bash/&title=Bash tips"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=http://example.com/2018/12/11/bash/&title=Bash tips"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=http://example.com/2018/12/11/bash/&name=Bash tips&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=http://example.com/2018/12/11/bash/&t=Bash tips"><i class="fab fa-hacker-news " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#bash-env-ENV-set"><span class="toc-number">1.</span> <span class="toc-text">bash env ENV set</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#arguments"><span class="toc-number">1.1.</span> <span class="toc-text">arguments</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#logic"><span class="toc-number">1.2.</span> <span class="toc-text">logic</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#sort"><span class="toc-number">1.3.</span> <span class="toc-text">sort</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#man-page-setting"><span class="toc-number">1.4.</span> <span class="toc-text">man page setting</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#eval"><span class="toc-number">1.5.</span> <span class="toc-text">eval</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#bash-auto-input-in-the-cmd-like-expect"><span class="toc-number">2.</span> <span class="toc-text">bash auto input in the cmd, like expect</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#function-FUNCTION"><span class="toc-number">3.</span> <span class="toc-text">function FUNCTION</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#return-value"><span class="toc-number">3.1.</span> <span class="toc-text">return value</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#multiple-background-process-in-bash-and-got-the-return-code"><span class="toc-number">3.2.</span> <span class="toc-text">multiple background process in bash and got the return code</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#bash-function-return-string"><span class="toc-number">3.3.</span> <span class="toc-text">bash function return string</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#grep-GREP"><span class="toc-number">4.</span> <span class="toc-text">grep GREP</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#grep-show-the-match-number-in-single-line"><span class="toc-number">4.1.</span> <span class="toc-text">grep show the match number in single line</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#grep-2-more-more-blank"><span class="toc-number">4.2.</span> <span class="toc-text">grep 2 more more blank</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SSH-ssh"><span class="toc-number">5.</span> <span class="toc-text">SSH ssh</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Parallel-ssh"><span class="toc-number">5.1.</span> <span class="toc-text">Parallel ssh</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Background-exec-script-by-ssh"><span class="toc-number">5.2.</span> <span class="toc-text">Background exec script by ssh</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#output-ssh-script"><span class="toc-number">5.3.</span> <span class="toc-text">output ssh script</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#double-quotes-single-quotes"><span class="toc-number">5.4.</span> <span class="toc-text">double-quotes, single-quotes</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ssh-share-parameter-by-echo-output"><span class="toc-number">5.5.</span> <span class="toc-text">ssh share parameter by echo output</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ssh-command-hang"><span class="toc-number">5.6.</span> <span class="toc-text">ssh command hang</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#remove-name-begin-with-%E2%80%9C-%E2%80%9C"><span class="toc-number">5.7.</span> <span class="toc-text">remove name begin with “-“</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#test"><span class="toc-number">6.</span> <span class="toc-text">test</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#test-the-variable-is-numeric"><span class="toc-number">6.1.</span> <span class="toc-text">test the variable is numeric</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#is-a-integer"><span class="toc-number">6.2.</span> <span class="toc-text">is a integer</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#STRING"><span class="toc-number">7.</span> <span class="toc-text">STRING</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ARRAY"><span class="toc-number">8.</span> <span class="toc-text">ARRAY</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Normal-Array"><span class="toc-number">8.1.</span> <span class="toc-text">Normal Array</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Associative-ARRAY"><span class="toc-number">8.2.</span> <span class="toc-text">Associative ARRAY</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Wait-sub-process-finish"><span class="toc-number">9.</span> <span class="toc-text">Wait sub process finish</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SED"><span class="toc-number">10.</span> <span class="toc-text">SED</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Get-bash-variable"><span class="toc-number">10.1.</span> <span class="toc-text">Get bash variable</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#print-line-from-16224-to-16482"><span class="toc-number">10.2.</span> <span class="toc-text">print line from 16224 to 16482</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#bash-set"><span class="toc-number">11.</span> <span class="toc-text">[bash set]</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#IFS"><span class="toc-number">11.1.</span> <span class="toc-text">IFS</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Ternary-conditional-operator"><span class="toc-number">11.2.</span> <span class="toc-text">Ternary conditional operator</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#bash-double-quotes-single-quotes"><span class="toc-number">12.</span> <span class="toc-text">bash double-quotes, single-quotes</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#bash-replace-expect-script"><span class="toc-number">13.</span> <span class="toc-text">bash replace expect script</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#multiple-background-process-in-bash-and-got-the-return-code-1"><span class="toc-number">14.</span> <span class="toc-text">multiple background process in bash and got the return code</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#bash-background-array-variable"><span class="toc-number">15.</span> <span class="toc-text">bash background array variable</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ssh-remote-exec-command"><span class="toc-number">16.</span> <span class="toc-text">ssh remote exec command</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#single-command-jump-2-nodes"><span class="toc-number">16.1.</span> <span class="toc-text">single command jump 2 nodes</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#remove-name-begin-with-%E2%80%9C-%E2%80%9C-1"><span class="toc-number">17.</span> <span class="toc-text">remove name begin with “-“</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#IFS-1"><span class="toc-number">18.</span> <span class="toc-text">IFS</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#GAWK"><span class="toc-number">19.</span> <span class="toc-text">GAWK</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Issues"><span class="toc-number">19.1.</span> <span class="toc-text">Issues</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#to-binary-num"><span class="toc-number">19.2.</span> <span class="toc-text">to binary num</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Matrix-sum"><span class="toc-number">19.3.</span> <span class="toc-text">Matrix sum</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#append-string"><span class="toc-number">19.4.</span> <span class="toc-text">append string</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Bit-Manipulation-Functions"><span class="toc-number">19.5.</span> <span class="toc-text">Bit-Manipulation Functions</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#split-func"><span class="toc-number">19.6.</span> <span class="toc-text">split func</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#max-and-min"><span class="toc-number">19.7.</span> <span class="toc-text">max and min</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#percent-to-int"><span class="toc-number">19.8.</span> <span class="toc-text">percent to int</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#replace-square-brackets"><span class="toc-number">19.9.</span> <span class="toc-text">replace square brackets</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#match-bash-variable"><span class="toc-number">19.10.</span> <span class="toc-text">match bash variable</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Set-awk-env"><span class="toc-number">19.11.</span> <span class="toc-text">Set awk env</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#write-file-in-awk"><span class="toc-number">19.12.</span> <span class="toc-text">write file in awk</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Sort-array-by-awk"><span class="toc-number">19.13.</span> <span class="toc-text">Sort array by awk</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Found-2-files-diff"><span class="toc-number">19.14.</span> <span class="toc-text">Found 2 files diff</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#match-ip-addr"><span class="toc-number">19.15.</span> <span class="toc-text">match ip addr</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#print-the-last-char"><span class="toc-number">19.16.</span> <span class="toc-text">print the last char</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#awk-print-terminal-bell"><span class="toc-number">19.17.</span> <span class="toc-text">awk print terminal bell</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#awk-single-quote"><span class="toc-number">19.18.</span> <span class="toc-text">awk single quote</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#awk-percent"><span class="toc-number">19.19.</span> <span class="toc-text">awk percent</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#IGONE-CASE"><span class="toc-number">19.20.</span> <span class="toc-text">IGONE CASE</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#field-delimiter-%E2%80%9C-%E2%80%9D"><span class="toc-number">19.21.</span> <span class="toc-text">field delimiter &#x3D; “|”</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#only-match-number-in-a-string"><span class="toc-number">19.22.</span> <span class="toc-text">only match number in a string</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#logarithm-in-awk"><span class="toc-number">19.23.</span> <span class="toc-text">logarithm in awk</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#sort-and-uniq"><span class="toc-number">19.24.</span> <span class="toc-text">sort and uniq</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#reformat-print-output-by-OFMT"><span class="toc-number">19.25.</span> <span class="toc-text">reformat print output by OFMT</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#match-matching-left-bracket"><span class="toc-number">19.26.</span> <span class="toc-text">match matching left bracket</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#single-character-fields"><span class="toc-number">19.27.</span> <span class="toc-text">single character fields</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#filter"><span class="toc-number">19.28.</span> <span class="toc-text">filter</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#awk-match-bash-variable"><span class="toc-number">19.29.</span> <span class="toc-text">awk match bash variable</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#awk-sort-key-and-value"><span class="toc-number">19.30.</span> <span class="toc-text">awk sort key and value</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#match-and"><span class="toc-number">19.31.</span> <span class="toc-text">match &lt; and &#x2F;</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#convert-to-int"><span class="toc-number">19.32.</span> <span class="toc-text">convert to int</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#remove-new-line-characters-from-the-middle-of-a-field"><span class="toc-number">19.33.</span> <span class="toc-text">remove new line characters from the middle of a field</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#awk-statement-%E2%80%9Cnext%E2%80%9D-bash-continue"><span class="toc-number">19.34.</span> <span class="toc-text">awk statement “next” &#x3D; bash continue</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Termination-Signals-https-www-gnu-org-software-libc-manual-html-node-Termination-Signals-html"><span class="toc-number">20.</span> <span class="toc-text">[Termination Signals] (https:&#x2F;&#x2F;www.gnu.org&#x2F;software&#x2F;libc&#x2F;manual&#x2F;html_node&#x2F;Termination-Signals.html)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#trap-TRAP"><span class="toc-number">20.1.</span> <span class="toc-text">trap TRAP</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#sub-shell-error-handler"><span class="toc-number">20.2.</span> <span class="toc-text">sub shell error handler</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Random-RANDOM-random"><span class="toc-number">21.</span> <span class="toc-text">Random RANDOM random</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#number"><span class="toc-number">21.1.</span> <span class="toc-text">number</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#tr-get-scsi-serial-number-by-bash"><span class="toc-number">22.</span> <span class="toc-text">tr get scsi serial number by bash</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#print-last-colume"><span class="toc-number">22.1.</span> <span class="toc-text">print last colume</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Get-parent-id-info"><span class="toc-number">23.</span> <span class="toc-text">Get parent id info</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#change-ssh-cipher-with-rsync"><span class="toc-number">24.</span> <span class="toc-text">change ssh cipher with rsync</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Create-sparse-file"><span class="toc-number">25.</span> <span class="toc-text">Create sparse file</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Num-convert"><span class="toc-number">26.</span> <span class="toc-text">Num convert</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Two%E2%80%99s-Complement-and-the-negative-number"><span class="toc-number">26.1.</span> <span class="toc-text">Two’s Complement and the negative number</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#hex-to-ip-addr-ipv4"><span class="toc-number">26.2.</span> <span class="toc-text">hex to ip addr (ipv4)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#bitwise"><span class="toc-number">26.3.</span> <span class="toc-text">bitwise</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Integer-ASCII-value-to-character"><span class="toc-number">26.4.</span> <span class="toc-text">Integer ASCII value to character</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#xargs"><span class="toc-number">27.</span> <span class="toc-text">xargs</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#taskset"><span class="toc-number">28.</span> <span class="toc-text">taskset</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#stat"><span class="toc-number">29.</span> <span class="toc-text">stat</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#dd"><span class="toc-number">30.</span> <span class="toc-text">dd</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#parallel"><span class="toc-number">31.</span> <span class="toc-text">parallel</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Pipe-single-big-file"><span class="toc-number">31.1.</span> <span class="toc-text">Pipe single big file</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#For-multiple-files"><span class="toc-number">31.2.</span> <span class="toc-text">For multiple files</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Get-parameter"><span class="toc-number">31.3.</span> <span class="toc-text">Get parameter</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#tee"><span class="toc-number">32.</span> <span class="toc-text">tee</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Merge-the-bash-script-with-file"><span class="toc-number">33.</span> <span class="toc-text">Merge the bash script with file</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E2%80%9C-%E2%80%9C-means-read-the-standard-ouput"><span class="toc-number">34.</span> <span class="toc-text">“-“ means read the standard ouput</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#jira-text-syntax"><span class="toc-number">35.</span> <span class="toc-text">jira text syntax</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#parallel-bash"><span class="toc-number">36.</span> <span class="toc-text">parallel bash</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#seq-number"><span class="toc-number">37.</span> <span class="toc-text">seq number</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#absolute-value"><span class="toc-number">38.</span> <span class="toc-text">absolute value</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#file-descriptors"><span class="toc-number">39.</span> <span class="toc-text">file descriptors</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#date-convert-date-cmd"><span class="toc-number">40.</span> <span class="toc-text">date convert date cmd</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#dd-cmd"><span class="toc-number">41.</span> <span class="toc-text">dd cmd</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Background-exec-script-by-ssh-1"><span class="toc-number">42.</span> <span class="toc-text">Background exec script by ssh</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#remove-name-begin-with-%E2%80%9C-%E2%80%9C-2"><span class="toc-number">43.</span> <span class="toc-text">remove name begin with “-“</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#bash-double-quotes-single-quotes-1"><span class="toc-number">44.</span> <span class="toc-text">bash double-quotes, single-quotes</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#bash-input-char-in-cli"><span class="toc-number">45.</span> <span class="toc-text">bash input char in cli</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#multiple-background-process-in-bash-and-got-the-return-code-2"><span class="toc-number">46.</span> <span class="toc-text">multiple background process in bash and got the return code</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#bash-background-array-variable-1"><span class="toc-number">47.</span> <span class="toc-text">bash background array variable</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#test-match"><span class="toc-number">48.</span> <span class="toc-text">test match</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#is-a-integer-1"><span class="toc-number">48.1.</span> <span class="toc-text">is a integer</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#process"><span class="toc-number">49.</span> <span class="toc-text">process</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#bash-case"><span class="toc-number">50.</span> <span class="toc-text">bash case</span></a></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index py4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        Bash tips
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">John Doe</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2018-12-11T03:04:49.000Z" itemprop="datePublished">2018-12-11</time>
        
      
    </div>


      
    <div class="article-category">
        <i class="fas fa-archive"></i>
        <a class="category-link" href="/categories/Scripts/">Scripts</a>
    </div>


      
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link-link" href="/tags/bash/" rel="tag">bash</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <h3 id="bash-env-ENV-set"><a href="#bash-env-ENV-set" class="headerlink" title="bash env ENV set"></a>bash env ENV set</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-f</span><br><span class="line">Disable filename expansion (globbing).</span><br><span class="line"></span><br><span class="line">-v</span><br><span class="line">Print shell input lines as they are <span class="built_in">read</span>.</span><br></pre></td></tr></table></figure>

<h4 id="arguments"><a href="#arguments" class="headerlink" title="arguments"></a>arguments</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#input arguments value</span></span><br><span class="line">$ <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$&#123;@&#125;</span>&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#input arguments number</span></span><br><span class="line">$ <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$&#123;#&#125;</span>&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#the last two arguments</span></span><br><span class="line">$ getfattr -n user.alignment --only-value  <span class="string">&quot;<span class="variable">$&#123;@: $#-2&#125;</span>&quot;</span></span><br></pre></td></tr></table></figure>

<h4 id="logic"><a href="#logic" class="headerlink" title="logic"></a>logic</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">ls</span>; [[ $? -gt 0 ]] &amp;&amp; <span class="built_in">return</span> 2</span><br><span class="line">$ <span class="built_in">echo</span> $?</span><br><span class="line">1</span><br><span class="line"></span><br><span class="line">$ <span class="built_in">ls</span></span><br><span class="line"><span class="keyword">if</span> [[ $? -gt 0 ]]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">  <span class="built_in">echo</span> -n <span class="string">&quot;test error;&quot;</span></span><br><span class="line">  <span class="built_in">return</span> 2</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="built_in">echo</span> $?</span><br><span class="line">0</span><br></pre></td></tr></table></figure>

<h4 id="sort"><a href="#sort" class="headerlink" title="sort"></a>sort</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">sort</span> -n -t <span class="string">&#x27;:&#x27;</span> -k3 /etc/passwd</span><br></pre></td></tr></table></figure>

<h4 id="man-page-setting"><a href="#man-page-setting" class="headerlink" title="man page setting"></a><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/10535432/tmux-man-page-search-highlighting">man page setting</a></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Colored man pages: http://linuxtidbits.wordpress.com/2009/03/23/less-colors-for-man-pages/</span></span><br><span class="line"><span class="comment"># Less Colors for Man Pages</span></span><br><span class="line"><span class="built_in">export</span> LESS_TERMCAP_mb=$<span class="string">&#x27;\E[01;31m&#x27;</span>       <span class="comment"># begin blinking</span></span><br><span class="line"><span class="built_in">export</span> LESS_TERMCAP_md=$<span class="string">&#x27;\E[01;38;5;74m&#x27;</span>  <span class="comment"># begin bold</span></span><br><span class="line"><span class="built_in">export</span> LESS_TERMCAP_me=$<span class="string">&#x27;\E[0m&#x27;</span>           <span class="comment"># end mode</span></span><br><span class="line"><span class="built_in">export</span> LESS_TERMCAP_se=$<span class="string">&#x27;\E[0m&#x27;</span>           <span class="comment"># end standout-mode</span></span><br><span class="line"><span class="built_in">export</span> LESS_TERMCAP_so=$<span class="string">&#x27;\E[38;5;016m\E[48;5;220m&#x27;</span>    <span class="comment"># begin standout-mode - info box</span></span><br><span class="line"><span class="built_in">export</span> LESS_TERMCAP_ue=$<span class="string">&#x27;\E[0m&#x27;</span>           <span class="comment"># end underline</span></span><br><span class="line"><span class="built_in">export</span> LESS_TERMCAP_us=$<span class="string">&#x27;\E[04;38;5;146m&#x27;</span> <span class="comment"># begin underline</span></span><br></pre></td></tr></table></figure>

<h4 id="eval"><a href="#eval" class="headerlink" title="eval"></a><a target="_blank" rel="noopener" href="https://unix.stackexchange.com/questions/23111/what-is-the-eval-command-in-bash">eval</a></h4><p>The eval statement tells the shell to take eval’s arguments as command and run them through the command-line. It is useful in a situation like below:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">/home/user1 &gt; a=<span class="string">&quot;ls | more&quot;</span></span><br><span class="line">/home/user1 &gt; <span class="variable">$a</span></span><br><span class="line">bash: <span class="built_in">command</span> not found: <span class="built_in">ls</span> | more</span><br><span class="line">/home/user1 &gt; <span class="comment"># Above command didn&#x27;t work as ls tried to list file with name pipe (|) and more. But these files are not there</span></span><br><span class="line">/home/user1 &gt; <span class="built_in">eval</span> <span class="variable">$a</span></span><br><span class="line">file.txt</span><br><span class="line">mailids</span><br><span class="line">remote_cmd.sh</span><br><span class="line">sample.txt</span><br><span class="line">tmp</span><br><span class="line"></span><br><span class="line"><span class="comment">#output to standard error </span></span><br><span class="line">&#123;</span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;First error line&quot;</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;Second error line&quot;</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;Third error line&quot;</span></span><br><span class="line">    &#125; &gt;&amp;2</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;First error&quot;</span> &gt;&amp;2</span><br></pre></td></tr></table></figure>


<h3 id="bash-auto-input-in-the-cmd-like-expect"><a href="#bash-auto-input-in-the-cmd-like-expect" class="headerlink" title="bash auto input in the cmd, like expect"></a>bash auto input in the cmd, like expect</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> -e <span class="string">&quot;connect\nshow ld\nexit\n&quot;</span> | ./runCLI.sh</span><br></pre></td></tr></table></figure>

<h3 id="function-FUNCTION"><a href="#function-FUNCTION" class="headerlink" title="function FUNCTION"></a>function FUNCTION</h3><h4 id="return-value"><a href="#return-value" class="headerlink" title="return value"></a>return value</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="function"><span class="title">testfunc</span></span> () &#123; <span class="built_in">return</span> 10; &#125;; testfunc; <span class="built_in">echo</span> $?</span><br><span class="line">10</span><br><span class="line"></span><br><span class="line"><span class="comment"># and you could return string</span></span><br><span class="line">$ <span class="function"><span class="title">testfunc</span></span> () &#123; <span class="built_in">echo</span> 10; &#125;; a=$(testfunc); <span class="built_in">echo</span> <span class="variable">$a</span> </span><br><span class="line">10</span><br></pre></td></tr></table></figure>

<h4 id="multiple-background-process-in-bash-and-got-the-return-code"><a href="#multiple-background-process-in-bash-and-got-the-return-code" class="headerlink" title="multiple background process in bash and got the return code"></a>multiple background process in bash and got the return code</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">declare</span> -A array</span><br><span class="line">(start=$(<span class="built_in">date</span> +%s) &amp;&amp; $(<span class="built_in">sleep</span> $(<span class="built_in">shuf</span> -i 5-15 -n 1)) &amp;&amp; <span class="built_in">echo</span> $(($(date +%s)-start)) &gt; time.log) &amp;</span><br><span class="line">pid=$!</span><br><span class="line">array[<span class="variable">$pid</span>]=0</span><br><span class="line">(start=$(<span class="built_in">date</span> +%s) &amp;&amp; $(<span class="built_in">sleep</span> $(<span class="built_in">shuf</span> -i 5-15 -n 1)) &amp;&amp; <span class="built_in">echo</span> $(($(date +%s)-start)) &gt; time.log) &amp;</span><br><span class="line">pid=$!</span><br><span class="line">array[<span class="variable">$pid</span>]=0</span><br><span class="line">(start=$(<span class="built_in">date</span> +%s) &amp;&amp; $(<span class="built_in">sleep</span> $(<span class="built_in">shuf</span> -i 5-15 -n 1)) &amp;&amp; <span class="built_in">echo</span> $(($(date +%s)-start)) &gt; time.log) &amp;</span><br><span class="line">pid=$!</span><br><span class="line">array[<span class="variable">$pid</span>]=0</span><br><span class="line">(start=$(<span class="built_in">date</span> +%s) &amp;&amp; $(<span class="built_in">sleep</span> $(<span class="built_in">shuf</span> -i 5-15 -n 1)) &amp;&amp; <span class="built_in">echo</span> $(($(date +%s)-start)) &gt; time.log) &amp;</span><br><span class="line">pid=$!</span><br><span class="line">array[<span class="variable">$pid</span>]=0</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="string">&quot;<span class="variable">$&#123;!array[@]&#125;</span>&quot;</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">  <span class="built_in">wait</span> <span class="variable">$i</span></span><br><span class="line">  <span class="keyword">if</span> [[ ! $? -eq 0 ]]</span><br><span class="line">  <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;the pid: &quot;</span><span class="variable">$pid</span><span class="string">&quot; show the error, exit&quot;</span></span><br><span class="line">    <span class="built_in">exit</span> 2</span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;the pid: &quot;</span><span class="variable">$pid</span><span class="string">&quot; no error&quot;</span></span><br><span class="line">  <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>


<h4 id="bash-function-return-string"><a href="#bash-function-return-string" class="headerlink" title="bash function return string"></a><a target="_blank" rel="noopener" href="https://www.masteringunixshell.net/qa44/bash-how-to-return-string-from-function.html">bash function return string</a></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">hello</span></span>() &#123;</span><br><span class="line">var=<span class="string">&#x27;Hello friend.&#x27;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$var</span>&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">greeting=$(hello)</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$greeting</span></span><br></pre></td></tr></table></figure>
<p>or you share a global string env variable and re-export string to the array too.    </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">doit</span></span>() &#123;</span><br><span class="line">    x=<span class="variable">$1</span></span><br><span class="line">    do_something <span class="variable">$x</span></span><br><span class="line">    [... 100 lines that <span class="keyword">do</span> something with <span class="variable">$x</span> ...]</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">export</span> -f doit</span><br><span class="line">  <span class="built_in">cat</span> list | parallel doit</span><br></pre></td></tr></table></figure>



<h3 id="grep-GREP"><a href="#grep-GREP" class="headerlink" title="grep GREP"></a><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/9736295/how-to-find-lines-that-contain-more-than-a-single-whitespace-between-strings-in">grep GREP</a></h3><h4 id="grep-show-the-match-number-in-single-line"><a href="#grep-show-the-match-number-in-single-line" class="headerlink" title="grep show the match number in single line"></a><a target="_blank" rel="noopener" href="https://superuser.com/questions/769353/grep-count-number-of-matches-per-line">grep show the match number in single line</a></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> 1,2,3,4,5,6,7,8,9 | grep -o , | <span class="built_in">wc</span> -l</span><br><span class="line">8</span><br></pre></td></tr></table></figure>

<h4 id="grep-2-more-more-blank"><a href="#grep-2-more-more-blank" class="headerlink" title="grep 2 more more blank"></a>grep 2 more more blank</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ grep -E <span class="string">&quot;\s&#123;2,&#125;&quot;</span> <span class="variable">$&#123;dname&#125;</span>.txt &gt;&gt; <span class="variable">$&#123;dname&#125;</span>_error.txt</span><br><span class="line">$ grep -E <span class="string">&#x27;  +&#x27;</span> <span class="variable">$&#123;dname&#125;</span>.txt &gt;&gt; <span class="variable">$&#123;dname&#125;</span>_error.txt</span><br><span class="line">$ grep -E <span class="string">&quot;\s\s+&quot;</span> <span class="variable">$&#123;dname&#125;</span>.txt &gt;&gt; <span class="variable">$&#123;dname&#125;</span>_error.txt</span><br></pre></td></tr></table></figure>




<h3 id="SSH-ssh"><a href="#SSH-ssh" class="headerlink" title="SSH ssh"></a>SSH ssh</h3><h4 id="Parallel-ssh"><a href="#Parallel-ssh" class="headerlink" title="Parallel ssh"></a>Parallel ssh</h4><ul>
<li>Don ‘t need install anything (pdsh or cluster shell, ansible)</li>
<li>Compatibility<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> <span class="built_in">read</span> line</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">   ssh -n <span class="variable">$line</span> <span class="string">&quot;your command &gt; your log 2&gt;&amp;1 &amp;&quot;</span></span><br><span class="line"><span class="keyword">done</span> &lt; hosts</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="Background-exec-script-by-ssh"><a href="#Background-exec-script-by-ssh" class="headerlink" title="Background exec script by ssh"></a><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/29142/getting-ssh-to-execute-a-command-in-the-background-on-target-machine">Background exec script by ssh</a></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="keyword">while</span> <span class="built_in">read</span> line; <span class="keyword">do</span> <span class="built_in">echo</span> -------- <span class="variable">$line</span>  -----------; ssh -n -t <span class="variable">$line</span> <span class="string">&#x27;sh -c &quot;( ( nohup /opt/test.sh &amp;&gt;/dev/null ) &amp; )&quot;&#x27;</span>; <span class="keyword">done</span> &lt; hosts</span><br></pre></td></tr></table></figure>

<h4 id="output-ssh-script"><a href="#output-ssh-script" class="headerlink" title="output ssh script"></a>output ssh script</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> <span class="string">&quot;echo -n <span class="variable">$line</span>\&quot; \&quot; &quot;</span>; <span class="built_in">echo</span>  <span class="string">&quot;ssh  -oConnectTimeout=20 -2 -a <span class="variable">$line</span> \&quot;cat /tmp/test_*.txt; \&quot;&quot;</span></span><br></pre></td></tr></table></figure>
<h4 id="double-quotes-single-quotes"><a href="#double-quotes-single-quotes" class="headerlink" title="double-quotes, single-quotes"></a><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/13826149/how-have-both-local-and-remote-variable-inside-an-ssh-command">double-quotes, single-quotes</a></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">A=100;</span><br><span class="line">ssh name@host <span class="string">&quot;A=101;echo \$A&quot;</span></span><br><span class="line">101</span><br><span class="line"></span><br><span class="line">ssh name@host <span class="string">&quot;A=101;echo <span class="variable">$A</span>&quot;</span></span><br><span class="line">100</span><br><span class="line"><span class="comment">#bash expands it to:</span></span><br><span class="line">ssh name@host <span class="string">&quot;A=101; echo 100&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#use single-quotes</span></span><br><span class="line">ssh name@host <span class="string">&#x27;A=101;echo $A&#x27;</span></span><br><span class="line">101</span><br><span class="line"></span><br><span class="line"><span class="comment">#ssh print single quota</span></span><br><span class="line">ssh <span class="variable">$line</span> <span class="string">&#x27; &#x27;</span><span class="string">&quot;&#x27;&quot;</span><span class="string">&#x27;echo $(lctl dl | grep lfs-OST0005 | tr -s &quot; &quot; | cut -d &quot; &quot; -f 1) deactivate &#x27;</span><span class="string">&quot;&#x27;&quot;</span><span class="string">&#x27; &#x27;</span></span><br><span class="line"></span><br><span class="line">ssh <span class="variable">$line</span> bash -c <span class="string">&#x27;&quot;lctl get_param mdt.$(lctl dl | awk &#x27;</span><span class="string">&quot;&#x27;&quot;</span><span class="string">&#x27;$0~/mdt /&#123;print $4&#125;&#x27;</span><span class="string">&quot;&#x27;&quot;</span><span class="string">&#x27; | cut -d &#x27;</span><span class="string">&quot;&#x27;&quot;</span><span class="string">&#x27;-&#x27;</span><span class="string">&quot;&#x27;&quot;</span><span class="string">&#x27; -f1)-MDT0000.root_squash; lctl get_param mdt.$(lctl dl | awk &#x27;</span><span class="string">&quot;&#x27;&quot;</span><span class="string">&#x27;$0~/mdt /&#123;print $4&#125;&#x27;</span><span class="string">&quot;&#x27;&quot;</span><span class="string">&#x27; | cut -d &#x27;</span><span class="string">&quot;&#x27;&quot;</span><span class="string">&#x27;-&#x27;</span><span class="string">&quot;&#x27;&quot;</span><span class="string">&#x27; -f1)-MDT0000.nosquash_nids&quot;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## echo version</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;ssh <span class="variable">$line</span> bash -c &#x27;\&quot;lctl get_param mdt.\$(lctl dl | awk &#x27;\&quot;&#x27;\&quot;&#x27;\$0~/mdt /&#123;print \$4&#125;&#x27;\&quot;&#x27;\&quot;&#x27; | cut -d &#x27;\&quot;&#x27;\&quot;&#x27;-&#x27;\&quot;&#x27;\&quot;&#x27; -f1)-MDT0000.root_squash;lctl get_param mdt.\$(lctl dl | awk &#x27;\&quot;&#x27;\&quot;&#x27;\$0~/mdt /&#123;print \$4&#125;&#x27;\&quot;&#x27;\&quot;&#x27; | cut -d &#x27;\&quot;&#x27;\&quot;&#x27;-&#x27;\&quot;&#x27;\&quot;&#x27; -f1)-MDT0000.nosquash_nids  \&quot;&#x27; &quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;[[ ! $? -eq 0 ]] &amp;&amp; echo &#x27;</span><span class="variable">$line</span><span class="string">&#x27; &gt;&gt; /tmp/failed.log&#x27;</span></span><br></pre></td></tr></table></figure>

<h4 id="ssh-share-parameter-by-echo-output"><a href="#ssh-share-parameter-by-echo-output" class="headerlink" title="ssh share parameter by echo output"></a><a target="_blank" rel="noopener" href="https://www.cnblogs.com/azureology/p/13302155.html">ssh share parameter by echo output</a></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="built_in">echo</span> Checking hosts...</span><br><span class="line"><span class="function"><span class="title">check</span></span>()&#123;</span><br><span class="line"><span class="keyword">for</span> <span class="variable">$host</span> <span class="keyword">in</span> Server-&#123;&#123;0..9&#125;,&#123;A..Z&#125;&#125;</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> ping -w 3 <span class="variable">$host</span> &gt; /dev/null</span><br><span class="line">    <span class="keyword">then</span></span><br><span class="line">        <span class="keyword">if</span> [ `ssh user@<span class="variable">$host</span> pgrep -c myapp` -eq 0 ]</span><br><span class="line">        <span class="keyword">then</span></span><br><span class="line">            <span class="comment"># The server is free</span></span><br><span class="line">            <span class="built_in">echo</span> <span class="variable">$host</span> <span class="comment">#&lt;---echo the hostname, do not put it in the bash array because the sub process not share the paramters, or you could export it</span></span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">&#125;&amp;  <span class="comment">#&lt;------background parallel </span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"><span class="built_in">wait</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> host <span class="keyword">in</span> `check`</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    ssh user@<span class="variable">$host</span> bash ~/work.sh</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<h4 id="ssh-command-hang"><a href="#ssh-command-hang" class="headerlink" title="ssh command hang"></a>ssh command hang</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#sometimes ssh remote exec command not work</span></span><br><span class="line">ssh -n name@host  <span class="string">&#x27;your command&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#-t  Force pseudo-terminal allocation.  This can be used to execute arbitrary screen-based programs on a remote machine, which can be very useful, e.g. when implementing menu services.  Multiple -t options force tty allocation, even if ssh has no local tty.</span></span><br></pre></td></tr></table></figure>

<p>#There are a issue cause I can ‘t parallel exec ssh in bash script, randomly connection closed</p>
<p>#server setting<br>cat &#x2F;etc&#x2F;ssh&#x2F;sshd_config | grep max -i<br>MaxSessions 512<br>ClientAliveCountMax 512<br>MaxStartups 500:1:500</p>
<p>client $ ssh -n -t -o TCPKeepAlive&#x3D;yes -o ServerAliveInterval&#x3D;30 -o GSSAPIAuthentication&#x3D;no -o ControlPersist&#x3D;600 $line ‘$your command’</p>
<p>manager $ while read line<br>do<br>ssh -n -t -o TCPKeepAlive&#x3D;yes -o GSSAPIAuthentication&#x3D;no $line ‘screen -dmS test “&#x2F;root&#x2F;test.sh”‘<br>done &lt; hosts</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#### jump 2 nodes</span><br><span class="line">```bash</span><br><span class="line">$ ssh -t user1@$server1 -o GSSAPIAuthentication=no &#x27;sudo scp tmp.sh root@$server_ip:&#x27;</span><br><span class="line">$ ssh -t user1@$server1 -o GSSAPIAuthentication=no &#x27;sudo ssh -n root@$server2_ip sh ./run.sh&#x27;</span><br></pre></td></tr></table></figure>

<h4 id="remove-name-begin-with-“-“"><a href="#remove-name-begin-with-“-“" class="headerlink" title="remove name begin with “-“"></a><a target="_blank" rel="noopener" href="https://unix.stackexchange.com/questions/1519/how-do-i-delete-a-file-whose-name-begins-with-hyphen-a-k-a-dash-or-minus">remove name begin with “-“</a></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">rm</span> -- --<span class="built_in">help</span></span><br><span class="line"><span class="built_in">rm</span> ./--help</span><br></pre></td></tr></table></figure>

<h3 id="test"><a href="#test" class="headerlink" title="test"></a>test</h3><h4 id="test-the-variable-is-numeric"><a href="#test-the-variable-is-numeric" class="headerlink" title="test the variable is numeric"></a><a target="_blank" rel="noopener" href="https://unix.stackexchange.com/questions/281271/can-i-determine-type-of-an-awk-variable/713121#713121">test the variable is numeric</a></h4><p>is number </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">#ver&lt;4.2</span><br><span class="line">if(($1!=0 &amp;&amp; $1+0==$1) || ($1==0 &amp;&amp; $1+0==0))</span><br><span class="line">  numeric</span><br><span class="line">else</span><br><span class="line">  non-numeric</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#0-10 will be a numeric</span><br><span class="line">awk &#x27;BEGIN&#123;a=&quot;-0&quot; ; if(a!=0 &amp;&amp; a+0==0) &#123;print &quot;non-numeric&quot;&#125; else &#123;print &quot;numeric&quot;&#125; &#125;&#x27;</span><br><span class="line">non-numeric</span><br><span class="line">awk &#x27;BEGIN&#123;a=&quot;0&quot; ; if(a!=0 &amp;&amp; a+0==0) &#123;print &quot;non-numeric&quot;&#125; else &#123;print &quot;numeric&quot;&#125; &#125;&#x27;</span><br><span class="line">numeric</span><br><span class="line">awk &#x27;BEGIN&#123;a=&quot;123&quot; ; if(a!=0 &amp;&amp; a+0==0) &#123;print &quot;non-numeric&quot;&#125; else &#123;print &quot;numeric&quot;&#125; &#125;&#x27;</span><br><span class="line">numeric</span><br><span class="line">awk &#x27;BEGIN&#123;a=&quot;-123&quot; ; if(a!=0 &amp;&amp; a+0==0) &#123;print &quot;non-numeric&quot;&#125; else &#123;print &quot;numeric&quot;&#125; &#125;&#x27;</span><br><span class="line">numeric</span><br><span class="line">awk &#x27;BEGIN&#123;a=&quot;abc&quot; ; if(a!=0 &amp;&amp; a+0==0) &#123;print &quot;non-numeric&quot;&#125; else &#123;print &quot;numeric&quot;&#125; &#125;&#x27;</span><br><span class="line">non-numeric</span><br><span class="line"></span><br><span class="line">#ver&gt;4.2</span><br><span class="line">awk &#x27;BEGIN &#123;print typeof(&quot;a&quot;)&#125;&#x27;</span><br><span class="line">string</span><br><span class="line">awk &#x27;BEGIN &#123;print typeof(&quot;-0&quot;)&#125;&#x27;</span><br><span class="line">string</span><br><span class="line">awk &#x27;BEGIN &#123;print typeof(&quot;123&quot;)&#125;&#x27;</span><br><span class="line">string</span><br><span class="line">awk &#x27;BEGIN &#123;print typeof(123)&#125;&#x27;</span><br><span class="line">number</span><br><span class="line">awk &#x27;BEGIN &#123;print typeof(-123)&#125;&#x27;</span><br><span class="line">number</span><br></pre></td></tr></table></figure>

<h4 id="is-a-integer"><a href="#is-a-integer" class="headerlink" title="is a integer"></a>is a integer</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">a=1</span><br><span class="line">[[ <span class="variable">$a</span> == *[[:digit:]]* ]] &amp;&amp; <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$a</span> is an integer&quot;</span></span><br><span class="line">[[ <span class="variable">$1</span> == ?(-)+([0-9]) ]] &amp;&amp; <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$a</span> is an integer&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#match yes</span></span><br><span class="line">[[ <span class="string">&quot;<span class="variable">$response</span>&quot;</span> =~ ^([yY][eE][sS]|[yY])+$ ]]</span><br><span class="line">awk <span class="string">&#x27;/^[[:digit:]]+/&#x27;</span> file</span><br></pre></td></tr></table></figure>


<h3 id="STRING"><a href="#STRING" class="headerlink" title="STRING"></a>STRING</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># string length</span></span><br><span class="line">[[ <span class="variable">$&#123;#f_check&#125;</span> -le 8 ]]</span><br><span class="line"></span><br><span class="line"><span class="comment"># variable is a number</span></span><br><span class="line">[ ! -z <span class="string">&quot;<span class="variable">$&#123;VAR##*[!0-9]*&#125;</span>&quot;</span> ] &amp;&amp; <span class="built_in">echo</span> <span class="variable">$VAR</span><span class="string">&quot; is a number&quot;</span> || <span class="built_in">echo</span> <span class="variable">$VAR</span><span class="string">&quot; is not a number&quot;</span>;</span><br><span class="line">[[ <span class="string">&quot;<span class="variable">$VAR</span>&quot;</span> -eq <span class="string">&quot;<span class="variable">$VAR</span>&quot;</span> ]]</span><br><span class="line"></span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">$b</span></span><br><span class="line"><span class="comment">#50_5000cca26b90c3b1</span></span><br><span class="line"></span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">$c</span></span><br><span class="line">5000cca26b90c3b1</span><br><span class="line"></span><br><span class="line">$ [[ <span class="variable">$b</span> =~ <span class="variable">$c</span> ]] &amp;&amp; <span class="built_in">echo</span> ok</span><br><span class="line">ok</span><br></pre></td></tr></table></figure>

<h3 id="ARRAY"><a href="#ARRAY" class="headerlink" title="ARRAY"></a>ARRAY</h3><h4 id="Normal-Array"><a href="#Normal-Array" class="headerlink" title="Normal Array"></a><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/10586153/how-to-split-a-string-into-an-array-in-bash">Normal Array</a></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#diff 2 array</span></span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">$&#123;Array1[@]&#125;</span> <span class="variable">$&#123;Array2[@]&#125;</span> | <span class="built_in">tr</span> <span class="string">&#x27; &#x27;</span> <span class="string">&#x27;\n&#x27;</span> | <span class="built_in">sort</span> | <span class="built_in">uniq</span> -u</span><br><span class="line"></span><br><span class="line"><span class="comment">#print array element part</span></span><br><span class="line">$ arr=(aa bb cc)</span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">$&#123;arr[0]&#125;</span></span><br><span class="line">aa</span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">$&#123;arr[0]:0:1&#125;</span></span><br><span class="line">a</span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">$&#123;arr[0]:0:2&#125;</span></span><br><span class="line">aa</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#strings to array</span></span><br><span class="line">$ strings=<span class="string">&quot;Paris France Europe&quot;</span></span><br><span class="line">$ array=( <span class="variable">$strings</span> )</span><br><span class="line"></span><br><span class="line"><span class="comment">#array to variable</span></span><br><span class="line">$ VAR=$(array)</span><br><span class="line"></span><br><span class="line"><span class="comment">#loop</span></span><br><span class="line">$ <span class="keyword">for</span> i <span class="keyword">in</span> <span class="variable">$&#123;!array[@]&#125;</span></span><br><span class="line">  <span class="keyword">do</span> </span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$i</span> <span class="variable">$&#123;array[$i]&#125;</span>&quot;</span>; </span><br><span class="line">  <span class="keyword">done</span> </span><br><span class="line">0 Paris</span><br><span class="line">1 France</span><br><span class="line">2 Europe</span><br><span class="line"></span><br><span class="line">$ <span class="keyword">for</span> i <span class="keyword">in</span> <span class="variable">$&#123;array[@]&#125;</span>; </span><br><span class="line">  <span class="keyword">do</span> </span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$i</span>&quot;</span>; </span><br><span class="line">  <span class="keyword">done</span> </span><br><span class="line"></span><br><span class="line">Paris</span><br><span class="line">France</span><br><span class="line">Europe</span><br><span class="line"></span><br><span class="line"><span class="comment">#append</span></span><br><span class="line">$ array[1]+=<span class="string">&quot; Munich&quot;</span></span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">$&#123;array[1]&#125;</span></span><br><span class="line">France Munich</span><br><span class="line"></span><br><span class="line">$ <span class="built_in">read</span> -ra temp_array &lt;&lt;&lt; <span class="string">&quot;<span class="variable">$&#123;array[*]&#125;</span>&quot;</span></span><br><span class="line">$ <span class="built_in">read</span> -ra array &lt;&lt;&lt; <span class="string">&quot;<span class="variable">$&#123;temp_array[*]&#125;</span>&quot;</span></span><br><span class="line"></span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">$&#123;array[1]&#125;</span></span><br><span class="line">France</span><br><span class="line">$ <span class="keyword">for</span> i <span class="keyword">in</span> <span class="variable">$&#123;array[@]&#125;</span>; <span class="keyword">do</span> <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$i</span>&quot;</span>; <span class="keyword">done</span> </span><br><span class="line">Paris</span><br><span class="line">France</span><br><span class="line">Munich</span><br><span class="line">Europe</span><br><span class="line"></span><br><span class="line">or</span><br><span class="line"><span class="comment"># so you can export the strings to share and then you can convert the strings to the array</span></span><br><span class="line">$ <span class="built_in">read</span> -r -a array &lt;&lt;&lt; <span class="string">&quot;<span class="variable">$strings</span>&quot;</span></span><br><span class="line"></span><br><span class="line">$ string=<span class="string">&#x27;one_two_three_four_five&#x27;</span></span><br><span class="line">$ IFS=<span class="string">&#x27;_&#x27;</span> <span class="built_in">read</span> -r a second a fourth a &lt;&lt;&lt;<span class="string">&quot;<span class="variable">$string</span>&quot;</span></span><br><span class="line">$ <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$second</span> <span class="variable">$fourth</span>&quot;</span></span><br><span class="line">two four</span><br><span class="line"></span><br><span class="line">or</span><br><span class="line"></span><br><span class="line">$ string=<span class="string">&#x27;one_two_three_four_five&#x27;</span></span><br><span class="line">$ <span class="built_in">readarray</span> -d _ -t arr &lt;&lt;&lt;<span class="string">&quot;<span class="variable">$string</span>&quot;</span></span><br><span class="line">$ <span class="built_in">echo</span> <span class="string">&quot;array <span class="variable">$&#123;arr[1]&#125;</span> <span class="variable">$&#123;arr[3]&#125;</span>&quot;</span> </span><br><span class="line"></span><br><span class="line">$ <span class="built_in">readarray</span> -t -d _ arr &lt; &lt;(<span class="built_in">printf</span> %s <span class="string">&quot;<span class="variable">$string</span>&quot;</span>) </span><br><span class="line"></span><br><span class="line">$ <span class="built_in">set</span> -f; IFS=_; arr=(<span class="variable">$string</span>)</span><br><span class="line">https://unix.stackexchange.com/questions/312280/split-string-by-delimiter-and-get-n-th-element</span><br><span class="line"></span><br><span class="line">$ <span class="keyword">for</span> element <span class="keyword">in</span> <span class="string">&quot;<span class="variable">$&#123;array[@]&#125;</span>&quot;</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$element</span>&quot;</span>;</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">Paris</span><br><span class="line">France</span><br><span class="line">Europe</span><br><span class="line"></span><br><span class="line">or</span><br><span class="line"></span><br><span class="line"><span class="comment">#Non hyper threading cores</span></span><br><span class="line"><span class="built_in">export</span> NHTCORES=$(<span class="keyword">for</span> ((i=<span class="number">0</span>;i&lt;$(grep -c processor /proc/cpuinfo);i++)); <span class="keyword">do</span> <span class="built_in">cat</span> /sys/devices/system/cpu/cpu<span class="variable">$i</span>/cache/index2/shared_cpu_list; <span class="keyword">done</span> | awk -F, <span class="string">&#x27;&#123;a[$1]=$0;PROCINFO[&quot;sorted_in&quot;] = &quot;@val_num_desc&quot;&#125; END&#123;count=0;for (i in a) &#123;if(count==0) &#123;printf i&#125; else &#123;printf &quot;,&quot;i&#125;;count++ &#125;;print &quot; &quot;count&#125;&#x27;</span>)</span><br><span class="line"><span class="built_in">export</span> NOHTCORES=$(<span class="built_in">echo</span> <span class="variable">$NHTCORES</span> | awk <span class="string">&#x27;&#123;print $1&#125;&#x27;</span>)</span><br><span class="line"></span><br><span class="line">IFS=<span class="string">&#x27;,&#x27;</span> <span class="built_in">read</span> -r -a array &lt;&lt;&lt; <span class="string">&quot;<span class="variable">$NOHTCORES</span>&quot;</span></span><br><span class="line"><span class="keyword">for</span> element <span class="keyword">in</span> <span class="string">&quot;<span class="variable">$&#123;!array[@]&#125;</span>&quot;</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$&#123;array[element]&#125;</span>&quot;</span>;</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#remove array element</span></span><br><span class="line">my_array=(apple banana orange pear)</span><br><span class="line">remove_value=<span class="string">&quot;banana&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="string">&quot;<span class="variable">$&#123;!my_array[@]&#125;</span>&quot;</span>; <span class="keyword">do</span></span><br><span class="line">  <span class="keyword">if</span> [[ <span class="string">&quot;<span class="variable">$&#123;my_array[$i]&#125;</span>&quot;</span> == <span class="string">&quot;<span class="variable">$&#123;remove_value&#125;</span>&quot;</span> ]]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">unset</span> my_array[<span class="variable">$i</span>]</span><br><span class="line">  <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">$ <span class="keyword">for</span> index <span class="keyword">in</span> <span class="string">&quot;<span class="variable">$&#123;!array[@]&#125;</span>&quot;</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$index</span> <span class="variable">$&#123;array[index]&#125;</span>&quot;</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">0 Paris</span><br><span class="line">1 France</span><br><span class="line">2 Europe</span><br><span class="line"></span><br><span class="line"><span class="comment">#print last value</span></span><br><span class="line">$ <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$&#123;array[-1]&#125;</span>&quot;</span></span><br><span class="line">Europe</span><br><span class="line"></span><br><span class="line">$ <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$&#123;array[@]: 0:3&#125;</span>&quot;</span></span><br><span class="line">Paris France Europe</span><br><span class="line"></span><br><span class="line"><span class="comment">#number of elements in an array, length</span></span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">$&#123;#array[@]&#125;</span></span><br><span class="line">3</span><br><span class="line"></span><br><span class="line"><span class="comment"># print all value</span></span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">$&#123;array[@]&#125;</span></span><br><span class="line">Paris France Europe</span><br><span class="line"></span><br><span class="line">or</span><br><span class="line">$ strings=<span class="string">&quot;Paris, France, Europe&quot;</span></span><br><span class="line">$ IFS=<span class="string">&#x27;, &#x27;</span> <span class="built_in">read</span> -r -a array &lt;&lt;&lt; <span class="string">&quot;<span class="variable">$string</span>&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#append</span></span><br><span class="line">ARRAY=()</span><br><span class="line">ARRAY+=(<span class="string">&#x27;foo&#x27;</span>)</span><br><span class="line">ARRAY+=(<span class="string">&#x27;bar&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="string">&quot;<span class="variable">$&#123;!ARRAY[@]&#125;</span>&quot;</span>; <span class="keyword">do</span> <span class="built_in">echo</span> <span class="variable">$i</span>; <span class="keyword">done</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="string">&quot;<span class="variable">$&#123;ARRAY[@]&#125;</span>&quot;</span>; <span class="keyword">do</span> <span class="built_in">echo</span> <span class="variable">$i</span>; <span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">declare</span> -a names</span><br><span class="line"></span><br><span class="line">names[0]=1111</span><br><span class="line">names[1]=2222</span><br><span class="line">or</span><br><span class="line">names=(<span class="string">&#x27;1111&#x27;</span> <span class="string">&#x27;2222&#x27;</span>)</span><br><span class="line">or</span><br><span class="line">names=([0]=<span class="string">&#x27;1111&#x27;</span> [1]=<span class="string">&#x27;2222&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># get array from file</span></span><br><span class="line">names=($(<span class="built_in">cat</span> files.txt))</span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">$&#123;names[1]&#125;</span></span><br><span class="line">2222222</span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">$&#123;names[2]&#125;</span></span><br><span class="line">3333333</span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">$&#123;names[3]&#125;</span></span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">$&#123;#names[@]&#125;</span></span><br><span class="line">3</span><br><span class="line"></span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">$&#123;names[@]:0:1&#125;</span></span><br><span class="line">1111111</span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">$&#123;names[@]:0:2&#125;</span></span><br><span class="line">1111111 2222222</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;names[@]:1&#125;</span></span><br><span class="line">2222222 333333</span><br><span class="line"></span><br><span class="line">$ names1=([0]=<span class="string">&#x27;1111&#x27;</span> [2]=<span class="string">&#x27;2222&#x27;</span> [4]=<span class="string">&#x27;3333&#x27;</span>)</span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">$&#123;#adobe[@]&#125;</span></span><br><span class="line">3</span><br><span class="line"></span><br><span class="line">$ names=(<span class="string">&#x27;1111&#x27;</span> <span class="string">&#x27;2222&#x27;</span> <span class="string">&#x27;3333&#x27;</span> <span class="string">&#x27;4444&#x27;</span> <span class="string">&#x27;5555&#x27;</span>)</span><br><span class="line">$ names2=(<span class="string">&#x27;6666&#x27;</span> <span class="string">&#x27;7777&#x27;</span>)</span><br><span class="line">$ names3=(<span class="variable">$&#123;names[@]&#125;</span> <span class="variable">$&#123;names2[@]&#125;</span>)</span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">$&#123;#names3[@]&#125;</span></span><br><span class="line">7</span><br><span class="line"></span><br><span class="line"><span class="comment">#delete array</span></span><br><span class="line">$ names=(<span class="string">&#x27;1111&#x27;</span> <span class="string">&#x27;2222&#x27;</span> <span class="string">&#x27;3333&#x27;</span> <span class="string">&#x27;4444&#x27;</span>)</span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">$&#123;names[@]/1111/0000&#125;</span></span><br><span class="line">0000 2222 3333 4444</span><br><span class="line"></span><br><span class="line"><span class="comment">#delete array element</span></span><br><span class="line">$ noroot_dev=(<span class="variable">$&#123;noroot_dev[@]/$j/&#125;</span>)</span><br></pre></td></tr></table></figure>

<h4 id="Associative-ARRAY"><a href="#Associative-ARRAY" class="headerlink" title="Associative ARRAY"></a>Associative ARRAY</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line">declare -A array</span><br><span class="line">array[foo]=bar</span><br><span class="line">array[bar]=foo</span><br><span class="line"></span><br><span class="line">for i in &quot;$&#123;!array[@]&#125;&quot;</span><br><span class="line">do</span><br><span class="line">  echo -n &quot;key : $i; &quot;</span><br><span class="line">  echo &quot;value: $&#123;array[$i]&#125;&quot;</span><br><span class="line">done</span><br><span class="line"></span><br><span class="line"># unset the Associative array element</span><br><span class="line">line_var=8;</span><br><span class="line">p=5200</span><br><span class="line">declare -A array</span><br><span class="line">for ((i=p;i&lt;=$((p+8*2));i++)); do array[&quot;$i&quot;]=$i; done;</span><br><span class="line">tmp_port=$(echo &quot;$&#123;array[@]&#125;&quot; | awk &#x27;&#123;if(length($1)&gt;=4) print $1&#125;&#x27;)</span><br><span class="line">echo &quot;tmp_port:&quot;$tmp_port</span><br><span class="line">echo &quot;$&#123;array[@]&#125;&quot;</span><br><span class="line">echo &quot;delete&quot;</span><br><span class="line">unset &quot;array[$tmp_port]&quot;</span><br><span class="line">echo &quot;$&#123;array[@]&#125;&quot;</span><br><span class="line"></span><br><span class="line"># copy array</span><br><span class="line">declare -A ARR</span><br><span class="line">for key in &quot;$&#123;!ARR[@]&#125;&quot;</span><br><span class="line">do</span><br><span class="line">  ARRAY[&quot;$key&quot;]=&quot;$&#123;ARR[&quot;$key&quot;]&#125;&quot;</span><br><span class="line">  # ARRAY+=( [&quot;$key&quot;]=&quot;$&#123;ARR[&quot;$key&quot;]&#125;&quot; )</span><br><span class="line">done</span><br><span class="line"></span><br><span class="line"># ubuntu bash 4.4 test</span><br><span class="line">#!/bin/bash</span><br><span class="line">declare -A ARR</span><br><span class="line">while read line</span><br><span class="line">do</span><br><span class="line">   key=$(echo $line | awk &#x27;&#123;print $1&#125;&#x27;)</span><br><span class="line">   value=$(echo $line | awk &#x27;&#123;print $2&#125;&#x27;)</span><br><span class="line">   ARR[$key]=$value</span><br><span class="line">done &lt; /tmp/tmp</span><br><span class="line"></span><br><span class="line">print_ARR() &#123;</span><br><span class="line">    local -n array=$1</span><br><span class="line">    for i in &quot;$&#123;!array[@]&#125;&quot;; do</span><br><span class="line">          echo -n &quot;$i&quot;</span><br><span class="line">          echo &quot; $&#123;array[$i]&#125;&quot;</span><br><span class="line">     done</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">for i in &quot;$&#123;!ARR[@]&#125;&quot;</span><br><span class="line">do</span><br><span class="line">   echo -n &quot;key: $i &quot;</span><br><span class="line">   echo &quot;value: $&#123;ARR[$i]&#125;&quot;</span><br><span class="line">done</span><br><span class="line"></span><br><span class="line">echo ---------in func ----------</span><br><span class="line">print_ARR &quot;ARR&quot;</span><br><span class="line"></span><br><span class="line">or re-init</span><br><span class="line">#!/bin/bash</span><br><span class="line">while read line</span><br><span class="line">do</span><br><span class="line">   key=$(echo $line | awk &#x27;&#123;print $1&#125;&#x27;)</span><br><span class="line">   value=$(echo $line | awk &#x27;&#123;print $2&#125;&#x27;)</span><br><span class="line">   ARR[$key]=$value</span><br><span class="line">done &lt;&lt;&lt; &quot;$([[ ! -z $var ]] &amp;&amp; awk  &#x27;&#123;print $1,$2&#125;&#x27; your_file)&quot;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">$ lsscsi_out=$(lsscsi | awk &#x27;$NF!~/-/ &#123;print $NF&#125;&#x27;)</span><br><span class="line">$ read -r -a noroot_dev &lt;&lt;&lt; $lsscsi_out ## you could change IFS for your need, IFS=&#x27;, &#x27; read -r -a array &lt;&lt;&lt; &quot;$string&quot;</span><br><span class="line">$ echo $&#123;#noroot_dev[@]&#125;</span><br><span class="line">6</span><br><span class="line">$ echo $&#123;noroot_dev[@]&#125;</span><br><span class="line">/dev/sda /dev/sdf /dev/sde /dev/sdd /dev/sdc /dev/sdb</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/4069188/how-to-pass-an-associative-array-as-argument-to-a-function-in-bash/46085661#46085661">access array in function</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cat</span> /tmp/test.txt</span><br><span class="line">AA 11</span><br><span class="line">BB 22</span><br><span class="line">CC 33</span><br><span class="line">DD 44</span><br><span class="line">ZZ 55</span><br><span class="line">YY 66</span><br><span class="line"></span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"><span class="built_in">declare</span> -A ARR</span><br><span class="line"><span class="keyword">while</span> <span class="built_in">read</span> line</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">   key=$(<span class="built_in">echo</span> <span class="variable">$line</span> | awk <span class="string">&#x27;&#123;print $1&#125;&#x27;</span>)</span><br><span class="line">   value=$(<span class="built_in">echo</span> <span class="variable">$line</span> | awk <span class="string">&#x27;&#123;print $2&#125;&#x27;</span>)</span><br><span class="line">   ARR[<span class="variable">$key</span>]=<span class="variable">$value</span></span><br><span class="line"><span class="keyword">done</span> &lt; /tmp/test.txt</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">fun</span></span>() &#123;</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="string">&quot;<span class="variable">$&#123;!ARR[@]&#125;</span>&quot;</span>; <span class="keyword">do</span></span><br><span class="line">          <span class="built_in">echo</span> -n <span class="string">&quot;<span class="variable">$i</span>&quot;</span></span><br><span class="line">          <span class="built_in">echo</span> <span class="string">&quot; <span class="variable">$&#123;ARR[$i]&#125;</span>&quot;</span></span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$1</span></span><br><span class="line">&#125;</span><br><span class="line">fun <span class="string">&quot;hahaha&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="Wait-sub-process-finish"><a href="#Wait-sub-process-finish" class="headerlink" title="Wait sub process finish"></a>Wait sub process finish</h3><p>Here is example to paralle running SMcli to collect MD34xx’s log.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> <span class="built_in">read</span> line</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">        SMcli localhost -n <span class="variable">$line</span> -c <span class="string">&quot;save storageArray supportdata file=\&quot;/root/<span class="variable">$&#123;1&#125;</span>/smcli_<span class="variable">$&#123;line&#125;</span>_controller\&quot; force=true;&quot;</span> &amp;</span><br><span class="line">        <span class="built_in">echo</span> $! &gt;&gt; <span class="variable">$dell_pids</span></span><br><span class="line"><span class="keyword">done</span> &lt; <span class="variable">$dell_names</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="built_in">read</span> line</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> Begin to <span class="built_in">wait</span> smcli <span class="variable">$line</span></span><br><span class="line">    <span class="built_in">wait</span> <span class="variable">$line</span></span><br><span class="line"><span class="keyword">done</span> &lt; <span class="variable">$dell_pids</span></span><br></pre></td></tr></table></figure>

<h3 id="SED"><a href="#SED" class="headerlink" title="SED"></a><a target="_blank" rel="noopener" href="https://www.oakton.edu/user/2/rjtaylor/cis218/Handouts/sed.txt">SED</a></h3><h4 id="Get-bash-variable"><a href="#Get-bash-variable" class="headerlink" title="Get bash variable"></a>Get bash variable</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sed -i <span class="string">&quot;s/524335808/<span class="variable">$&#123;mem&#125;</span>/&quot;</span></span><br><span class="line">$ sed <span class="string">&quot;/\&lt;<span class="variable">$&#123;a&#125;</span>\&gt;/d&quot;</span> zfs_free_dev <span class="comment"># like grep -w , \&lt;\&gt; force an exact match</span></span><br></pre></td></tr></table></figure>

<h4 id="print-line-from-16224-to-16482"><a href="#print-line-from-16224-to-16482" class="headerlink" title="print line from 16224 to 16482"></a><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/83329/how-can-i-extract-a-predetermined-range-of-lines-from-a-text-file-on-unix">print line from 16224 to 16482</a></h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">AA=string    #delete string and string previos and next line</span><br><span class="line">sed -i -e &#x27;/&#x27;&quot;$AA&quot;&#x27;$/&#123;n;d&#125;&#x27; -e &#x27;$!N;/\n.*&#x27;&quot;$AA&quot;&#x27;$/!P;D&#x27; file</span><br><span class="line"></span><br><span class="line">sed -n &#x27;16224,16482p;16483q&#x27; filename &gt; newfile</span><br><span class="line">p - Print out the pattern space (to the standard output). This command is usually only used in conjunction with the -n command-line option.</span><br><span class="line"></span><br><span class="line">n - If auto-print is not disabled, print the pattern space, then, regardless, replace the pattern space with the next line of input. If there is no more input then sed exits without processing any more commands.</span><br><span class="line"></span><br><span class="line">q - Exit sed without processing any more commands or input. Note that the current pattern space is printed if auto-print is not disabled with the -n option.</span><br></pre></td></tr></table></figure>

<p>modify first display key word</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br></pre></td><td class="code"><pre><span class="line">1 unix 3 unix unix  8</span><br><span class="line">4 5 unix unix unix 2</span><br><span class="line">7 unix 9 unix 12  unix</span><br><span class="line">unix 11 12 unix 14  unix</span><br><span class="line">unix 14 unix unix 16  19 unix 228</span><br><span class="line"></span><br><span class="line"><span class="comment"># match second match colume</span></span><br><span class="line">$ sed <span class="string">&#x27;s/unix/to_linux/2&#x27;</span> /tmp/test.txt</span><br><span class="line">1 unix 3 to_linux unix  8</span><br><span class="line">4 5 unix to_linux unix 2</span><br><span class="line">7 unix 9 to_linux 12  unix</span><br><span class="line">unix 11 12 to_linux 14  unix</span><br><span class="line">unix 14 to_linux unix 16  19 unix 228</span><br><span class="line"></span><br><span class="line">$ sed <span class="string">&#x27;0,/unix/ &#123;s/unix/to_linux/&#125;&#x27;</span> /tmp/test.txt</span><br><span class="line">1 to_linux 3 unix unix  8</span><br><span class="line">4 5 unix unix unix 2</span><br><span class="line">7 unix 9 unix 12  unix</span><br><span class="line">unix 11 12 unix 14  unix</span><br><span class="line">unix 14 unix unix 16  19 unix 228</span><br><span class="line"></span><br><span class="line">second ~ last match colume</span><br><span class="line">$ sed <span class="string">&#x27;s/unix/to_that/2g&#x27;</span> /tmp/test.txt</span><br><span class="line">1 unix 3 to_that to_that  8</span><br><span class="line">4 5 unix to_that to_that 2</span><br><span class="line">7 unix 9 to_that 12  to_that</span><br><span class="line">unix 11 12 to_that 14  to_that</span><br><span class="line">unix 14 to_that to_that 16  19 to_that 228</span><br><span class="line"></span><br><span class="line">$ sed <span class="string">&#x27;s/unix/to_that/3g&#x27;</span> /tmp/test.txt</span><br><span class="line">1 unix 3 unix to_that  8</span><br><span class="line">4 5 unix unix to_that 2</span><br><span class="line">7 unix 9 unix 12  to_that</span><br><span class="line">unix 11 12 unix 14  to_that</span><br><span class="line">unix 14 unix to_that 16  19 to_that 228</span><br><span class="line"></span><br><span class="line"><span class="comment"># or you can</span></span><br><span class="line">$ sed <span class="string">&#x27;s_http://_www_&#x27;</span> file.txt</span><br><span class="line">$ sed <span class="string">&#x27;s|http://|www|&#x27;</span> file.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># use &amp; as the match string</span></span><br><span class="line">$ sed <span class="string">&#x27;s/unix/&#123;&amp;&#125;/&#x27;</span> /tmp/test.txt</span><br><span class="line">1 &#123;unix&#125; 3 unix unix  8</span><br><span class="line">4 5 &#123;unix&#125; unix unix 2</span><br><span class="line">7 &#123;unix&#125; 9 unix 12  unix</span><br><span class="line">&#123;unix&#125; 11 12 unix 14  unix</span><br><span class="line">&#123;unix&#125; 14 unix unix 16  19 unix 228</span><br><span class="line"></span><br><span class="line">$ sed -n <span class="string">&#x27;s/unix/linux/p&#x27;</span> /tmp/test.txt <span class="comment"># only print match line</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#multiple command</span></span><br><span class="line">$ sed -e <span class="string">&#x27;s/unix/linux/&#x27;</span> -e <span class="string">&#x27;s/9/system/&#x27;</span>  /tmp/test.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># only replace some line</span></span><br><span class="line">$ sed <span class="string">&#x27;3 s/unix/to_linux/g&#x27;</span> /tmp/test.txt</span><br><span class="line">1 unix 3 unix unix  8</span><br><span class="line">4 5 unix unix unix 2</span><br><span class="line">7 to_linux 9 to_linux 12  to_linux</span><br><span class="line">unix 11 12 unix 14  unix</span><br><span class="line">unix 14 unix unix 16  19 unix 228</span><br><span class="line"></span><br><span class="line"><span class="comment"># from 1~3 lines</span></span><br><span class="line">$ sed <span class="string">&#x27;1,3 s/unix/to_linux/g&#x27;</span> /tmp/test.txt</span><br><span class="line">1 to_linux 3 to_linux to_linux  8</span><br><span class="line">4 5 to_linux to_linux to_linux 2</span><br><span class="line">7 to_linux 9 to_linux 12  to_linux</span><br><span class="line">unix 11 12 unix 14  unix</span><br><span class="line">unix 14 unix unix 16  19 unix 228</span><br><span class="line"></span><br><span class="line"><span class="comment"># only replace match line</span></span><br><span class="line">$ sed <span class="string">&#x27;/4 5/ s/unix/centos/&#x27;</span> /tmp/test.txt</span><br><span class="line">1 unix 3 unix unix  8</span><br><span class="line">4 5 centos unix unix 2</span><br><span class="line">7 unix 9 unix 12  unix</span><br><span class="line">unix 11 12 unix 14  unix</span><br><span class="line">unix 14 unix unix 16  19 unix 228</span><br><span class="line"></span><br><span class="line"><span class="comment"># delete line</span></span><br><span class="line">$ sed <span class="string">&#x27;2 d&#x27;</span> /tmp/test.txt</span><br><span class="line">$ sed <span class="string">&#x27;5,$ d&#x27;</span> /tmp/test.txt</span><br><span class="line"></span><br><span class="line"><span class="comment">#duplicate text</span></span><br><span class="line">$ sed <span class="string">&#x27;p&#x27;</span> /tmp/test.txt</span><br><span class="line">1 unix 3 unix unix  8</span><br><span class="line">1 unix 3 unix unix  8</span><br><span class="line">4 5 unix unix unix 2</span><br><span class="line">4 5 unix unix unix 2</span><br><span class="line">7 unix 9 unix 12  unix</span><br><span class="line">7 unix 9 unix 12  unix</span><br><span class="line">unix 11 12 unix 14  unix</span><br><span class="line">unix 11 12 unix 14  unix</span><br><span class="line">unix 14 unix unix 16  19 unix 228</span><br><span class="line">unix 14 unix unix 16  19 unix 228</span><br><span class="line"><span class="comment"># grep one or more space/blank</span></span><br><span class="line">$ this_month=Dec ; this_day=3; <span class="built_in">echo</span> <span class="string">&quot;[Wed Dec  3 16:52:46 2021] Some message&quot;</span> | grep -Ei <span class="string">&quot;<span class="variable">$&#123;this_month&#125;</span>\ +<span class="variable">$&#123;this_day&#125;</span> &quot;</span></span><br><span class="line">$ this_month=$(<span class="built_in">date</span> <span class="string">&#x27;+%b&#x27;</span>); this_day=$(<span class="built_in">date</span> <span class="string">&#x27;+%d&#x27;</span> | awk <span class="string">&#x27;&#123;printf &quot;%d\n&quot;,$1&#125;&#x27;</span>); <span class="built_in">echo</span> <span class="string">&quot;[Wed Dec 23 16:52:46 2021] Some message&quot;</span> | grep -Ei <span class="string">&quot;<span class="variable">$&#123;this_month&#125;</span>\ +<span class="variable">$&#123;this_day&#125;</span> &quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># grep wwid</span></span><br><span class="line"><span class="comment"># [:alnum:] = \w</span></span><br><span class="line">$ <span class="built_in">echo</span> 500c0ff0f124cf3c | grep -E <span class="string">&#x27;\w&#123;16,16&#125;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># grep ip addr</span></span><br><span class="line">$ grep -E -o <span class="string">&quot;([0-9]&#123;1,3&#125;[\.])&#123;3&#125;[0-9]&#123;1,3&#125;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># match xx.xxx.xxx.xxx.x, x is the number</span></span><br><span class="line">$ <span class="built_in">ls</span>  | grep -E  <span class="string">&quot;([0-9]&#123;1,3&#125;[\.])&#123;4&#125;[0-9]&#123;1,3&#125;\.[0-9]&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># grep</span></span><br><span class="line">$ sed -n <span class="string">&#x27;/unix/ p&#x27;</span> test.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># grep -v</span></span><br><span class="line">$ sed -n <span class="string">&#x27;/unix/ !p&#x27;</span> test.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># Add line after a match</span></span><br><span class="line">$ sed <span class="string">&#x27;/4 5/ a &quot;Add a new line&quot;&#x27;</span> /tmp/test.txt</span><br><span class="line">sed <span class="string">&#x27;/4 5/ a &quot;Add a new line&quot;&#x27;</span> /tmp/test.txt</span><br><span class="line">1 unix 3 unix unix  8</span><br><span class="line">4 5 unix unix unix 2</span><br><span class="line"><span class="string">&quot;Add a new line&quot;</span></span><br><span class="line">7 unix 9 unix 12  unix</span><br><span class="line">unix 11 12 unix 14  unix</span><br><span class="line">unix 14 unix unix 16  19 unix 228</span><br><span class="line"></span><br><span class="line"><span class="comment"># Add a line before a match</span></span><br><span class="line">$ sed <span class="string">&#x27;/4 5/ i &quot;Add a new line&quot;&#x27;</span> /tmp/test.txt</span><br><span class="line">1 unix 3 unix unix  8</span><br><span class="line"><span class="string">&quot;Add a new line&quot;</span></span><br><span class="line">4 5 unix unix unix 2</span><br><span class="line">7 unix 9 unix 12  unix</span><br><span class="line">unix 11 12 unix 14  unix</span><br><span class="line">unix 14 unix unix 16  19 unix 228</span><br><span class="line"></span><br><span class="line"><span class="comment"># Change the whole line</span></span><br><span class="line">sed <span class="string">&#x27;/4 5/ c &quot;Change line&quot;&#x27;</span> /tmp/test.txt</span><br><span class="line">1 unix 3 unix unix  8</span><br><span class="line"><span class="string">&quot;Change line&quot;</span></span><br><span class="line">7 unix 9 unix 12  unix</span><br><span class="line">unix 11 12 unix 14  unix</span><br><span class="line">unix 14 unix unix 16  19 unix 228</span><br><span class="line"></span><br><span class="line"><span class="comment"># replace match line</span></span><br><span class="line">sed <span class="string">&#x27;/^all:/ s/$/ anotherthing/&#x27;</span> file</span><br></pre></td></tr></table></figure>

<h3 id="bash-set"><a href="#bash-set" class="headerlink" title="[bash set]"></a>[bash set]</h3><h4 id="IFS"><a href="#IFS" class="headerlink" title="IFS"></a>IFS</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># default value, &lt;space&gt;&lt;tab&gt;&lt;newline&gt;</span></span><br><span class="line">$ IFS=$<span class="string">&#x27; \t\n&#x27;</span></span><br><span class="line"></span><br><span class="line">or</span><br><span class="line"></span><br><span class="line">$ IFS=<span class="string">&#x27;input from keyboard space,tab,newline&#x27;</span></span><br><span class="line"><span class="comment"># read IFS</span></span><br><span class="line">$ <span class="built_in">cat</span> -etv &lt;&lt;&lt; <span class="variable">$IFS</span></span><br><span class="line"> ^I$</span><br><span class="line">$</span><br><span class="line"></span><br><span class="line">$ IFS=$(<span class="built_in">echo</span> <span class="string">&quot; \n\t&quot;</span>); <span class="built_in">printf</span> <span class="string">&quot;%s&quot;</span> <span class="string">&quot;<span class="variable">$IFS</span>&quot;</span>|xxd</span><br><span class="line">00000000: 205c 6e5c 74</span><br><span class="line"></span><br><span class="line"><span class="comment"># backup the value</span></span><br><span class="line">OLDIFS=<span class="variable">$IFS</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># default value, &lt;space&gt;&lt;tab&gt;&lt;newline&gt;</span></span><br><span class="line">$ IFS=$<span class="string">&#x27; \t\n&#x27;</span></span><br><span class="line">or</span><br><span class="line">$ IFS=<span class="string">&#x27;input from keyboard space,tab,newline&#x27;</span></span><br><span class="line"><span class="comment"># read IFS</span></span><br><span class="line">$ <span class="built_in">cat</span> -etv &lt;&lt;&lt; <span class="variable">$IFS</span></span><br><span class="line"> ^I$</span><br><span class="line">$</span><br><span class="line"></span><br><span class="line">$ IFS=$(<span class="built_in">echo</span> <span class="string">&quot; \n\t&quot;</span>); <span class="built_in">printf</span> <span class="string">&quot;%s&quot;</span> <span class="string">&quot;<span class="variable">$IFS</span>&quot;</span>|xxd</span><br><span class="line">00000000: 205c 6e5c 74</span><br><span class="line"></span><br><span class="line"><span class="comment"># backup the value</span></span><br><span class="line">OLDIFS=<span class="variable">$IFS</span></span><br></pre></td></tr></table></figure>

<h4 id="Ternary-conditional-operator"><a href="#Ternary-conditional-operator" class="headerlink" title="Ternary conditional operator"></a>Ternary conditional operator</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">time_interval=$((<span class="variable">$1</span> &gt; <span class="number">36000</span>? <span class="number">36000</span>: <span class="number">3600</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">#or</span></span><br><span class="line">result=<span class="string">&quot;&quot;</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> $(<span class="built_in">seq</span> 0 $((<span class="variable">$n</span> &gt; <span class="number">0</span>? <span class="variable">$n</span>-<span class="number">1</span>: <span class="number">0</span>))); <span class="keyword">do</span></span><br><span class="line">  result+=<span class="string">&quot;rank-<span class="variable">$i</span>&quot;</span></span><br><span class="line">  result+=<span class="string">&quot; &quot;</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-f</span><br><span class="line">Disable filename expansion (globbing).</span><br><span class="line"></span><br><span class="line">-v</span><br><span class="line">Print shell input lines as they are <span class="built_in">read</span>.</span><br></pre></td></tr></table></figure>

<h3 id="bash-double-quotes-single-quotes"><a href="#bash-double-quotes-single-quotes" class="headerlink" title="bash double-quotes, single-quotes"></a><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/13826149/how-have-both-local-and-remote-variable-inside-an-ssh-command">bash double-quotes, single-quotes</a></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">A=100;</span><br><span class="line">ssh name@host <span class="string">&quot;A=101;echo \$A&quot;</span></span><br><span class="line">101</span><br><span class="line"></span><br><span class="line">ssh name@host <span class="string">&quot;A=101;echo <span class="variable">$A</span>&quot;</span></span><br><span class="line">100</span><br><span class="line"><span class="comment">#bash expands it to:</span></span><br><span class="line">ssh name@host <span class="string">&quot;A=101; echo 100&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#use single-quotes</span></span><br><span class="line">ssh name@host <span class="string">&#x27;A=101;echo $A&#x27;</span></span><br><span class="line">101</span><br><span class="line"></span><br><span class="line"><span class="comment">#ssh print single quota</span></span><br><span class="line">ssh <span class="variable">$line</span> <span class="string">&#x27; &#x27;</span><span class="string">&quot;&#x27;&quot;</span><span class="string">&#x27;echo $(lctl dl | grep lfs-OST0005 | tr -s &quot; &quot; | cut -d &quot; &quot; -f 1) deactivate &#x27;</span><span class="string">&quot;&#x27;&quot;</span><span class="string">&#x27; &#x27;</span></span><br><span class="line"></span><br><span class="line">ssh <span class="variable">$line</span> bash -c <span class="string">&#x27;&quot;lctl get_param mdt.$(lctl dl | awk &#x27;</span><span class="string">&quot;&#x27;&quot;</span><span class="string">&#x27;$0~/mdt /&#123;print $4&#125;&#x27;</span><span class="string">&quot;&#x27;&quot;</span><span class="string">&#x27; | cut -d &#x27;</span><span class="string">&quot;&#x27;&quot;</span><span class="string">&#x27;-&#x27;</span><span class="string">&quot;&#x27;&quot;</span><span class="string">&#x27; -f1)-MDT0000.root_squash; lctl get_param mdt.$(lctl dl | awk &#x27;</span><span class="string">&quot;&#x27;&quot;</span><span class="string">&#x27;$0~/mdt /&#123;print $4&#125;&#x27;</span><span class="string">&quot;&#x27;&quot;</span><span class="string">&#x27; | cut -d &#x27;</span><span class="string">&quot;&#x27;&quot;</span><span class="string">&#x27;-&#x27;</span><span class="string">&quot;&#x27;&quot;</span><span class="string">&#x27; -f1)-MDT0000.nosquash_nids&quot;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## echo version</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;ssh <span class="variable">$line</span> bash -c &#x27;\&quot;lctl get_param mdt.\$(lctl dl | awk &#x27;\&quot;&#x27;\&quot;&#x27;\$0~/mdt /&#123;print \$4&#125;&#x27;\&quot;&#x27;\&quot;&#x27; | cut -d &#x27;\&quot;&#x27;\&quot;&#x27;-&#x27;\&quot;&#x27;\&quot;&#x27; -f1)-MDT0000.root_squash;lctl get_param mdt.\$(lctl dl | awk &#x27;\&quot;&#x27;\&quot;&#x27;\$0~/mdt /&#123;print \$4&#125;&#x27;\&quot;&#x27;\&quot;&#x27; | cut -d &#x27;\&quot;&#x27;\&quot;&#x27;-&#x27;\&quot;&#x27;\&quot;&#x27; -f1)-MDT0000.nosquash_nids  \&quot;&#x27; &quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;[[ ! $? -eq 0 ]] &amp;&amp; echo &#x27;</span><span class="variable">$line</span><span class="string">&#x27; &gt;&gt; /tmp/failed.log&#x27;</span></span><br></pre></td></tr></table></figure>

<h3 id="bash-replace-expect-script"><a href="#bash-replace-expect-script" class="headerlink" title="bash replace expect script"></a>bash replace expect script</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;connect\nshow ld\nexit\n&quot;</span> | ./runCLI.sh</span><br></pre></td></tr></table></figure>

<h3 id="multiple-background-process-in-bash-and-got-the-return-code-1"><a href="#multiple-background-process-in-bash-and-got-the-return-code-1" class="headerlink" title="multiple background process in bash and got the return code"></a>multiple background process in bash and got the return code</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">declare</span> -A array</span><br><span class="line">(start=$(<span class="built_in">date</span> +%s) &amp;&amp; $(<span class="built_in">sleep</span> $(<span class="built_in">shuf</span> -i 5-15 -n 1)) &amp;&amp; <span class="built_in">echo</span> $(($(date +%s)-start)) &gt; time.log) &amp;</span><br><span class="line">pid=$!</span><br><span class="line">array[<span class="variable">$pid</span>]=0</span><br><span class="line">(start=$(<span class="built_in">date</span> +%s) &amp;&amp; $(<span class="built_in">sleep</span> $(<span class="built_in">shuf</span> -i 5-15 -n 1)) &amp;&amp; <span class="built_in">echo</span> $(($(date +%s)-start)) &gt; time.log) &amp;</span><br><span class="line">pid=$!</span><br><span class="line">array[<span class="variable">$pid</span>]=0</span><br><span class="line">(start=$(<span class="built_in">date</span> +%s) &amp;&amp; $(<span class="built_in">sleep</span> $(<span class="built_in">shuf</span> -i 5-15 -n 1)) &amp;&amp; <span class="built_in">echo</span> $(($(date +%s)-start)) &gt; time.log) &amp;</span><br><span class="line">pid=$!</span><br><span class="line">array[<span class="variable">$pid</span>]=0</span><br><span class="line">(start=$(<span class="built_in">date</span> +%s) &amp;&amp; $(<span class="built_in">sleep</span> $(<span class="built_in">shuf</span> -i 5-15 -n 1)) &amp;&amp; <span class="built_in">echo</span> $(($(date +%s)-start)) &gt; time.log) &amp;</span><br><span class="line">pid=$!</span><br><span class="line">array[<span class="variable">$pid</span>]=0</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="string">&quot;<span class="variable">$&#123;!array[@]&#125;</span>&quot;</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">  <span class="built_in">wait</span> <span class="variable">$i</span></span><br><span class="line">  <span class="keyword">if</span> [[ ! $? -eq 0 ]]</span><br><span class="line">  <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;the pid: &quot;</span><span class="variable">$pid</span><span class="string">&quot; show the error, exit&quot;</span></span><br><span class="line">    <span class="built_in">exit</span> 2</span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;the pid: &quot;</span><span class="variable">$pid</span><span class="string">&quot; no error&quot;</span></span><br><span class="line">  <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<h3 id="bash-background-array-variable"><a href="#bash-background-array-variable" class="headerlink" title="bash background array variable"></a><a target="_blank" rel="noopener" href="https://www.cnblogs.com/azureology/p/13302155.html">bash background array variable</a></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">test_func</span></span>() &#123;</span><br><span class="line">test_path=<span class="string">&quot;<span class="variable">$1</span>&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> test_name <span class="keyword">in</span> $(your_cmd)</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">&#123;</span><br><span class="line">   some cmd <span class="string">&quot;<span class="variable">$test_path</span> <span class="variable">$test_name</span> to output&quot;</span></span><br><span class="line">&#125; &amp;</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"><span class="built_in">wait</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">## the whole function output to standrard output</span></span><br><span class="line">test_func <span class="string">&quot;<span class="variable">$1</span>&quot;</span> &gt; /tmp/test_output</span><br></pre></td></tr></table></figure>

<h3 id="ssh-remote-exec-command"><a href="#ssh-remote-exec-command" class="headerlink" title="ssh remote exec command"></a>ssh remote exec command</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#sometimes ssh remote exec command not work</span><br><span class="line">ssh -n name@host  &#x27;your command&#x27;</span><br><span class="line"></span><br><span class="line">#-t  Force pseudo-terminal allocation.  This can be used to execute arbitrary screen-based programs on a remote machine, which can be very useful, e.g. when implementing menu services.  Multiple -t options force tty allocation, even if ssh has no local tty.</span><br></pre></td></tr></table></figure>

<p>There are a big issue cause I can ‘t parallel exec ssh in bash script, randomly connection closed.<br>I try setting sshd_config</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> /etc/ssh/sshd_config | grep max -i</span><br><span class="line">MaxSessions 512</span><br><span class="line">ClientAliveCountMax 512</span><br><span class="line">MaxStartups 500:1:500</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -n -t -o TCPKeepAlive=yes -o ServerAliveInterval=30 -o GSSAPIAuthentication=no -o ControlPersist=600 $line &#x27;$your command&#x27;</span><br></pre></td></tr></table></figure>
<p>There is no any help</p>
<p>Fine, I use screen background the command avoid this issue, mpich has the same issue.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> <span class="built_in">read</span> line</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">ssh -n -t -o TCPKeepAlive=<span class="built_in">yes</span> -o GSSAPIAuthentication=no <span class="variable">$line</span> <span class="string">&#x27;screen -dmS fio-read &quot;/root/run-fio-read.sh&quot;&#x27;</span></span><br><span class="line"><span class="keyword">done</span> &lt; test_hosts</span><br></pre></td></tr></table></figure>

<h4 id="single-command-jump-2-nodes"><a href="#single-command-jump-2-nodes" class="headerlink" title="single command jump 2 nodes"></a>single command jump 2 nodes</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ssh -t user1@<span class="variable">$server1</span> -o GSSAPIAuthentication=no <span class="string">&#x27;sudo scp tmp.sh root@$server_ip:&#x27;</span></span><br><span class="line">ssh -t user1@<span class="variable">$server1</span> -o GSSAPIAuthentication=no <span class="string">&#x27;sudo ssh -n root@$server2_ip sh ./tmp.sh&#x27;</span></span><br></pre></td></tr></table></figure>


<h3 id="remove-name-begin-with-“-“-1"><a href="#remove-name-begin-with-“-“-1" class="headerlink" title="remove name begin with “-“"></a><a target="_blank" rel="noopener" href="https://unix.stackexchange.com/questions/1519/how-do-i-delete-a-file-whose-name-begins-with-hyphen-a-k-a-dash-or-minus">remove name begin with “-“</a></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">rm</span> -- --<span class="built_in">help</span></span><br><span class="line"><span class="built_in">rm</span> ./--help</span><br></pre></td></tr></table></figure>

<h3 id="IFS-1"><a href="#IFS-1" class="headerlink" title="IFS"></a>IFS</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># default value, &lt;space&gt;&lt;tab&gt;&lt;newline&gt;</span></span><br><span class="line">$ IFS=$<span class="string">&#x27; \t\n&#x27;</span></span><br><span class="line"></span><br><span class="line">or</span><br><span class="line"></span><br><span class="line">$ IFS=<span class="string">&#x27;input from keyboard space,tab,newline&#x27;</span></span><br><span class="line"><span class="comment"># read IFS</span></span><br><span class="line">$ <span class="built_in">cat</span> -etv &lt;&lt;&lt; <span class="variable">$IFS</span></span><br><span class="line"> ^I$</span><br><span class="line">$</span><br><span class="line"></span><br><span class="line">$ IFS=$(<span class="built_in">echo</span> <span class="string">&quot; \n\t&quot;</span>); <span class="built_in">printf</span> <span class="string">&quot;%s&quot;</span> <span class="string">&quot;<span class="variable">$IFS</span>&quot;</span>|xxd</span><br><span class="line">00000000: 205c 6e5c 74</span><br><span class="line"></span><br><span class="line"><span class="comment"># backup the value</span></span><br><span class="line">OLDIFS=<span class="variable">$IFS</span> </span><br></pre></td></tr></table></figure>

<h3 id="GAWK"><a href="#GAWK" class="headerlink" title="GAWK"></a>GAWK</h3><h4 id="Issues"><a href="#Issues" class="headerlink" title="Issues"></a>Issues</h4><p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/40049546/fix-mismatch-between-data-and-local-in-awk-command">awk: cmd. line:1: (FILENAME&#x3D;- FNR&#x3D;798) warning: Invalid multibyte data detected. There may be a mismatch between your data and your locale.</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">LC_ALL=C</span><br><span class="line"></span><br><span class="line">--characters-as-bytes</span><br><span class="line">The --posix option overrides this one.</span><br><span class="line">awk -b</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://lists.gnu.org/archive/html/bug-gawk/2020-07/msg00005.html">double free error in gawk in the awk 4.2</a></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">diff --git a/field.c b/field.c</span><br><span class="line">index <span class="number">0e84447</span>a.<span class="number">.4740356</span>f <span class="number">100644</span></span><br><span class="line">--- a/field.c</span><br><span class="line">+++ b/field.c</span><br><span class="line">@@ <span class="number">-230</span>,<span class="number">6</span> +<span class="number">230</span>,<span class="number">7</span> @@ rebuild_record()</span><br><span class="line">                        &#125;</span><br><span class="line"> </span><br><span class="line">                        n-&gt;stptr = cops;</span><br><span class="line">+                       n-&gt;flags &amp;= ~(MPFN|MPZN);</span><br><span class="line">                        unref(r);</span><br><span class="line">                        fields_arr[i] = n;</span><br><span class="line">                        assert((n-&gt;flags &amp; WSTRCUR) == <span class="number">0</span>);</span><br></pre></td></tr></table></figure>

<h4 id="to-binary-num"><a href="#to-binary-num" class="headerlink" title="to binary num"></a>to binary num</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">awk <span class="string">&#x27;</span></span><br><span class="line"><span class="string">function d2b(d,  b) &#123;</span></span><br><span class="line"><span class="string">      while(d) &#123;</span></span><br><span class="line"><span class="string">          b=d%2b</span></span><br><span class="line"><span class="string">          d=int(d/2)</span></span><br><span class="line"><span class="string">      &#125;</span></span><br><span class="line"><span class="string">      return(b)</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">BEGIN&#123;</span></span><br><span class="line"><span class="string">    print d2b(65535)</span></span><br><span class="line"><span class="string">&#125;&#x27;</span></span><br><span class="line">1111111111111111</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="Matrix-sum"><a href="#Matrix-sum" class="headerlink" title="Matrix sum"></a><a target="_blank" rel="noopener" href="https://www.unix.com/302747657-post2.html">Matrix sum</a></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cat</span> myScript</span><br><span class="line">awk <span class="string">&#x27;&#123; </span></span><br><span class="line"><span class="string">  TR=0</span></span><br><span class="line"><span class="string">  for( I = 1; I &lt;= NF; I++ ) &#123;</span></span><br><span class="line"><span class="string">    TR += $I</span></span><br><span class="line"><span class="string">    TC[I] += $I</span></span><br><span class="line"><span class="string">    printf( &quot;%6d&quot;, $I )</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">  print &quot;  = &quot; TR</span></span><br><span class="line"><span class="string">  TF = NF</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">END &#123;</span></span><br><span class="line"><span class="string">  for( I = 1; I &lt;= TF; I++ )</span></span><br><span class="line"><span class="string">    printf &quot;%6d&quot;, TC[I]</span></span><br><span class="line"><span class="string">  print &quot;&quot;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">&#x27;</span> file</span><br><span class="line"></span><br><span class="line">$ <span class="built_in">cat</span> file</span><br><span class="line">10 11 12 13 14 15 16 17 18 19</span><br><span class="line">20 21 22 23 24 25 26 27 28 29</span><br><span class="line">40 31 32 33 34 35 36 37 38 39</span><br><span class="line">70 41 42 43 44 45 46 47 48 49</span><br><span class="line">50 51 52 53 54 55 56 57 58 59</span><br><span class="line">60 61 62 63 64 65 66 67 68 69</span><br><span class="line">70 71 72 73 74 75 76 77 78 79</span><br><span class="line">20 81 82 83 84 85 86 87 88 89</span><br><span class="line">05 91 92 93 94 95 96 97 98 99</span><br><span class="line"></span><br><span class="line">$ ./myScript</span><br><span class="line">    10    11    12    13    14    15    16    17    18    19  = 145</span><br><span class="line">    20    21    22    23    24    25    26    27    28    29  = 245</span><br><span class="line">    40    31    32    33    34    35    36    37    38    39  = 355</span><br><span class="line">    70    41    42    43    44    45    46    47    48    49  = 475</span><br><span class="line">    50    51    52    53    54    55    56    57    58    59  = 545</span><br><span class="line">    60    61    62    63    64    65    66    67    68    69  = 645</span><br><span class="line">    70    71    72    73    74    75    76    77    78    79  = 745</span><br><span class="line">    20    81    82    83    84    85    86    87    88    89  = 785</span><br><span class="line">     5    91    92    93    94    95    96    97    98    99  = 860</span><br><span class="line">   345   459   468   477   486   495   504   513   522   531</span><br></pre></td></tr></table></figure>

<h4 id="append-string"><a href="#append-string" class="headerlink" title="append string"></a>append string</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">                                 ----here is string</span><br><span class="line">                                 |</span><br><span class="line"><span class="built_in">cat</span> sn.txt | awk <span class="string">&#x27;&#123;a[$NF]=($1&quot; &quot;a[$NF])&#125; END&#123;for(i in a)&#123;print i, a[i]&#125;&#125;&#x27;</span></span><br></pre></td></tr></table></figure>

<h4 id="Bit-Manipulation-Functions"><a href="#Bit-Manipulation-Functions" class="headerlink" title="Bit-Manipulation Functions"></a><a target="_blank" rel="noopener" href="https://www.gnu.org/software/gawk/manual/gawk.html#Bitwise-Functions">Bit-Manipulation Functions</a></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">and(v1, v2 [, …])</span><br><span class="line">Return the bitwise AND of the arguments. There must be at least two.</span><br><span class="line"></span><br><span class="line">$ awk <span class="string">&#x27;BEGIN&#123;print and(14,3)&#125;&#x27;</span></span><br><span class="line">2</span><br><span class="line"></span><br><span class="line">    1110</span><br><span class="line">and 0011</span><br><span class="line">=   0010</span><br><span class="line"></span><br><span class="line">$ awk <span class="string">&#x27;BEGIN&#123;print or(12,1)&#125;&#x27;</span></span><br><span class="line">13</span><br><span class="line"></span><br><span class="line">   1100 </span><br><span class="line">or 0001</span><br><span class="line">=  1101 (13)</span><br><span class="line"></span><br><span class="line">compl(val)</span><br><span class="line">Return the bitwise complement of val.</span><br><span class="line"></span><br><span class="line">lshift(val, count)</span><br><span class="line">Return the value of val, shifted left by count bits.</span><br><span class="line"></span><br><span class="line">or(v1, v2 [, …])</span><br><span class="line">Return the bitwise OR of the arguments. There must be at least two.</span><br><span class="line"></span><br><span class="line">rshift(val, count)</span><br><span class="line">Return the value of val, shifted right by count bits.</span><br><span class="line"></span><br><span class="line">xor(v1, v2 [, …])</span><br><span class="line">Return the bitwise XOR of the arguments. There must be at least two.</span><br></pre></td></tr></table></figure>

<h4 id="split-func"><a href="#split-func" class="headerlink" title="split func"></a>split func</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ time=<span class="string">&quot;1.2.3 4.5.8 12.34.56&quot;</span></span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">$time</span> | awk <span class="string">&#x27;&#123;n=split($2,a,&quot;.&quot;);print a[n]&#125;&#x27;</span></span><br><span class="line">8</span><br></pre></td></tr></table></figure>

<h4 id="max-and-min"><a href="#max-and-min" class="headerlink" title="max and min"></a>max and min</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">BEGIN &#123; min = max = <span class="string">&quot;NaN&quot;</span> &#125;</span><br><span class="line">&#123;</span><br><span class="line">    min = (NR==1 || <span class="variable">$1</span>&lt;min ? <span class="variable">$1</span> : min)</span><br><span class="line">    max = (NR==1 || <span class="variable">$1</span>&gt;max ? <span class="variable">$1</span> : max)</span><br><span class="line">&#125;</span><br><span class="line">END &#123; <span class="built_in">print</span> min, max &#125;</span><br></pre></td></tr></table></figure>
<h4 id="percent-to-int"><a href="#percent-to-int" class="headerlink" title="percent to int"></a>percent to int</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> 91% | awk <span class="string">&#x27;int($1) &gt; 90&#x27;</span></span><br></pre></td></tr></table></figure>

<h4 id="replace-square-brackets"><a href="#replace-square-brackets" class="headerlink" title="replace square brackets"></a>replace square brackets</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ echo &quot;[12:3:5:8]&quot; | awk -F: &#x27;&#123;gsub(&quot;[][]&quot;,&quot;&quot;); print $1&#125;&#x27;</span><br></pre></td></tr></table></figure>

<h4 id="match-bash-variable"><a href="#match-bash-variable" class="headerlink" title="match bash variable"></a>match bash variable</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk -v slot_var=&quot;$slot&quot; &#x27;&#123;if($0~/Slot.*&#x27;&quot;$slot_var&quot;&#x27;/)</span><br></pre></td></tr></table></figure>

<h4 id="Set-awk-env"><a href="#Set-awk-env" class="headerlink" title="Set awk env"></a>Set awk env</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> AWKBUFSIZE=$((<span class="number">1024</span>*<span class="number">1024</span>))</span><br><span class="line"><span class="comment">#you could strace</span></span><br><span class="line"><span class="built_in">read</span>(3, <span class="string">&quot;B2000712/17B2000712.TPM2.data\t34&quot;</span>..., 1048576) = 1048576</span><br></pre></td></tr></table></figure>

<h4 id="write-file-in-awk"><a href="#write-file-in-awk" class="headerlink" title="write file in awk"></a>write file in awk</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ awk <span class="string">&#x27;&#123;print $2 &gt;&quot;text.out&quot;&#125;&#x27;</span> text.txt</span><br></pre></td></tr></table></figure>

<h4 id="Sort-array-by-awk"><a href="#Sort-array-by-awk" class="headerlink" title="Sort array by awk"></a>Sort array by awk</h4><ul>
<li>“@ind_str_asc”, “@ind_str_desc” - sort the array by index; use alphabetical sorting; sort ascending or descending.</li>
<li>“@ind_num_asc”, “@ind_num_desc” - sort the array by index; use numerical sorting; sort ascending or descending.</li>
<li>“@val_str_asc”, “@val_str_desc” - sort the array by value; use alphabetical sorting; sort ascending or descending.</li>
<li>“@val_num_asc”, “@val_num_desc” - sort the array by value; use numerical sorting; sort ascending or descending.</li>
</ul>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">$</span> <span class="string">cat</span> <span class="string">file</span></span><br><span class="line"><span class="string">port</span> <span class="number">12</span></span><br><span class="line"><span class="string">zest</span> <span class="number">2</span></span><br><span class="line"><span class="string">status</span> <span class="number">4</span></span><br><span class="line"><span class="string">flash</span> <span class="number">4</span></span><br><span class="line"><span class="string">hero</span> <span class="number">3</span></span><br><span class="line"><span class="string">awk</span> <span class="number">3</span></span><br><span class="line"><span class="string">innovation</span> <span class="number">10</span></span><br><span class="line"><span class="string">test</span> <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#!/usr/bin/awk -f</span></span><br><span class="line">&#123;</span><br><span class="line">        <span class="string">a</span>[<span class="string">$1</span>]<span class="string">=$2;</span></span><br><span class="line">        <span class="string">PROCINFO</span>[<span class="string">&quot;sorted_in&quot;</span>] <span class="string">=</span> <span class="string">&quot;@ind_str_desc&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="string">END</span> &#123;</span><br><span class="line">        <span class="string">for</span> <span class="string">(i</span> <span class="string">in</span> <span class="string">a)</span> &#123;</span><br><span class="line">                <span class="string">print</span> <span class="string">i</span>, <span class="string">a</span>[<span class="string">i</span>]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="string">/tmp/awkscript</span> <span class="string">file</span></span><br><span class="line"><span class="string">zest</span> <span class="number">2</span></span><br><span class="line"><span class="string">test</span> <span class="number">1</span></span><br><span class="line"><span class="string">status</span> <span class="number">4</span></span><br><span class="line"><span class="string">port</span> <span class="number">12</span></span><br><span class="line"><span class="string">innovation</span> <span class="number">10</span></span><br><span class="line"><span class="string">hero</span> <span class="number">3</span></span><br><span class="line"><span class="string">flash</span> <span class="number">4</span></span><br><span class="line"><span class="string">awk</span> <span class="number">3</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#!/usr/bin/awk -f</span></span><br><span class="line">&#123;</span><br><span class="line">        <span class="string">a</span>[<span class="string">$1</span>]<span class="string">=$2</span></span><br><span class="line">        <span class="string">PROCINFO</span>[<span class="string">&quot;sorted_in&quot;</span>] <span class="string">=</span> <span class="string">&quot;@val_num_asc&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="string">END</span> &#123;</span><br><span class="line">        <span class="string">for</span> <span class="string">(i</span> <span class="string">in</span> <span class="string">a)</span> &#123;</span><br><span class="line">                <span class="string">print</span> <span class="string">i</span>, <span class="string">a</span>[<span class="string">i</span>]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="string">/tmp/awkscript</span> <span class="string">file</span></span><br><span class="line"><span class="string">test</span> <span class="number">1</span></span><br><span class="line"><span class="string">zest</span> <span class="number">2</span></span><br><span class="line"><span class="string">hero</span> <span class="number">3</span></span><br><span class="line"><span class="string">awk</span> <span class="number">3</span></span><br><span class="line"><span class="string">flash</span> <span class="number">4</span></span><br><span class="line"><span class="string">status</span> <span class="number">4</span></span><br><span class="line"><span class="string">innovation</span> <span class="number">10</span></span><br><span class="line"><span class="string">port</span> <span class="number">12</span></span><br></pre></td></tr></table></figure>

<h4 id="Found-2-files-diff"><a href="#Found-2-files-diff" class="headerlink" title="Found 2 files diff"></a>Found 2 files diff</h4><p>Because grep -wvf need too many memory</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk <span class="string">&#x27;NR==FNR&#123;a[$0]=$0&#125;; NR&gt;FNR&#123;b[$0]=$0&#125; END&#123;for (i in a) &#123;if(a[i]!=b[i]) &#123;print i&#125;&#125;&#125;&#x27;</span>  file1 file2</span><br></pre></td></tr></table></figure>

<h4 id="match-ip-addr"><a href="#match-ip-addr" class="headerlink" title="match ip addr"></a>match ip addr</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$0</span>~/[0-9]&#123;1,3&#125;.[0-9]&#123;1,3&#125;.[0-9]&#123;1,3&#125;.[0-9]&#123;1,3&#125;/</span><br></pre></td></tr></table></figure>

<h4 id="print-the-last-char"><a href="#print-the-last-char" class="headerlink" title="print the last char"></a><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/5536018/how-to-print-matched-regex-pattern-using-awk">print the last char</a></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">match(string, regexp [, array]) If array is present, it is cleared, and <span class="keyword">then</span> the zeroth element of array is <span class="built_in">set</span> to the entire portion of string matched by regexp. If regexp contains parentheses, the integer-indexed elements of array are <span class="built_in">set</span> to contain the portion of string matching the corresponding parenthesized subexpression.</span><br><span class="line"></span><br><span class="line">  pool: tank</span><br><span class="line"> state: ONLINE</span><br><span class="line">status: One or more devices has experienced an unrecoverable error.  An</span><br><span class="line">        attempt was made to correct the error.  Applications are unaffected.</span><br><span class="line">action: Determine <span class="keyword">if</span> the device needs to be replaced, and clear the errors</span><br><span class="line">        using <span class="string">&#x27;zpool clear&#x27;</span> or replace the device with <span class="string">&#x27;zpool replace&#x27;</span>.</span><br><span class="line">   see: http://zfsonlinux.org/msg/ZFS-8000-9P</span><br><span class="line">  scan: scrub repaired 234M <span class="keyword">in</span> 26h55m with 0 errors on Mon Dec  5 15:58:37 2022</span><br><span class="line">config:</span><br><span class="line"></span><br><span class="line">        NAME                        STATE     READ WRITE CKSUM</span><br><span class="line">        tank                      ONLINE       0     0     0</span><br><span class="line">          raidz3-0                  ONLINE       0     0     0</span><br><span class="line">            scsi-35000cca2a60591fc  ONLINE       0     0     1.53</span><br><span class="line">            scsi-35000cca2a60a0170  ONLINE       0     20K   1.38</span><br><span class="line">            scsi-35000cca2a60d3f1c  ONLINE       0     0     1.50T</span><br><span class="line">            scsi-35000cca2a604b084  ONLINE       0     0     1.53</span><br><span class="line">            scsi-35000cca2a60d7634  ONLINE       0     0     1.38T</span><br><span class="line">            scsi-35000cca2a60934ec  ONLINE       0     35K   1.46</span><br><span class="line">            scsi-35000cca2a6064cf0  ONLINE       0     0     1.47K</span><br><span class="line">            scsi-35000cca2a603bc0c  ONLINE      100M     0   1.33</span><br><span class="line">            scsi-35000cca2a60c9278  ONLINE       0     0     1.40</span><br><span class="line">            scsi-35000cca2a6079b4c  ONLINE       0     0 1.39</span><br><span class="line">            scsi-35000cca2a6097008  ONLINE       0     0 1.39</span><br><span class="line"></span><br><span class="line">zpool status | awk <span class="string">&#x27;NF==5 &amp;&amp; $0~/[0-9]/ &#123;</span></span><br><span class="line"><span class="string">       sum=sum+$3+$4+$5; </span></span><br><span class="line"><span class="string">       if(match($3,/[K,M,G,T,P]$/,m) || match($4,/[K,M,G,T,P]$/,m) || match($5,/[K,M,G,T,P]$/,m)) &#123;</span></span><br><span class="line"><span class="string">          if(m[0]!=0 &amp;&amp; m[0]+0==0) &#123;check_sum=check_sum&quot;&quot;m[0]; print check_sum&#125;</span></span><br><span class="line"><span class="string">       &#125;</span></span><br><span class="line"><span class="string">    &#125; END&#123;if(check_sum~/[K,M,G,T,P]/) &#123;print sum&quot;&quot;check_sum&quot; RW-CKSUM err;&quot;&#125; else &#123;print sum&#125;&#125;&#x27;</span></span><br><span class="line">K</span><br><span class="line">KT</span><br><span class="line">KTT</span><br><span class="line">KTTK</span><br><span class="line">KTTKK</span><br><span class="line">KTTKKM</span><br><span class="line">176.47KTTKKM RW-CKSUM err;</span><br></pre></td></tr></table></figure>

<h4 id="awk-print-terminal-bell"><a href="#awk-print-terminal-bell" class="headerlink" title="awk print terminal bell"></a>awk print terminal bell</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ awk <span class="string">&#x27;BEGIN &#123;print &quot;\a&quot; # Ring the bell&#125;&#x27;</span></span><br></pre></td></tr></table></figure>
<h4 id="awk-single-quote"><a href="#awk-single-quote" class="headerlink" title="awk single quote"></a>awk single quote</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ awk <span class="string">&#x27;BEGIN&#123;print &quot;\047&quot;&#125;&#x27;</span></span><br><span class="line"><span class="string">&#x27;</span></span><br></pre></td></tr></table></figure>

<h4 id="awk-percent"><a href="#awk-percent" class="headerlink" title="awk percent"></a>awk percent</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">                          ---it <span class="string">&#x27;s the percent sign</span></span><br><span class="line"><span class="string">                          |</span></span><br><span class="line"><span class="string">$awk &#x27;</span>BEGIN&#123;<span class="built_in">printf</span> <span class="string">&quot;%.2f %%\n&quot;</span>,0.2223&#125;<span class="string">&#x27;</span></span><br><span class="line"><span class="string">0.22 %</span></span><br></pre></td></tr></table></figure>

<h4 id="IGONE-CASE"><a href="#IGONE-CASE" class="headerlink" title="IGONE CASE"></a>IGONE CASE</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ awk <span class="string">&#x27;BEGIN&#123;IGNORECASE=1&#125; /q/&#x27;</span> test.txt</span><br></pre></td></tr></table></figure>

<h4 id="field-delimiter-“-”"><a href="#field-delimiter-“-”" class="headerlink" title="field delimiter &#x3D; “|”"></a><a target="_blank" rel="noopener" href="https://unix.stackexchange.com/questions/391826/awk-wont-use-as-a-field-delimiter">field delimiter &#x3D; “|”</a></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> <span class="string">&quot;f1||f2&quot;</span> |awk -F<span class="string">&#x27;\\|\\|&#x27;</span> <span class="string">&#x27;&#123;print $1&#125;&#x27;</span></span><br><span class="line">f1</span><br></pre></td></tr></table></figure>

<h4 id="only-match-number-in-a-string"><a href="#only-match-number-in-a-string" class="headerlink" title="only match number in a string"></a>only match number in a string</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ awk <span class="string">&#x27;&#123;gsub(&quot;[^[:digit:]]+&quot;,&quot; &quot;);print $0&#125;&#x27;</span> testfile</span><br><span class="line">30 3</span><br><span class="line">22 1</span><br></pre></td></tr></table></figure>
<h4 id="logarithm-in-awk"><a href="#logarithm-in-awk" class="headerlink" title="logarithm in awk"></a>logarithm in awk</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$  awk <span class="string">&#x27;BEGIN&#123;print log(81)/log(3)&#125;&#x27;</span>  <span class="comment"># 3^4=81</span></span><br><span class="line">4</span><br><span class="line"></span><br><span class="line">$ awk <span class="string">&#x27;BEGIN&#123;print log(1024)/log(2)&#125;&#x27;</span> <span class="comment"># 2^10=1024</span></span><br><span class="line">10</span><br><span class="line"></span><br><span class="line">$ awk <span class="string">&#x27;BEGIN&#123;print log(8)/log(2)&#125;&#x27;</span>  <span class="comment"># 2^3=8</span></span><br><span class="line">3</span><br></pre></td></tr></table></figure>

<h4 id="sort-and-uniq"><a href="#sort-and-uniq" class="headerlink" title="sort and uniq"></a>sort and uniq</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sort</span> | <span class="built_in">uniq</span> == awk <span class="string">&#x27;!x[$0]++ test.txt</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#sort field separator</span></span><br><span class="line"><span class="string">sort -n -t &#x27;</span>:<span class="string">&#x27; -k3 /etc/passwd</span></span><br></pre></td></tr></table></figure>

<h4 id="reformat-print-output-by-OFMT"><a href="#reformat-print-output-by-OFMT" class="headerlink" title="reformat print output by OFMT"></a><a target="_blank" rel="noopener" href="https://www.unix.com/shell-programming-and-scripting/265638-help-round-up-2-decimal-point-specific-column.html">reformat print output by OFMT</a></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ awk <span class="string">&#x27;&#123;print $1, $2+0&#125;&#x27;</span> OFMT=<span class="string">&quot;%.2f&quot;</span> file</span><br></pre></td></tr></table></figure>

<h4 id="match-matching-left-bracket"><a href="#match-matching-left-bracket" class="headerlink" title="match matching left bracket"></a>match matching left bracket</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">         --- $1~/^\[/ the left bracket in the begining -------the right bracket is OK, just &quot;]&quot;</span><br><span class="line">         |                                             |</span><br><span class="line">if($1~/^\[/) &#123;orgi_v1=$1;sub(&quot;\\[[0-9],&quot;,&quot;&quot;,$1); sub(&quot;]&quot;,&quot;&quot;,$1);printf &quot;%s %s %s %s &quot;,$0&#125;</span><br><span class="line">                                |</span><br><span class="line">                                ---if in the quote, the matchiing will be &quot;\\[&quot;, the &quot;[0-9]&quot; is the regexp</span><br><span class="line"></span><br><span class="line">$ cat test.log</span><br><span class="line">[0,51]  Element type: Array device slot</span><br><span class="line">[0,52]  Element type: Array device slot</span><br></pre></td></tr></table></figure>

<h4 id="single-character-fields"><a href="#single-character-fields" class="headerlink" title="single character fields"></a><a target="_blank" rel="noopener" href="https://www.gnu.org/software/gawk/manual/html_node/Single-Character-Fields.html">single character fields</a></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> a b | gawk <span class="string">&#x27;BEGIN &#123; FS = &quot;&quot; &#125;</span></span><br><span class="line"><span class="string">&gt;                  &#123;</span></span><br><span class="line"><span class="string">&gt;                      for (i = 1; i &lt;= NF; i = i + 1)</span></span><br><span class="line"><span class="string">&gt;                          print &quot;Field&quot;, i, &quot;is&quot;, $i</span></span><br><span class="line"><span class="string">&gt;                  &#125;&#x27;</span></span><br></pre></td></tr></table></figure>

<h4 id="filter"><a href="#filter" class="headerlink" title="filter"></a>filter</h4><p>If you want use ‘[‘ and ‘]’ become the separator</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk -F <span class="string">&#x27;[][ :]+&#x27;</span></span><br></pre></td></tr></table></figure>
<h4 id="awk-match-bash-variable"><a href="#awk-match-bash-variable" class="headerlink" title="awk match bash variable"></a><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/39384283/how-to-match-a-pattern-given-in-a-variable-in-awk">awk match bash variable</a></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk -v pat=<span class="string">&quot;<span class="variable">$pattern</span>&quot;</span> -F <span class="string">&quot;:&quot;</span> <span class="string">&#x27;$0~pat&#123;print $1, $2, $3, $4 &#125;&#x27;</span> file</span><br></pre></td></tr></table></figure>

<h4 id="awk-sort-key-and-value"><a href="#awk-sort-key-and-value" class="headerlink" title="awk sort key and value"></a><a target="_blank" rel="noopener" href="https://www.gnu.org/software/gawk/manual/html_node/Controlling-Scanning.html">awk sort key and value</a></h4><p>out of order the line</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">sort</span> -R file_name</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">PROCINFO[<span class="string">&quot;sorted_in&quot;</span>] = <span class="string">&quot;@val_num_desc&quot;</span></span><br><span class="line"><span class="keyword">for</span> (i <span class="keyword">in</span> a) <span class="built_in">print</span> i, a[i]</span><br></pre></td></tr></table></figure>

<h4 id="match-and"><a href="#match-and" class="headerlink" title="match &lt; and &#x2F;"></a>match &lt; and &#x2F;</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">awk absolute match $0~/ \/ /   </span><br><span class="line">sed absolute match sed -i &quot;/\&lt;$&#123;i&#125;\&gt;/d&quot;    </span><br></pre></td></tr></table></figure>

<h4 id="convert-to-int"><a href="#convert-to-int" class="headerlink" title="convert to int"></a>convert to int</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a[int(<span class="variable">$NF</span>/1000)]++</span><br></pre></td></tr></table></figure>

<h4 id="remove-new-line-characters-from-the-middle-of-a-field"><a href="#remove-new-line-characters-from-the-middle-of-a-field" class="headerlink" title="remove new line characters from the middle of a field"></a><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/5899555/using-sed-to-remove-new-line-characters-from-the-middle-of-a-field">remove new line characters from the middle of a field</a></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cat</span> temp</span><br><span class="line">a,b,c,d</span><br><span class="line">a,b1</span><br><span class="line">b2,c,d</span><br><span class="line">A,B,C,D</span><br><span class="line"></span><br><span class="line">$ <span class="built_in">cat</span> temp | sed -r <span class="string">&#x27;:a;N;$!ba;s/((^|\n)([^,]+,)&#123;0,2&#125;[^,]+)\n/\1/g&#x27;</span></span><br><span class="line">a,b,c,d</span><br><span class="line">a,b1b2,c,d</span><br><span class="line">A,B,C,D</span><br><span class="line">                            ------------the awk variable</span><br><span class="line">                            |</span><br><span class="line">$ awk -F, <span class="string">&#x27;NF &lt; 4 &#123;getline a1; $0 = $0 a1&#125; 1&#x27;</span> temp</span><br><span class="line">a,b,c,d</span><br><span class="line">a,b1b2,c,d</span><br><span class="line">A,B,C,D</span><br><span class="line"></span><br><span class="line">Explanation:</span><br><span class="line">(^|\n) matches the beginning of the line (resp. a line <span class="built_in">break</span>)</span><br><span class="line">[^,]+, means: at least one (+ means one ore more) character!=<span class="string">&quot;,&quot;</span> followed by a <span class="string">&quot;,&quot;</span></span><br><span class="line">([^,]+,)&#123;0,2&#125; matches <span class="keyword">if</span> there are 0-2 columns delimited with a <span class="string">&quot;,&quot;</span></span><br><span class="line">The [^,]+ means that there are some (at least one) character!=<span class="string">&quot;,&quot;</span> following the 0-2 columns.</span><br><span class="line">The trailing \n matches a line <span class="built_in">break</span></span><br><span class="line">Summarized the s <span class="built_in">command</span> will match all lines containing 0-3 columns with a line <span class="built_in">break</span> at the end and will substitute it with itself (\1) excluding the trailing line <span class="built_in">break</span>.</span><br></pre></td></tr></table></figure>

<h4 id="awk-statement-“next”-bash-continue"><a href="#awk-statement-“next”-bash-continue" class="headerlink" title="awk statement “next” &#x3D; bash continue"></a>awk statement “next” &#x3D; bash continue</h4><h3 id="Termination-Signals-https-www-gnu-org-software-libc-manual-html-node-Termination-Signals-html"><a href="#Termination-Signals-https-www-gnu-org-software-libc-manual-html-node-Termination-Signals-html" class="headerlink" title="[Termination Signals] (https://www.gnu.org/software/libc/manual/html_node/Termination-Signals.html)"></a>[Termination Signals] (<a target="_blank" rel="noopener" href="https://www.gnu.org/software/libc/manual/html_node/Termination-Signals.html">https://www.gnu.org/software/libc/manual/html_node/Termination-Signals.html</a>)</h3><h4 id="trap-TRAP"><a href="#trap-TRAP" class="headerlink" title="trap TRAP"></a>trap TRAP</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">* 1 SIGHUP The SIGHUP (<span class="string">&quot;hang-up&quot;</span>) signal is used to report that the user<span class="string">&#x27;s terminal is disconnected, perhaps because a network or telephone connection was broken.</span></span><br><span class="line"><span class="string">* 2 SIGINT The SIGINT (program interrupt) signal is sent when the user types the INTR character (normally C-c).</span></span><br><span class="line"><span class="string">* 3 The SIGQUIT signal is similar to SIGINT, except that it&#x27;</span>s controlled by a different key-the QUIT character, usually C-\-and produces a core dump when it terminates the process, just like a program error signal. You can think of this as a program error condition <span class="string">&quot;detected&quot;</span> by the user</span><br><span class="line">* 9 The SIGKILL signal is used to cause immediate program termination. It cannot be handled or ignored, and is therefore always fatal. It is also not possible to block this signal</span><br><span class="line">* 15 The SIGTERM signal is a generic signal used to cause program termination. Unlike SIGKILL, this signal can be blocked, handled, and ignored. It is the normal way to politely ask a program to terminate.</span><br><span class="line"></span><br><span class="line"><span class="built_in">trap</span> ctrl_c INT</span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">ctrl_c</span></span>() &#123;</span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;Ctrl + C happened&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"><span class="function"><span class="title">mytrap</span></span> () &#123;</span><br><span class="line">  <span class="built_in">echo</span> hahahahaha</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">trap</span> mytrap SIGHUP INT SIGINT SIGQUIT SIGTERM ERR EXIT</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">myfunc</span></span> () &#123;</span><br><span class="line"> <span class="built_in">trap</span>  mytrap RETURN</span><br><span class="line"> <span class="comment">#trap  mytrap EXIT #no output</span></span><br><span class="line"> <span class="built_in">echo</span> <span class="string">&quot;I&#x27;ve got a bad feeling about this...&quot;</span></span><br><span class="line">&#125;</span><br><span class="line">myfunc | <span class="built_in">cat</span></span><br><span class="line"><span class="built_in">sleep</span> 10</span><br><span class="line"></span><br><span class="line"><span class="comment">###############################</span></span><br><span class="line">Number  SIG     Meaning</span><br><span class="line">0       0       On <span class="built_in">exit</span> from shell</span><br><span class="line">1       SIGHUP  Clean tidyup</span><br><span class="line">2       SIGINT  Interrupt</span><br><span class="line">3       SIGQUIT Quit</span><br><span class="line">6       SIGABRT Abort</span><br><span class="line">9       SIGKILL Die Now (cannot be trapped)</span><br><span class="line">14      SIGALRM Alarm Clock</span><br><span class="line">15      SIGTERM Terminate</span><br></pre></td></tr></table></figure>

<h4 id="sub-shell-error-handler"><a href="#sub-shell-error-handler" class="headerlink" title="sub shell error handler"></a><a target="_blank" rel="noopener" href="https://unix.stackexchange.com/questions/48533/exit-shell-script-from-a-subshell">sub shell error handler</a></h4><p>set -E in combination with ERR traps is a bit like an improved version of set -e in that it allows you to define your own error handling  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span> -E</span><br><span class="line"><span class="built_in">trap</span> <span class="string">&#x27;[ &quot;$?&quot; -ne 33 ] || exit 33&#x27;</span> ERR</span><br><span class="line">lfs getstripe <span class="variable">$namespace</span> &gt; /dev/null 2&gt;&amp;1 || (<span class="built_in">echo</span> <span class="string">&quot;Not found lustre filesystem&quot;</span> &amp;&amp; <span class="built_in">exit</span> 33)</span><br><span class="line"><span class="built_in">echo</span> xxxx  &lt;----<span class="keyword">if</span> <span class="built_in">exit</span> 33, not be output</span><br><span class="line"><span class="built_in">set</span> +E</span><br><span class="line"></span><br><span class="line"><span class="comment">#if no lfs command, output: Not found lustre filesystem, after the script exit, echo $? = 33</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">set</span> -E</span><br><span class="line"><span class="built_in">trap</span> <span class="string">&#x27;[ &quot;$?&quot; -ne 33 ] || exit 33&#x27;</span> ERR</span><br><span class="line"><span class="keyword">for</span> ((i=<span class="number">0</span>;i&lt;=<span class="number">9</span>;i++)); <span class="keyword">do</span> <span class="built_in">echo</span> ----<span class="variable">$i</span> ; <span class="keyword">if</span> [[ <span class="variable">$i</span> -eq 3 ]]; <span class="keyword">then</span> lll || (<span class="built_in">echo</span> <span class="string">&quot;show error&quot;</span> &amp;&amp; <span class="built_in">exit</span> 33); <span class="keyword">else</span> <span class="built_in">echo</span> -----------<span class="variable">$i</span>---------------; <span class="keyword">fi</span> ; <span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<h3 id="Random-RANDOM-random"><a href="#Random-RANDOM-random" class="headerlink" title="Random RANDOM random"></a>Random RANDOM random</h3><h4 id="number"><a href="#number" class="headerlink" title="number"></a><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/2556190/random-number-from-a-range-in-a-bash-script">number</a></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># from 2000~65000</span></span><br><span class="line">$ <span class="built_in">shuf</span> -i 2000-65000 -n 1</span><br><span class="line">$ <span class="built_in">echo</span> $(<span class="built_in">shuf</span> -i 13100000-13199999 -n 1) $(<span class="built_in">shuf</span> -i 13100000-13199999 -n 1) $(<span class="built_in">shuf</span> -i 1-2 -n 1)</span><br><span class="line">$ <span class="built_in">shuf</span> -i 1-2 -n 1</span><br></pre></td></tr></table></figure>

<h3 id="tr-get-scsi-serial-number-by-bash"><a href="#tr-get-scsi-serial-number-by-bash" class="headerlink" title="tr get scsi serial number by bash"></a>tr get scsi serial number by bash</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ strings /sys/block/sda/device/vpd_pg80 | <span class="built_in">tr</span> -d <span class="string">&#x27;\040\011\012\015&#x27;</span></span><br></pre></td></tr></table></figure>
<h4 id="print-last-colume"><a href="#print-last-colume" class="headerlink" title="print last colume"></a>print last colume</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> <span class="string">&quot;Your string here&quot;</span>| <span class="built_in">tr</span> <span class="string">&#x27; &#x27;</span> <span class="string">&#x27;\n&#x27;</span> | <span class="built_in">tail</span> -n1</span><br></pre></td></tr></table></figure>

<h3 id="Get-parent-id-info"><a href="#Get-parent-id-info" class="headerlink" title="Get parent id info"></a>Get parent id info</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ pstree -sg 25153</span><br><span class="line">systemd(1)───qemu-kvm(25147)─┬─&#123;qemu-kvm&#125;(25147)</span><br><span class="line">                             ├─&#123;qemu-kvm&#125;(25147)</span><br><span class="line">                             ├─&#123;qemu-kvm&#125;(25147)</span><br><span class="line">                             ├─&#123;qemu-kvm&#125;(25147)</span><br><span class="line">                             ├─&#123;qemu-kvm&#125;(25147)</span><br><span class="line">                             └─&#123;qemu-kvm&#125;(25147)</span><br></pre></td></tr></table></figure>

<h3 id="change-ssh-cipher-with-rsync"><a href="#change-ssh-cipher-with-rsync" class="headerlink" title="change ssh cipher with rsync"></a>change ssh cipher with rsync</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## -c arcfour could show support cipher</span></span><br><span class="line">$ rsync -aHAXvP -e <span class="string">&quot;ssh -T -c chacha20-poly1305@openssh.com -o Compression=no -x&quot;</span> <span class="built_in">source</span>:/xxxx <span class="variable">$ipaddr</span>:/xxx</span><br></pre></td></tr></table></figure>

<h3 id="Create-sparse-file"><a href="#Create-sparse-file" class="headerlink" title="Create sparse file"></a>Create sparse file</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ fallocate -l 5G -o 5G bar</span><br><span class="line">$ <span class="built_in">ls</span> -lhs bar</span><br><span class="line">5.0G -rw-r--r-- 1 root root 10G Aug 23 08:58 bar</span><br><span class="line"></span><br><span class="line">$ <span class="built_in">truncate</span> -s 512M bar</span><br><span class="line">0 -rw-rw-r-- 1 root root 512M 10月  4 22:07 bar</span><br></pre></td></tr></table></figure>

<h3 id="Num-convert"><a href="#Num-convert" class="headerlink" title="Num convert"></a>Num convert</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#calculate hex </span></span><br><span class="line">$ <span class="built_in">printf</span> <span class="string">&quot;0x%X\n&quot;</span> $((<span class="number">0</span>xA000 + <span class="number">0</span>x1000))</span><br><span class="line">$ gawk <span class="string">&#x27;BEGIN&#123; printf &quot;%x\n&quot;, strtonum(0x7fa5700fa631-0x7fa56ffcf000) &#125;&#x27;</span></span><br><span class="line">$ gawk <span class="string">&#x27;BEGIN&#123; printf &quot;%x\n&quot;, 0x7fa5700fa631-0x7fa56ffcf000 &#125;&#x27;</span></span><br></pre></td></tr></table></figure>

<p>hex -&gt; dec and dec -&gt; hex</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">printf</span> <span class="string">&quot;%d %x\n&quot;</span> $((<span class="number">0</span>xf)) $((<span class="number">10</span>))</span><br><span class="line">$ <span class="built_in">printf</span> <span class="string">&quot;%d %x\n&quot;</span> $((<span class="number">16#f</span>)) $((<span class="number">10#10</span>))</span><br><span class="line">15 a</span><br><span class="line">$ <span class="built_in">echo</span> $((<span class="number">0</span>xf))</span><br><span class="line">15</span><br></pre></td></tr></table></figure>

<p>hex -&gt; bin num</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ dc -e &#x27;16i2o0x6003p&#x27;</span><br><span class="line">110000000000011</span><br><span class="line">110,0000,0000,0011</span><br></pre></td></tr></table></figure>

<p>bin &lt;-&gt; dec</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#bin -&gt; dec</span></span><br><span class="line">$ <span class="built_in">echo</span> $((<span class="number">2#1010</span>))</span><br><span class="line">10</span><br><span class="line"></span><br><span class="line"><span class="comment">#dec -&gt; bin</span></span><br><span class="line"><span class="comment"># 0-255</span></span><br><span class="line">$ bin=(&#123;0..1&#125;&#123;0..1&#125;&#123;0..1&#125;&#123;0..1&#125;&#123;0..1&#125;&#123;0..1&#125;&#123;0..1&#125;&#123;0..1&#125;)</span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">$&#123;a[5]&#125;</span></span><br><span class="line">00000101</span><br><span class="line"></span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">$&#123;a[255]&#125;</span></span><br><span class="line">11111111</span><br><span class="line"></span><br><span class="line">$ var=<span class="string">&quot;304&quot;</span></span><br><span class="line">$ <span class="built_in">echo</span> <span class="string">&quot;obase=2; <span class="variable">$var</span>&quot;</span> | bc</span><br><span class="line">100110000</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">printf</span> <span class="string">&quot;%d %d %x %o\n&quot;</span> 0x10 010 16 0xf</span><br><span class="line">16 8 10 17</span><br><span class="line"></span><br><span class="line">$ <span class="built_in">echo</span> $((<span class="number">16#f</span>))</span><br><span class="line">15</span><br><span class="line"></span><br><span class="line">$ <span class="built_in">echo</span> $((<span class="number">8#10</span>))</span><br><span class="line">8</span><br></pre></td></tr></table></figure>

<h4 id="Two’s-Complement-and-the-negative-number"><a href="#Two’s-Complement-and-the-negative-number" class="headerlink" title="Two’s Complement and the negative number"></a><a target="_blank" rel="noopener" href="https://www.ruanyifeng.com/blog/2009/08/twos_complement.html">Two’s Complement and the negative number</a></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#binary</span></span><br><span class="line">0000 1000 = 8</span><br><span class="line"></span><br><span class="line">inverted</span><br><span class="line">1111 0111</span><br><span class="line"></span><br><span class="line">Add 1</span><br><span class="line">1111 1000 = -8</span><br><span class="line"></span><br><span class="line">-8=0-8</span><br><span class="line"> 0000 0000</span><br><span class="line">-0000 1000</span><br><span class="line"></span><br><span class="line">borrow</span><br><span class="line">10000 0000</span><br><span class="line">-0000 1000</span><br><span class="line">----------</span><br><span class="line"> 1111 1000 = -8</span><br><span class="line"></span><br><span class="line">10000 0000 - 0000 1000 could be <span class="built_in">split</span></span><br><span class="line"></span><br><span class="line">first step: inverted</span><br><span class="line"> 1111 1111</span><br><span class="line">-0000 1000</span><br><span class="line">----------</span><br><span class="line"> 1111 0111</span><br><span class="line"></span><br><span class="line">Second step: Add 1</span><br><span class="line"> 1111 0111</span><br><span class="line">+0000 0001</span><br><span class="line">----------</span><br><span class="line"> 1111 1000 = -8</span><br></pre></td></tr></table></figure>

<h4 id="hex-to-ip-addr-ipv4"><a href="#hex-to-ip-addr-ipv4" class="headerlink" title="hex to ip addr (ipv4)"></a>hex to ip addr (ipv4)</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">   202.      204.      120.      63</span><br><span class="line">    |         |         |         |</span><br><span class="line">1100 1010 1100 1100 0111 1000 0011 1111</span><br><span class="line"> C    A    C    C    7    8    3    F</span><br><span class="line">0xCACC783F</span><br><span class="line"></span><br><span class="line">/proc/net/tcp was hex code</span><br><span class="line">hex to dec</span><br><span class="line"></span><br><span class="line">decode dec</span><br><span class="line">https://stackoverflow.com/questions/10768160/ip-address-converter</span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"><span class="function"><span class="title">dec2ip</span></span> ()</span><br><span class="line">&#123;</span><br><span class="line">   <span class="built_in">local</span> v=<span class="variable">$1</span></span><br><span class="line">   <span class="built_in">local</span> i1=$((v&gt;&gt;<span class="number">24</span>&amp;<span class="number">255</span>))</span><br><span class="line">   <span class="built_in">local</span> i2=$((v&gt;&gt;<span class="number">16</span>&amp;<span class="number">255</span>))</span><br><span class="line">   <span class="built_in">local</span> i3=$((v&gt;&gt;<span class="number">8</span>&amp;<span class="number">255</span>))</span><br><span class="line">   <span class="built_in">local</span> i4=$((v&amp;<span class="number">255</span>))</span><br><span class="line">   <span class="built_in">printf</span> <span class="string">&#x27;%d.%d.%d.%d\n&#x27;</span> <span class="variable">$i4</span> <span class="variable">$i3</span> <span class="variable">$i2</span> <span class="variable">$i1</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">dec2ip <span class="variable">$1</span></span><br><span class="line">-----------</span><br><span class="line"></span><br><span class="line">$ sh dec2ip $(<span class="built_in">printf</span> <span class="string">&quot;%d \n&quot;</span> 0x0100a8c0)</span><br><span class="line">192.168.0.1</span><br></pre></td></tr></table></figure>

<h4 id="bitwise"><a href="#bitwise" class="headerlink" title="bitwise"></a><a target="_blank" rel="noopener" href="https://www.baeldung.com/linux/bash-bitwise-operators">bitwise</a></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">#binray to decimal</span></span><br><span class="line">$ <span class="built_in">echo</span> $((<span class="number">2#1001</span>))</span><br><span class="line">9</span><br><span class="line"></span><br><span class="line"><span class="comment">#decimal to binary</span></span><br><span class="line">$ <span class="built_in">echo</span> <span class="string">&quot;ibase=10;obase=2;9&quot;</span> | bc</span><br><span class="line">1001</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">twos</span></span>() &#123;</span><br><span class="line">    n=$(getconf LONG_BIT) <span class="comment"># detect the machine architecture, 32bit or 64bit</span></span><br><span class="line">    <span class="built_in">printf</span> <span class="string">&#x27;obase=2; 2^%d+%d\n&#x27;</span> <span class="string">&quot;<span class="variable">$n</span>&quot;</span> <span class="string">&quot;<span class="variable">$1</span>&quot;</span> | bc | sed -E <span class="string">&quot;s/.*(.&#123;<span class="variable">$n</span>&#125;)$/\1/&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$ getconf LONG_BIT</span><br><span class="line">64</span><br><span class="line"></span><br><span class="line">$ twos 100</span><br><span class="line">0000000000000000000000000000000000000000000000000000000001100100</span><br><span class="line">$ twos -100</span><br><span class="line">1111111111111111111111111111111111111111111111111111111110011100</span><br><span class="line">$ twos 9223372036854775807</span><br><span class="line">0111111111111111111111111111111111111111111111111111111111111111</span><br><span class="line">$ twos -9223372036854775808</span><br><span class="line">1000000000000000000000000000000000000000000000000000000000000000</span><br><span class="line"></span><br><span class="line"><span class="comment"># Given a two&#x27;s complement representation of a signed number, prints its decimal notation</span></span><br><span class="line"><span class="function"><span class="title">dec</span></span>() &#123;</span><br><span class="line">  <span class="built_in">printf</span> <span class="string">&#x27;n=%d; ibase=2; v=%s; v-2^n*(v/2^(n-1))\n&#x27;</span> <span class="string">&quot;<span class="subst">$(getconf LONG_BIT)</span>&quot;</span> <span class="string">&quot;<span class="variable">$1</span>&quot;</span>| bc</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$ dec 1111111111111111111111111111111111111111111111111111111110011100</span><br><span class="line">-100</span><br><span class="line">$ dec 0000000000000000000000000000000000000000000000000000000001100100</span><br><span class="line">100</span><br><span class="line"></span><br><span class="line">$ <span class="built_in">expr</span> 1 \&amp; 0</span><br><span class="line">0</span><br><span class="line"></span><br><span class="line">$ <span class="built_in">let</span> A=1\&amp;0</span><br><span class="line">$ $ <span class="built_in">echo</span> <span class="variable">$A</span></span><br><span class="line">0</span><br><span class="line">$ <span class="built_in">declare</span> -i B=1\&amp;0</span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">$B</span></span><br><span class="line">0</span><br><span class="line"></span><br><span class="line">$ <span class="built_in">echo</span> $(( <span class="number">8</span> | ~ <span class="number">4</span> &gt;&gt; <span class="number">1</span> ^ <span class="number">2</span> &amp; <span class="number">6</span> ))</span><br><span class="line">-1</span><br><span class="line">$ <span class="built_in">echo</span> $(( <span class="number">8</span> | (((~ <span class="number">4</span>) &gt;&gt; <span class="number">1</span>) ^ (<span class="number">2</span> &amp; <span class="number">6</span>)) ))</span><br><span class="line">-1</span><br><span class="line"></span><br><span class="line"><span class="comment">#NOT operator inverts all bits</span></span><br><span class="line">$ <span class="built_in">echo</span> $(( ~ -<span class="number">3</span>))</span><br><span class="line">2</span><br><span class="line"></span><br><span class="line">$ twos -3</span><br><span class="line">1111111111111111111111111111111111111111111111111111111111111101</span><br><span class="line">---------------------------------------------------------------- NOT</span><br><span class="line">0000000000000000000000000000000000000000000000000000000000000010</span><br><span class="line"></span><br><span class="line">$ dec 0000000000000000000000000000000000000000000000000000000000000010</span><br><span class="line">2</span><br><span class="line"></span><br><span class="line">  A | B | A AND B </span><br><span class="line"> ---|---|--------- </span><br><span class="line">  0 | 0 |       0 </span><br><span class="line">  0 | 1 |       0 </span><br><span class="line">  1 | 0 |       0 </span><br><span class="line">  1 | 1 |       1 </span><br><span class="line"></span><br><span class="line">$ <span class="built_in">echo</span> $(( -<span class="number">1000</span> &amp; <span class="number">20</span> ))</span><br><span class="line">16</span><br><span class="line"></span><br><span class="line">$ twos -1000</span><br><span class="line">1111111111111111111111111111111111111111111111111111110000011000</span><br><span class="line">$ twos 20</span><br><span class="line">0000000000000000000000000000000000000000000000000000000000010100</span><br><span class="line"></span><br><span class="line">1111111111111111111111111111111111111111111111111111110000011000</span><br><span class="line">0000000000000000000000000000000000000000000000000000000000010100</span><br><span class="line">---------------------------------------------------------------- AND</span><br><span class="line">0000000000000000000000000000000000000000000000000000000000010000</span><br><span class="line"></span><br><span class="line">$ dec 0000000000000000000000000000000000000000000000000000000000010000</span><br><span class="line">16</span><br><span class="line"></span><br><span class="line">$ A=-1000;</span><br><span class="line">$ (( A &amp;= <span class="number">20</span> ))</span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">$A</span></span><br><span class="line">16</span><br><span class="line"></span><br><span class="line">  A | B | A OR B </span><br><span class="line"> ---|---|-------- </span><br><span class="line">  0 | 0 |      0 </span><br><span class="line">  0 | 1 |      1 </span><br><span class="line">  1 | 0 |      1 </span><br><span class="line">  1 | 1 |      1 </span><br><span class="line"></span><br><span class="line">$ <span class="built_in">echo</span> $(( <span class="number">123</span> | -<span class="number">321</span> ))</span><br><span class="line">-257</span><br><span class="line">$ twos 123</span><br><span class="line">0000000000000000000000000000000000000000000000000000000001111011</span><br><span class="line">$ twos -321</span><br><span class="line">1111111111111111111111111111111111111111111111111111111010111111</span><br><span class="line"></span><br><span class="line">0000000000000000000000000000000000000000000000000000000001111011</span><br><span class="line">1111111111111111111111111111111111111111111111111111111010111111</span><br><span class="line">---------------------------------------------------------------- OR</span><br><span class="line">1111111111111111111111111111111111111111111111111111111011111111</span><br><span class="line"></span><br><span class="line">$ dec 1111111111111111111111111111111111111111111111111111111011111111</span><br><span class="line">-257</span><br><span class="line"></span><br><span class="line">$ A=123;</span><br><span class="line">$ (( A |= -<span class="number">321</span> ))</span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">$A</span></span><br><span class="line">-257</span><br><span class="line"></span><br><span class="line"> A | B | A XOR B </span><br><span class="line"> ---|---|-------- </span><br><span class="line">  0 | 0 |       0 </span><br><span class="line">  0 | 1 |       1 </span><br><span class="line">  1 | 0 |       1 </span><br><span class="line">  1 | 1 |       0 </span><br><span class="line"></span><br><span class="line">$ <span class="built_in">echo</span> $(( -<span class="number">314</span> ^ <span class="number">537</span>  ))</span><br><span class="line">-801</span><br><span class="line"></span><br><span class="line">$ twos -314</span><br><span class="line">1111111111111111111111111111111111111111111111111111111011000110</span><br><span class="line">$ twos 537</span><br><span class="line">0000000000000000000000000000000000000000000000000000001000011001</span><br><span class="line"></span><br><span class="line">1111111111111111111111111111111111111111111111111111111011000110</span><br><span class="line">0000000000000000000000000000000000000000000000000000001000011001</span><br><span class="line">---------------------------------------------------------------- XOR</span><br><span class="line">1111111111111111111111111111111111111111111111111111110011011111</span><br><span class="line"></span><br><span class="line">$ dec 1111111111111111111111111111111111111111111111111111110011011111</span><br><span class="line">-801</span><br><span class="line"></span><br><span class="line">$ A=-314;</span><br><span class="line">$ (( A ^= <span class="number">537</span> ))</span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">$A</span></span><br><span class="line">-801</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Bitwise Shift </span><br><span class="line">$ n=3</span><br><span class="line">$ x=-1000</span><br><span class="line">$ <span class="built_in">echo</span> $(( x &lt;&lt; n ))</span><br><span class="line">-8000</span><br><span class="line">$ <span class="built_in">echo</span> $(( x * <span class="number">2</span>**n ))</span><br><span class="line">-8000</span><br><span class="line"></span><br><span class="line">$ x=-8070450532247928857</span><br><span class="line">$ <span class="built_in">echo</span> $(( x &lt;&lt; n ))</span><br><span class="line">9223372036854775608</span><br><span class="line">$ <span class="built_in">echo</span> $(( x * <span class="number">2</span>**n ))</span><br><span class="line">9223372036854775608</span><br><span class="line"></span><br><span class="line">$ twos -1000</span><br><span class="line">1111111111111111111111111111111111111111111111111111110000011000</span><br><span class="line"></span><br><span class="line">$ dec 1111111111111111111111111111111111111111111111111110000011000000</span><br><span class="line">-8000</span><br><span class="line"></span><br><span class="line">$ A=-1000</span><br><span class="line">$ (( A &lt;&lt;= <span class="number">3</span> ))</span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">$A</span></span><br><span class="line">-8000</span><br><span class="line"></span><br><span class="line"><span class="comment">#right bitwise shift</span></span><br><span class="line">$ x=1030</span><br><span class="line">$ n=3</span><br><span class="line">$ <span class="built_in">echo</span> $(( x &gt;&gt; n ))</span><br><span class="line">128</span><br><span class="line">$ <span class="built_in">echo</span> $(( x / <span class="number">2</span>**n))</span><br><span class="line">128</span><br><span class="line"> </span><br><span class="line">$ x=-1030</span><br><span class="line">$ <span class="built_in">echo</span> $(( x &gt;&gt; n ))</span><br><span class="line">-129</span><br><span class="line">$ <span class="built_in">echo</span> $(( x / <span class="number">2</span>**n))</span><br><span class="line">-128</span><br><span class="line"></span><br><span class="line">$ twos -1030</span><br><span class="line">1111111111111111111111111111111111111111111111111111101111111010</span><br><span class="line"></span><br><span class="line">$ dec 1111111111111111111111111111111111111111111111111111111101111111</span><br><span class="line">-129</span><br><span class="line"></span><br><span class="line">$ A=-1030</span><br><span class="line">$ (( A &gt;&gt;= <span class="number">3</span> ))</span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">$A</span></span><br><span class="line">-129</span><br></pre></td></tr></table></figure>



<h4 id="Integer-ASCII-value-to-character"><a href="#Integer-ASCII-value-to-character" class="headerlink" title="Integer ASCII value to character"></a><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/890262/integer-ascii-value-to-character-in-bash-using-printf">Integer ASCII value to character</a></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">printf</span> <span class="string">&quot;\x<span class="subst">$(printf %x 65)</span>&quot;</span></span><br><span class="line">A</span><br><span class="line">$ awk <span class="string">&#x27;BEGIN&#123;printf &quot;%c&quot;, 65&#125;&#x27;</span></span><br><span class="line">A</span><br></pre></td></tr></table></figure>

<h3 id="xargs"><a href="#xargs" class="headerlink" title="xargs"></a>xargs</h3><p>same with while read line  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">seq</span> 88 97 | xargs -I% grep -H . /proc/irq/%/smp_affinity</span><br><span class="line"></span><br><span class="line">$ ssh -n <span class="variable">$your_server</span> <span class="string">&quot;lsscsi -gis | awk &#x27;\$0~/3500/&#123;print \$6&#125;&#x27; | xargs -I&#123;&#125; sdparm -s RCD=0 &#123;&#125; &quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="taskset"><a href="#taskset" class="headerlink" title="taskset"></a>taskset</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> i=13</span><br><span class="line">ps -C nfsd | awk <span class="string">&#x27;$0!~/PID/ &#123;print $1&#125;&#x27;</span> | <span class="keyword">while</span> <span class="built_in">read</span> line</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">        [[ <span class="variable">$i</span> -gt 19 ]] &amp;&amp; <span class="built_in">export</span> i=13</span><br><span class="line">        taskset -p -c <span class="variable">$i</span> <span class="variable">$line</span></span><br><span class="line">        ((i=i+<span class="number">2</span>))</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> core=0</span><br><span class="line">[[ $(grep MHz /proc/cpuinfo -c) -gt 3 ]] &amp;&amp; maxcpu=8 &amp;&amp; <span class="keyword">for</span> i <span class="keyword">in</span> $(pgrep <span class="string">&#x27;z_wr_iss$&#x27;</span>);</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">        [[ <span class="variable">$core</span> -gt <span class="variable">$maxcpu</span> ]] &amp;&amp; core=0;    taskset -p -c <span class="variable">$core</span> <span class="variable">$i</span>;    ((core++)); ((core++));</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<h3 id="stat"><a href="#stat" class="headerlink" title="stat"></a>stat</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># get moidfy time from</span></span><br><span class="line">$ <span class="built_in">stat</span> -c%Z file</span><br><span class="line"></span><br><span class="line"><span class="comment"># now</span></span><br><span class="line">$ <span class="built_in">date</span> +%s</span><br></pre></td></tr></table></figure>

<h3 id="dd"><a href="#dd" class="headerlink" title="dd"></a>dd</h3><p>Read write by Byte   </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">       ibs=BYTES</span><br><span class="line">              <span class="built_in">read</span> up to BYTES bytes at a time (default: 512)</span><br><span class="line">       obs=BYTES</span><br><span class="line">              write BYTES bytes at a time (default: 512)</span><br><span class="line">       bs=BYTES</span><br><span class="line">              <span class="built_in">read</span> and write up to BYTES bytes at a time (default: 512); overrides ibs and obs</span><br><span class="line"></span><br><span class="line"><span class="built_in">set</span> bs=1</span><br></pre></td></tr></table></figure>

<h3 id="parallel"><a href="#parallel" class="headerlink" title="parallel"></a>parallel</h3><h4 id="Pipe-single-big-file"><a href="#Pipe-single-big-file" class="headerlink" title="Pipe single big file"></a>Pipe single big file</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> bigfile.bin | parallel --pipe --recend <span class="string">&#x27;&#x27;</span> -k bzip2 --best &gt; compressedfile.bz2</span><br><span class="line"><span class="built_in">cat</span> bigfile.txt | parallel --block 10M --pipe grep <span class="string">&#x27;pattern&#x27;</span></span><br><span class="line"><span class="built_in">cat</span> rands20M.txt | parallel --pipe awk \<span class="string">&#x27;&#123;s+=\$1&#125; END &#123;print s&#125;\&#x27;</span> | awk <span class="string">&#x27;&#123;s+=$1&#125; END &#123;print s&#125;&#x27;</span></span><br><span class="line"><span class="built_in">cat</span> bigfile.txt | parallel  --pipe <span class="built_in">wc</span> -l | awk <span class="string">&#x27;&#123;s+=$1&#125; END &#123;print s&#125;&#x27;</span></span><br><span class="line"><span class="built_in">cat</span> bigfile.txt | parallel --pipe sed s^old^new^g</span><br></pre></td></tr></table></figure>

<h4 id="For-multiple-files"><a href="#For-multiple-files" class="headerlink" title="For multiple files"></a>For multiple files</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">find . -name <span class="string">&#x27;*.html&#x27;</span> | parallel gzip --best</span><br><span class="line">find /dir1 /dir2 -<span class="built_in">type</span> f -not -path <span class="string">&quot;/exclude1/*&quot;</span> -not -path <span class="string">&quot;/exclude2/*&quot;</span> -not -path <span class="string">&quot;*.snapshots*&quot;</span> -atime +15</span><br></pre></td></tr></table></figure>

<h4 id="Get-parameter"><a href="#Get-parameter" class="headerlink" title="Get parameter"></a>Get parameter</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">seq</span> 10 | parallel <span class="built_in">echo</span> test_&#123;&#125;</span><br><span class="line">test_1</span><br><span class="line">test_2</span><br><span class="line">test_3</span><br><span class="line">test_4</span><br><span class="line">test_5</span><br><span class="line">test_6</span><br><span class="line">test_7</span><br><span class="line">test_8</span><br><span class="line">test_9</span><br><span class="line">test_10</span><br><span class="line"></span><br><span class="line">$ parallel <span class="built_in">echo</span> ::: <span class="string">&quot;123&quot;</span> <span class="string">&quot;456&quot;</span> <span class="built_in">test</span> zzz</span><br><span class="line">123</span><br><span class="line">456</span><br><span class="line"><span class="built_in">test</span></span><br><span class="line">zzz</span><br><span class="line"></span><br><span class="line">$ parallel <span class="built_in">echo</span> ::: A B C ::: D E F</span><br><span class="line">A D</span><br><span class="line">A E</span><br><span class="line">A F</span><br><span class="line">B D</span><br><span class="line">B E</span><br><span class="line">B F</span><br><span class="line">C D</span><br><span class="line">C E</span><br><span class="line">C F</span><br><span class="line"></span><br><span class="line">$ parallel -a abc-file -a def-file <span class="built_in">echo</span></span><br><span class="line">$ <span class="built_in">cat</span> abc-file | parallel -a - -a def-file <span class="built_in">echo</span></span><br><span class="line"><span class="comment"># replace - by ::::</span></span><br><span class="line">$ <span class="built_in">cat</span> abc-file | parallel <span class="built_in">echo</span> :::: - def-file</span><br><span class="line"><span class="comment"># &quot;:::&quot; is stand input, :::: is file</span></span><br><span class="line">$ parallel <span class="built_in">echo</span> ::: A B C :::: def-file</span><br><span class="line"></span><br><span class="line">$ parallel --xapply <span class="built_in">echo</span> ::: A B C ::: D E F</span><br><span class="line">A D</span><br><span class="line">B E</span><br><span class="line">C F</span><br><span class="line">$ <span class="built_in">seq</span> 50 | parallel -n0 -q  curl <span class="string">&#x27;example.com&#x27;</span></span><br><span class="line"><span class="comment">#  -n 0 means read one argument, but insert 0 arguments on the command line.</span></span><br><span class="line"><span class="comment">#  -q       Quote command.  This will quote the command line so special characters are not interpreted by the shell.</span></span><br></pre></td></tr></table></figure>

<h3 id="tee"><a href="#tee" class="headerlink" title="tee"></a>tee</h3><p>tee write all match files   </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">ls</span></span><br><span class="line">1  2  3  4  5  6  7  8  9</span><br><span class="line">$ <span class="built_in">echo</span> -n | <span class="built_in">tee</span> ./*</span><br><span class="line">$ <span class="built_in">cat</span> 1</span><br><span class="line">$ <span class="built_in">echo</span> 123 | <span class="built_in">tee</span> ./*</span><br><span class="line">123</span><br><span class="line">$ <span class="built_in">cat</span> ./*</span><br><span class="line">123</span><br><span class="line">123</span><br><span class="line">123</span><br><span class="line">123</span><br><span class="line">123</span><br><span class="line">123</span><br><span class="line">123</span><br><span class="line">123</span><br><span class="line">123</span><br></pre></td></tr></table></figure>
<h3 id="Merge-the-bash-script-with-file"><a href="#Merge-the-bash-script-with-file" class="headerlink" title="Merge the bash script with file"></a>Merge the bash script with file</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">ls</span></span><br><span class="line">exec_test.sh  run-fio2.log.xz  split.sh</span><br><span class="line">$ <span class="built_in">cat</span> split.sh</span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"><span class="built_in">cat</span> exec_test.sh  run-fio2.log.xz &gt; test.xz</span><br><span class="line">sed -n <span class="string">&quot;1,/^echo 4022b2430d57183df554fcf0bf9ee8c0$/p&quot;</span> test.xz &gt; sed_out.sh</span><br><span class="line">sed -n <span class="string">&#x27;1,/^echo 4022b2430d57183df554fcf0bf9ee8c0$/!p&#x27;</span> test.xz &gt; sed_out.xz</span><br><span class="line">$ sh ./split.sh</span><br><span class="line">$ <span class="built_in">sha1sum</span> ./*</span><br><span class="line">a29f26db0170663fdfaf6f690ec6f584403264a8  ./exec_test.sh</span><br><span class="line">a29f26db0170663fdfaf6f690ec6f584403264a8  ./sed_out.sh</span><br><span class="line"></span><br><span class="line">ddf863d60a84cf87e5d6d2c5794e0d69cb6a497f  ./run-fio2.log.xz</span><br><span class="line">ddf863d60a84cf87e5d6d2c5794e0d69cb6a497f  ./sed_out.xz</span><br><span class="line">......</span><br></pre></td></tr></table></figure>

<h3 id="“-“-means-read-the-standard-ouput"><a href="#“-“-means-read-the-standard-ouput" class="headerlink" title="“-“ means read the standard ouput"></a>“-“ means read the standard ouput</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> this is output | <span class="built_in">paste</span> test2 -</span><br><span class="line">this is test2   this is output</span><br></pre></td></tr></table></figure>

<h3 id="jira-text-syntax"><a href="#jira-text-syntax" class="headerlink" title="jira text syntax"></a><a target="_blank" rel="noopener" href="https://jira.atlassian.com/secure/WikiRendererHelpAction.jspa?section=all">jira text syntax</a></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">metion some one</span><br><span class="line">[~UserA]</span><br><span class="line">[~UserA:accountid]</span><br><span class="line"></span><br><span class="line">&#123;noformat&#125;</span><br><span class="line">&#123;noformat&#125;</span><br></pre></td></tr></table></figure>

<h3 id="parallel-bash"><a href="#parallel-bash" class="headerlink" title="parallel bash"></a>parallel bash</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cat</span> run.sh</span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">thread_num=1024</span><br><span class="line">start_time=$(<span class="built_in">date</span> +%H%M%S)</span><br><span class="line">tempfifo=<span class="string">&quot;d3cecd.fifo&quot;</span></span><br><span class="line"><span class="built_in">mkfifo</span> <span class="variable">$&#123;tempfifo&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">exec</span> 7&lt;&gt;<span class="variable">$&#123;tempfifo&#125;</span></span><br><span class="line"><span class="built_in">rm</span> -f <span class="variable">$&#123;tempfifo&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> ((i=<span class="number">1</span>;i&lt;=<span class="variable">$&#123;thread_num&#125;</span>;i++))</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">echo</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">done</span> &gt;&amp;7</span><br><span class="line"></span><br><span class="line"><span class="built_in">cat</span> all.dirs | <span class="keyword">while</span> <span class="built_in">read</span> line</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">read</span> -u7</span><br><span class="line">    &#123;</span><br><span class="line">         count=$(openssl rand -hex 8)</span><br><span class="line">         <span class="keyword">if</span> [[ -d <span class="string">&quot;<span class="variable">$line</span>&quot;</span> ]]</span><br><span class="line">         <span class="keyword">then</span></span><br><span class="line">           <span class="built_in">ls</span> -fls --time=atime --time-style=<span class="string">&#x27;+%s&#x27;</span> <span class="string">&quot;<span class="variable">$line</span>&quot;</span> | awk -v fpath=<span class="string">&quot;<span class="variable">$line</span>&quot;</span> <span class="string">&#x27;&#123;if(NF&gt;7) &#123;if($NF==&quot;.&quot; || $NF==&quot;..&quot;) &#123;next&#125; else &#123;a[$NF]=$0&#125; &#125;&#125; END&#123;for(i in a) &#123;print fpath&quot;/&quot;i,a[i]&#125;&#125;&#x27;</span> &gt; /dev/shm/tmp_d2cecdcb93dcd5e5/temp.<span class="variable">$count</span>  2&gt; ./output.err</span><br><span class="line">         <span class="keyword">fi</span></span><br><span class="line">         <span class="keyword">if</span> [[ $? -eq 0 ]]</span><br><span class="line">         <span class="keyword">then</span></span><br><span class="line">           <span class="built_in">touch</span> /dev/shm/tmp_d2cecdcb93dcd5e5/ok.<span class="variable">$count</span></span><br><span class="line">         <span class="keyword">else</span></span><br><span class="line">           <span class="built_in">touch</span> /dev/shm/tmp_d2cecdcb93dcd5e5/fa.<span class="variable">$count</span></span><br><span class="line">         <span class="keyword">fi</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;&quot;</span> &gt;&amp;7</span><br><span class="line">    &#125; &amp;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"><span class="built_in">wait</span></span><br><span class="line"><span class="built_in">exec</span> 7&gt;&amp;-</span><br><span class="line">end_time=$(<span class="built_in">date</span> +%H%M%S)</span><br><span class="line">ps aux |grep daemon-run3.sh | awk <span class="string">&#x27;&#123;print $2&#125;&#x27;</span> | xargs <span class="built_in">kill</span> -9</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Take time: &quot;</span>$((end_time-start_time))<span class="string">&quot; secs&quot;</span></span><br><span class="line"></span><br><span class="line">$ <span class="built_in">cat</span> clean.sh</span><br><span class="line">[[ ! -f /dev/shm/tmp_d2cecdcb93dcd5e5 ]] &amp;&amp; <span class="built_in">mkdir</span> /dev/shm/tmp_d2cecdcb93dcd5e5</span><br><span class="line"><span class="keyword">while</span> :</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line"> <span class="built_in">ls</span> /dev/shm/tmp_d2cecdcb93dcd5e5/ | grep <span class="string">&quot;ok.&quot;</span> | <span class="keyword">while</span> <span class="built_in">read</span> line</span><br><span class="line"> <span class="keyword">do</span></span><br><span class="line">   <span class="keyword">if</span> [[ ! -z <span class="variable">$line</span> ]]</span><br><span class="line">   <span class="keyword">then</span></span><br><span class="line">     count=$(<span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$line</span>&quot;</span> | awk -F. <span class="string">&#x27;&#123;print $NF&#125;&#x27;</span>)</span><br><span class="line">     <span class="built_in">echo</span> <span class="string">&quot;clean <span class="variable">$count</span>&quot;</span></span><br><span class="line">     <span class="built_in">cat</span> /dev/shm/tmp_d2cecdcb93dcd5e5/temp.<span class="variable">$count</span> &gt;&gt; all.files.3 &amp;&amp; <span class="built_in">rm</span> -f  /dev/shm/tmp_d2cecdcb93dcd5e5/temp.<span class="variable">$count</span> /dev/shm/tmp_d2cecdcb93dcd5e5/ok.<span class="variable">$count</span></span><br><span class="line">     <span class="keyword">if</span> [[ ! -f <span class="string">&quot;/dev/shm/tmp_d2cecdcb93dcd5e5/temp.<span class="variable">$count</span>&quot;</span> ]] &amp;&amp; [[ -f <span class="string">&quot;/dev/shm/tmp_d2cecdcb93dcd5e5/ok.<span class="variable">$count</span>&quot;</span> ]]</span><br><span class="line">     <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">rm</span> -f  /dev/shm/tmp_d2cecdcb93dcd5e5/temp.<span class="variable">$count</span> /dev/shm/tmp_d2cecdcb93dcd5e5/ok.<span class="variable">$count</span></span><br><span class="line">     <span class="keyword">fi</span></span><br><span class="line">   <span class="keyword">fi</span></span><br><span class="line"> <span class="keyword">done</span></span><br><span class="line"> <span class="built_in">sleep</span> 2</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://unix.stackexchange.com/questions/439196/change-buffer-size-of-named-pipe">though for unprivileged users, that’s bound by &#x2F;proc&#x2F;sys&#x2F;fs&#x2F;pipe-max-size. Any of the writer or reader to the pipe can issue that fcntl() though it makes more sense for the writer to do it. In the case of a named pipe, you’d need to do that for each pipe instantiated though the fifo file</a>  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">A fifo file is just a <span class="built_in">type</span> of file <span class="built_in">which</span> when opened <span class="keyword">for</span> both reading and writing instantiates a pipe like a pipe() system call would.</span><br><span class="line"></span><br><span class="line">On Linux at least, the data that transits though that pipe is not stored on the file system at all (only <span class="keyword">in</span> the kernel as kernel memory). And the size attribute of the fifo file is not relevant and is always 0.</span><br><span class="line"></span><br><span class="line">On Linux, you can change the size of a pipe buffer (whether that pipe has been instantiated with pipe() or via opening a fifo file) with the F_SETPIPE_SZ fcntl(), though <span class="keyword">for</span> unprivileged <span class="built_in">users</span>, that<span class="string">&#x27;s bound by /proc/sys/fs/pipe-max-size. Any of the writer or reader to the pipe can issue that fcntl() though it makes more sense for the writer to do it. In the case of a named pipe, you&#x27;</span>d need to <span class="keyword">do</span> that <span class="keyword">for</span> each pipe instantiated though the fifo file.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">$ <span class="built_in">mkfifo</span> fifo</span><br><span class="line">$ <span class="built_in">exec</span> 3&lt;&gt; fifo <span class="comment"># instantiate the pipe</span></span><br><span class="line">$ <span class="built_in">seq</span> 20000 &gt; fifo</span><br><span class="line">^C  <span class="comment"># seq hangs because it&#x27;s trying to write more than 64KiB</span></span><br><span class="line">$ <span class="built_in">exec</span> 3&lt;&amp;- 3&lt;&gt; fifo <span class="comment"># close the first pipe and instantiate a new one</span></span><br><span class="line">$ (perl -MFcntl -e <span class="string">&#x27;fcntl(STDOUT, 1031, 1048576)&#x27;</span>; <span class="built_in">seq</span> 20000) &gt; fifo</span><br><span class="line">$ <span class="comment"># went through this time</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> fcntl</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>fifo = <span class="built_in">open</span>(<span class="string">&#x27;/var/log/sagan/sagan.fifo&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>fcntl.fcntl(fifo, <span class="number">1031</span>)</span><br><span class="line"><span class="number">65536</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>fcntl.fcntl(fifo, <span class="number">1031</span>, <span class="number">1048576</span>)</span><br><span class="line"><span class="number">1048576</span></span><br></pre></td></tr></table></figure>

<h3 id="seq-number"><a href="#seq-number" class="headerlink" title="seq number"></a><a target="_blank" rel="noopener" href="https://kodango.com/generate-number-sequence-in-shell">seq number</a></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="keyword">for</span> i <span class="keyword">in</span> &#123;1..<span class="variable">$END</span>&#125;; <span class="keyword">do</span> <span class="built_in">echo</span> <span class="variable">$i</span>; <span class="keyword">done</span></span><br><span class="line">&#123;1..5&#125;</span><br><span class="line"></span><br><span class="line">$ <span class="keyword">for</span> i <span class="keyword">in</span> `<span class="built_in">seq</span> 1 <span class="variable">$END</span>`; <span class="keyword">do</span> <span class="built_in">echo</span> <span class="variable">$i</span>; <span class="keyword">done</span></span><br><span class="line"></span><br><span class="line">$ <span class="keyword">for</span> i <span class="keyword">in</span> `<span class="built_in">eval</span> <span class="built_in">echo</span> &#123;1..<span class="variable">$END</span>&#125;`; <span class="keyword">do</span> <span class="built_in">echo</span> <span class="variable">$i</span>; <span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<h3 id="absolute-value"><a href="#absolute-value" class="headerlink" title="absolute value"></a><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/29223313/absolute-value-of-a-number">absolute value</a></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">s2=5; s1=4</span><br><span class="line">s3=$((s1-s2))</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$s3</span></span><br><span class="line">-1</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;s3#-&#125;</span></span><br><span class="line">1</span><br><span class="line"></span><br><span class="line">$ awk <span class="string">&#x27;BEGIN&#123;val=+200;printf &quot;%d\n&quot;, val &lt; 0 ? -val : val&#125;&#x27;</span></span><br><span class="line">$ awk <span class="string">&#x27;BEGIN&#123;val=-200;printf &quot;%d\n&quot;, val &lt; 0 ? -val : val&#125;&#x27;</span></span><br></pre></td></tr></table></figure>

<h3 id="file-descriptors"><a href="#file-descriptors" class="headerlink" title="file descriptors"></a>file descriptors</h3><ul>
<li>0     Standard input  &#x2F;dev&#x2F;stdin      Keyboard, file, or some stream</li>
<li>1     Standard output &#x2F;dev&#x2F;stdout     Monitor, terminal, display</li>
<li>2     Standard error  &#x2F;dev&#x2F;stderr     Non-zero exit codes are usually &gt;FD2, display</li>
<li><blockquote>
<p>&#x3D;3   Additional file descriptors</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br></pre></td><td class="code"><pre><span class="line">$ &#123; <span class="built_in">ls</span> foo bar | <span class="built_in">tee</span> -a ls_out_file ;&#125; 2&gt;/dev/null</span><br><span class="line"></span><br><span class="line">$ <span class="built_in">exec</span> 3&gt;&amp;1 &gt;write_to_file; <span class="built_in">echo</span> <span class="string">&quot;Hello World&quot;</span>; <span class="built_in">exec</span> 1&gt;&amp;3 3&gt;&amp;-</span><br><span class="line"></span><br><span class="line"><span class="comment">#@exec 3&gt;&amp;1                   Copy stdout to file descriptor 3</span></span><br><span class="line"><span class="comment">#&gt; write_to_file              Make FD 1 to write to the file</span></span><br><span class="line"><span class="comment">#echo &quot;Hello World&quot;           Go to file because FD 1 now points to the file</span></span><br><span class="line"><span class="comment">#exec 1&gt;&amp;3                    Copy FD 3 back to 1 (swap)</span></span><br><span class="line"><span class="comment">#3&gt;&amp;-                         Close file descriptor three (we don&#x27;t need it anymore)</span></span><br><span class="line">https://www.redhat.com/sysadmin/more-stupid-bash-tricks</span><br><span class="line"></span><br><span class="line"><span class="comment">#port check</span></span><br><span class="line">$ <span class="built_in">timeout</span> 3 bash -c <span class="string">&#x27;&lt;/dev/tcp/remote_server/remote_port&#x27;</span> || <span class="built_in">echo</span> <span class="string">&quot;Failed to connect&quot;</span></span><br><span class="line">$ <span class="built_in">timeout</span> 3 bash -c <span class="string">&#x27;&lt;/dev/tcp/serverA/3306&#x27;</span> || <span class="built_in">echo</span> <span class="string">&quot;Failed to connect&quot;</span></span><br><span class="line"></span><br><span class="line">$ ssh remotehost &lt;&lt;<span class="string">EOF  # Press the Enter key here</span></span><br><span class="line"><span class="string">&gt; ls /etc</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"></span><br><span class="line">$ ssh remote_host <span class="string">&#x27;bash -s&#x27;</span> &lt; local_script</span><br><span class="line"></span><br><span class="line">$ <span class="built_in">exec</span> ssh remote_host ARG1=FOO ARG2=BAR <span class="string">&#x27;bash -s&#x27;</span> &lt;&lt;<span class="string">&#x27;EOF&#x27;</span></span><br><span class="line">&gt; <span class="built_in">printf</span> %s\\n <span class="string">&quot;<span class="variable">$ARG1</span>&quot;</span> <span class="string">&quot;<span class="variable">$ARG2</span>&quot;</span></span><br><span class="line">&gt; EOF</span><br><span class="line"></span><br><span class="line">https://unix.stackexchange.com/questions/131801/closing-a-file-descriptor-vs</span><br><span class="line">[j]&lt;&gt;filename</span><br><span class="line">  <span class="comment">#  Open file &quot;filename&quot; for reading and writing,</span></span><br><span class="line">  <span class="comment">#+ and assign file descriptor &quot;j&quot; to it.</span></span><br><span class="line">  <span class="comment">#  If &quot;filename&quot; does not exist, create it.</span></span><br><span class="line">  <span class="comment">#  If file descriptor &quot;j&quot; is not specified, default to fd 0, stdin.</span></span><br><span class="line">  <span class="comment">#</span></span><br><span class="line">  <span class="comment">#  An application of this is writing at a specified place in a file.</span></span><br><span class="line">  <span class="built_in">echo</span> 1234567890 &gt; File    <span class="comment"># Write string to &quot;File&quot;.</span></span><br><span class="line">  <span class="built_in">exec</span> 3&lt;&gt; File             <span class="comment"># Open &quot;File&quot; and assign fd 3 to it.</span></span><br><span class="line">  <span class="built_in">read</span> -n 4 &lt;&amp;3             <span class="comment"># Read only 4 characters.</span></span><br><span class="line">  <span class="built_in">echo</span> -n . &gt;&amp;3             <span class="comment"># Write a decimal point there.</span></span><br><span class="line">  <span class="built_in">exec</span> 3&gt;&amp;-                 <span class="comment"># Close fd 3.</span></span><br><span class="line">  <span class="built_in">cat</span> File                  <span class="comment"># ==&gt; 1234.67890</span></span><br><span class="line">  <span class="comment">#  Random access, by golly.</span></span><br><span class="line"></span><br><span class="line">there is not diff with 1&lt;&amp;6- and 1&gt;&amp;6-</span><br><span class="line"></span><br><span class="line">https://unix.stackexchange.com/questions/65000/practical-use-for-moving-file-descriptors</span><br><span class="line">3&gt;&amp;4- is a ksh93 extension also supported by bash and that is short <span class="keyword">for</span> 3&gt;&amp;4 4&gt;&amp;-</span><br><span class="line">that is 3 now points to <span class="built_in">where</span> 4 used to, and 4 is now closed, so what was pointed to by 4 has now moved to 3.</span><br><span class="line"></span><br><span class="line"><span class="built_in">exec</span> [n]&lt;&amp;word will duplicate an input file descriptor <span class="keyword">in</span> bash.</span><br><span class="line"><span class="built_in">exec</span> [n]&gt;&amp;word will duplicate an output file descriptor <span class="keyword">in</span> bash.</span><br><span class="line"><span class="built_in">exec</span> &#123;number x&#125;&gt;&amp;&#123;number y&#125;</span><br><span class="line"><span class="built_in">exec</span> 6&gt;&amp;1 creates a copy of file descriptor 1</span><br><span class="line"><span class="built_in">exec</span> 1&gt;&amp;6 copies 6 back unto 1</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">https://stackoverflow.com/questions/7082001/how-do-file-descriptors-work</span><br><span class="line"><span class="comment">#write file</span></span><br><span class="line"><span class="built_in">exec</span> 3&lt;&gt; /tmp/foo  <span class="comment"># Open &quot;File&quot; and assign fd 3 to it.</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;test&quot;</span> &gt;&amp;3</span><br><span class="line"><span class="built_in">exec</span> 3&gt;&amp;- <span class="comment">#close fd 3.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#write</span></span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;This&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;is&quot;</span> &gt;&amp;2</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;a&quot;</span> &gt;&amp;3</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;test.&quot;</span> &gt;&amp;4</span><br><span class="line"></span><br><span class="line">$ ./fdtest</span><br><span class="line">This</span><br><span class="line">is</span><br><span class="line"></span><br><span class="line">$ ./fdtest 3&gt;&amp;1 4&gt;&amp;1</span><br><span class="line">This</span><br><span class="line">is</span><br><span class="line">a</span><br><span class="line"><span class="built_in">test</span>.</span><br><span class="line"></span><br><span class="line">&gt;&amp;- means 1&gt;&amp;-</span><br><span class="line"></span><br><span class="line"><span class="comment">#fd1 return err</span></span><br><span class="line">$ ./fdtest 3&gt;&amp;1 4&gt;&amp;1 1&gt;&amp;-</span><br><span class="line">./fdtest: line 2: <span class="built_in">echo</span>: write error: Bad file descriptor</span><br><span class="line">is</span><br><span class="line">a</span><br><span class="line"><span class="built_in">test</span>.</span><br><span class="line"></span><br><span class="line"><span class="comment">#1 and 2 return err</span></span><br><span class="line">$ ./fdtest 3&gt;&amp;1 4&gt;&amp;1 1&gt;&amp;- 2&gt;&amp;-</span><br><span class="line">a</span><br><span class="line"><span class="built_in">test</span>.</span><br><span class="line"></span><br><span class="line"><span class="comment">#processes pool</span></span><br><span class="line"><span class="comment">#https://stackoverflow.com/questions/6441509/how-to-write-a-process-pool-bash-shell</span></span><br><span class="line">https://github.com/vincetse/shellutils/blob/master/job_pool.sh</span><br><span class="line"><span class="built_in">exec</span> 7&lt;&gt; <span class="variable">$&#123;job_queue&#125;</span></span><br><span class="line">flock --exclusive 7</span><br><span class="line">flock --unlock 7</span><br><span class="line"><span class="built_in">local</span> job_queue=<span class="variable">$2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#processes pool, easy mode</span></span><br><span class="line">SEND_THREAD_NUM=13</span><br><span class="line">tmp_fifofile=<span class="string">&quot;/tmp/$$.fifo&quot;</span> <span class="comment">#$id.fifo name</span></span><br><span class="line"><span class="built_in">mkfifo</span> “<span class="variable">$tmp_fifofile</span><span class="string">&quot; # create a fifo file</span></span><br><span class="line"><span class="string">exec 6&lt;&gt;&quot;</span><span class="variable">$tmp_fifofile</span><span class="string">&quot; # fd 6 point the fifo file</span></span><br><span class="line"><span class="string">rm <span class="variable">$tmp_fifofile</span></span></span><br><span class="line"><span class="string">for ((i=0;i&lt;<span class="variable">$SEND_THREAD_NUM</span>;i++));do</span></span><br><span class="line"><span class="string">echo # write 13 newline in the fifo pipe</span></span><br><span class="line"><span class="string">done &gt;&amp;6</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">for i in `seq 100`;do</span></span><br><span class="line"><span class="string">read -u6 # read the newline from the fd 6(pipe fifo)</span></span><br><span class="line"><span class="string">&#123;</span></span><br><span class="line"><span class="string">echo <span class="variable">$i</span></span></span><br><span class="line"><span class="string">echo &gt;&amp;6 #write the newline</span></span><br><span class="line"><span class="string">&#125; &amp;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># &#123;&#125; &amp; , sub process on the background</span></span><br><span class="line"><span class="string"># finish a sub-process( &#123; xxx &#125; &amp; ), and re-load a newline</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">pid=$! #print the last sub-process pid</span></span><br><span class="line"><span class="string">echo <span class="variable">$pid</span></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">done</span></span><br><span class="line"><span class="string">wait</span></span><br><span class="line"><span class="string">exec 6&gt;&amp;- #delete the fd6</span></span><br><span class="line"><span class="string">exit 0</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="date-convert-date-cmd"><a href="#date-convert-date-cmd" class="headerlink" title="date convert date cmd"></a>date convert date cmd</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1 hour before</span></span><br><span class="line">$ <span class="built_in">date</span> -s <span class="string">&quot;@<span class="subst">$(($(date +%s)</span>-3600))&quot;</span></span><br><span class="line">or</span><br><span class="line">$ <span class="built_in">date</span> -Ins -s $(<span class="built_in">date</span> -Ins -d <span class="string">&#x27;-1 hour&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#set the time to 10 seconds since 1970</span></span><br><span class="line">$ <span class="built_in">date</span> -s <span class="string">&quot;@10&quot;</span></span><br><span class="line"></span><br><span class="line">-d option to specify the time <span class="keyword">in</span> a human-readable format</span><br><span class="line"><span class="comment">## a week ago</span></span><br><span class="line">today=$(<span class="built_in">date</span> -d <span class="string">&quot;<span class="subst">$(date +%Y%m%d)</span> 00:00:00&quot;</span> +%s)</span><br><span class="line">aweekago=$(<span class="built_in">date</span> -d <span class="string">&quot;@<span class="subst">$((today-3600*24*7)</span>)&quot;</span> <span class="string">&quot;+%Y%m%d&quot;</span>)</span><br><span class="line"></span><br><span class="line">$ <span class="built_in">date</span> -s <span class="string">&quot;2 OCT 2018 18:18:18&quot;</span></span><br><span class="line">$ <span class="built_in">date</span> -d <span class="string">&quot;@1595260885&quot;</span> +<span class="string">&quot;%m/%d/%Y %H:%M:%S&quot;</span></span><br><span class="line">07/21/2020 00:01:25</span><br><span class="line"></span><br><span class="line">$ <span class="built_in">date</span> -d <span class="string">&quot;07/21/2020 00:01:25&quot;</span> +%s</span><br><span class="line">159526088</span><br><span class="line"></span><br><span class="line">$ <span class="built_in">date</span> -d <span class="string">&quot;2020-10-15 14:12:59&quot;</span> +%s</span><br><span class="line">1602742379</span><br><span class="line"></span><br><span class="line">$ <span class="built_in">date</span> -d @12345 -u +%H:%M:%S</span><br><span class="line">03:25:45</span><br><span class="line"></span><br><span class="line">$ <span class="built_in">date</span> -d <span class="string">&quot;09/04/2020 03:25:45&quot;</span> +%s</span><br><span class="line">1599186345</span><br><span class="line">$ <span class="built_in">date</span> -d <span class="string">&quot;09/04/2020 00:00:00&quot;</span> +%s</span><br><span class="line">1599174000</span><br><span class="line">$ <span class="built_in">echo</span> $((<span class="number">1599186345</span>-<span class="number">1599174000</span>))</span><br><span class="line">12345</span><br></pre></td></tr></table></figure>

<h3 id="dd-cmd"><a href="#dd-cmd" class="headerlink" title="dd cmd"></a>dd cmd</h3><p>append  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">dd</span> <span class="keyword">if</span>=/dev/zero of=<span class="built_in">test</span> bs=1G oflag=append conv=notrunc </span><br><span class="line"></span><br><span class="line">$ <span class="built_in">cat</span> test.txt </span><br><span class="line">hello doge world</span><br><span class="line">$ <span class="built_in">dd</span> bs=1 seek=2 skip=12 <span class="keyword">if</span>=test.txt of=test1.txt</span><br><span class="line">5+0 records <span class="keyword">in</span></span><br><span class="line">5+0 records out</span><br><span class="line">5 bytes copied, 0.000285366 s, 17.5 kB/s</span><br><span class="line">$ <span class="built_in">cat</span> test1.txt </span><br><span class="line">orld</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="Background-exec-script-by-ssh-1"><a href="#Background-exec-script-by-ssh-1" class="headerlink" title="Background exec script by ssh"></a><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/29142/getting-ssh-to-execute-a-command-in-the-background-on-target-machine">Background exec script by ssh</a></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="keyword">while</span> <span class="built_in">read</span> line; <span class="keyword">do</span> <span class="built_in">echo</span> -------- <span class="variable">$line</span>  -----------; ssh -n -t <span class="variable">$line</span> <span class="string">&#x27;sh -c &quot;( ( nohup /opt/test.sh &amp;&gt;/dev/null ) &amp; )&quot;&#x27;</span>; <span class="keyword">done</span> &lt; hosts</span><br><span class="line"></span><br><span class="line"><span class="built_in">cat</span> /etc/ssh/sshd_config | grep max -i</span><br><span class="line">MaxSessions 512</span><br><span class="line">ClientAliveCountMax 512</span><br><span class="line">MaxStartups 500:1:500</span><br><span class="line"></span><br><span class="line"><span class="comment">#-t  Force pseudo-terminal allocation.  This can be used to execute arbitrary screen-based programs on a remote machine, which can be very useful, e.g. when implementing menu services.  Multiple -t options force tty allocation, even if ssh has no local tty.</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">$ ssh -n -t -o TCPKeepAlive=<span class="built_in">yes</span> -o ServerAliveInterval=30 -o GSSAPIAuthentication=no -o ControlPersist=600 <span class="variable">$line</span> <span class="string">&#x27;$your command&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># jump 2 nodes</span></span><br><span class="line">ssh -t user1@<span class="variable">$server1</span> -o GSSAPIAuthentication=no <span class="string">&#x27;sudo scp tmp.sh root@$server_ip:&#x27;</span></span><br><span class="line">ssh -t user1@<span class="variable">$server1</span> -o GSSAPIAuthentication=no <span class="string">&#x27;sudo ssh -n root@$server2_ip sh ./tmp.sh&#x27;</span></span><br></pre></td></tr></table></figure>

<h3 id="remove-name-begin-with-“-“-2"><a href="#remove-name-begin-with-“-“-2" class="headerlink" title="remove name begin with “-“"></a><a target="_blank" rel="noopener" href="https://unix.stackexchange.com/questions/1519/how-do-i-delete-a-file-whose-name-begins-with-hyphen-a-k-a-dash-or-minus">remove name begin with “-“</a></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">rm</span> -- --<span class="built_in">help</span></span><br><span class="line"><span class="built_in">rm</span> ./--help</span><br></pre></td></tr></table></figure>

<h3 id="bash-double-quotes-single-quotes-1"><a href="#bash-double-quotes-single-quotes-1" class="headerlink" title="bash double-quotes, single-quotes"></a><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/13826149/how-have-both-local-and-remote-variable-inside-an-ssh-command">bash double-quotes, single-quotes</a></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">A=100;</span><br><span class="line">ssh name@host <span class="string">&quot;A=101;echo \$A&quot;</span></span><br><span class="line">101</span><br><span class="line"></span><br><span class="line">ssh name@host <span class="string">&quot;A=101;echo <span class="variable">$A</span>&quot;</span></span><br><span class="line">100</span><br><span class="line"><span class="comment">#bash expands it to:</span></span><br><span class="line">ssh name@host <span class="string">&quot;A=101; echo 100&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#use single-quotes</span></span><br><span class="line">ssh name@host <span class="string">&#x27;A=101;echo $A&#x27;</span></span><br><span class="line">101</span><br><span class="line"></span><br><span class="line"><span class="comment">#ssh print single quota</span></span><br><span class="line">ssh <span class="variable">$line</span> <span class="string">&#x27; &#x27;</span><span class="string">&quot;&#x27;&quot;</span><span class="string">&#x27;echo $(lctl dl | grep lfs-OST0005 | tr -s &quot; &quot; | cut -d &quot; &quot; -f 1) deactivate &#x27;</span><span class="string">&quot;&#x27;&quot;</span><span class="string">&#x27; &#x27;</span></span><br><span class="line"></span><br><span class="line">ssh <span class="variable">$line</span> bash -c <span class="string">&#x27;&quot;lctl get_param mdt.$(lctl dl | awk &#x27;</span><span class="string">&quot;&#x27;&quot;</span><span class="string">&#x27;$0~/mdt /&#123;print $4&#125;&#x27;</span><span class="string">&quot;&#x27;&quot;</span><span class="string">&#x27; | cut -d &#x27;</span><span class="string">&quot;&#x27;&quot;</span><span class="string">&#x27;-&#x27;</span><span class="string">&quot;&#x27;&quot;</span><span class="string">&#x27; -f1)-MDT0000.root_squash; lctl get_param mdt.$(lctl dl | awk &#x27;</span><span class="string">&quot;&#x27;&quot;</span><span class="string">&#x27;$0~/mdt /&#123;print $4&#125;&#x27;</span><span class="string">&quot;&#x27;&quot;</span><span class="string">&#x27; | cut -d &#x27;</span><span class="string">&quot;&#x27;&quot;</span><span class="string">&#x27;-&#x27;</span><span class="string">&quot;&#x27;&quot;</span><span class="string">&#x27; -f1)-MDT0000.nosquash_nids&quot;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## echo version</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;ssh <span class="variable">$line</span> bash -c &#x27;\&quot;lctl get_param mdt.\$(lctl dl | awk &#x27;\&quot;&#x27;\&quot;&#x27;\$0~/mdt /&#123;print \$4&#125;&#x27;\&quot;&#x27;\&quot;&#x27; | cut -d &#x27;\&quot;&#x27;\&quot;&#x27;-&#x27;\&quot;&#x27;\&quot;&#x27; -f1)-MDT0000.root_squash;lctl get_param mdt.\$(lctl dl | awk &#x27;\&quot;&#x27;\&quot;&#x27;\$0~/mdt /&#123;print \$4&#125;&#x27;\&quot;&#x27;\&quot;&#x27; | cut -d &#x27;\&quot;&#x27;\&quot;&#x27;-&#x27;\&quot;&#x27;\&quot;&#x27; -f1)-MDT0000.nosquash_nids  \&quot;&#x27; &quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;[[ ! $? -eq 0 ]] &amp;&amp; echo &#x27;</span><span class="variable">$line</span><span class="string">&#x27; &gt;&gt; /tmp/failed.log&#x27;</span></span><br></pre></td></tr></table></figure>

<h3 id="bash-input-char-in-cli"><a href="#bash-input-char-in-cli" class="headerlink" title="bash input char in cli"></a>bash input char in cli</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> -e <span class="string">&quot;connect\nshow ld\nexit\n&quot;</span> | ./runCLI.sh</span><br></pre></td></tr></table></figure>

<h3 id="multiple-background-process-in-bash-and-got-the-return-code-2"><a href="#multiple-background-process-in-bash-and-got-the-return-code-2" class="headerlink" title="multiple background process in bash and got the return code"></a>multiple background process in bash and got the return code</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">declare</span> -A array</span><br><span class="line">(start=$(<span class="built_in">date</span> +%s) &amp;&amp; $(<span class="built_in">sleep</span> $(<span class="built_in">shuf</span> -i 5-15 -n 1)) &amp;&amp; <span class="built_in">echo</span> $(($(date +%s)-start)) &gt; time.log) &amp;</span><br><span class="line">pid=$!</span><br><span class="line">array[<span class="variable">$pid</span>]=0</span><br><span class="line">(start=$(<span class="built_in">date</span> +%s) &amp;&amp; $(<span class="built_in">sleep</span> $(<span class="built_in">shuf</span> -i 5-15 -n 1)) &amp;&amp; <span class="built_in">echo</span> $(($(date +%s)-start)) &gt; time.log) &amp;</span><br><span class="line">pid=$!</span><br><span class="line">array[<span class="variable">$pid</span>]=0</span><br><span class="line">(start=$(<span class="built_in">date</span> +%s) &amp;&amp; $(<span class="built_in">sleep</span> $(<span class="built_in">shuf</span> -i 5-15 -n 1)) &amp;&amp; <span class="built_in">echo</span> $(($(date +%s)-start)) &gt; time.log) &amp;</span><br><span class="line">pid=$!</span><br><span class="line">array[<span class="variable">$pid</span>]=0</span><br><span class="line">(start=$(<span class="built_in">date</span> +%s) &amp;&amp; $(<span class="built_in">sleep</span> $(<span class="built_in">shuf</span> -i 5-15 -n 1)) &amp;&amp; <span class="built_in">echo</span> $(($(date +%s)-start)) &gt; time.log) &amp;</span><br><span class="line">pid=$!</span><br><span class="line">array[<span class="variable">$pid</span>]=0</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="string">&quot;<span class="variable">$&#123;!array[@]&#125;</span>&quot;</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">  <span class="built_in">wait</span> <span class="variable">$i</span></span><br><span class="line">  <span class="keyword">if</span> [[ ! $? -eq 0 ]]</span><br><span class="line">  <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;the pid: &quot;</span><span class="variable">$pid</span><span class="string">&quot; show the error, exit&quot;</span></span><br><span class="line">    <span class="built_in">exit</span> 2</span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;the pid: &quot;</span><span class="variable">$pid</span><span class="string">&quot; no error&quot;</span></span><br><span class="line">  <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<h3 id="bash-background-array-variable-1"><a href="#bash-background-array-variable-1" class="headerlink" title="bash background array variable"></a><a target="_blank" rel="noopener" href="https://www.cnblogs.com/azureology/p/13302155.html">bash background array variable</a></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">test_func</span></span>() &#123;</span><br><span class="line">test_path=<span class="string">&quot;<span class="variable">$1</span>&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> test_name <span class="keyword">in</span> $(your_cmd)</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">&#123;</span><br><span class="line">   some cmd <span class="string">&quot;<span class="variable">$test_path</span> <span class="variable">$test_name</span> to output&quot;</span></span><br><span class="line">&#125; &amp;</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"><span class="built_in">wait</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">## the whole function output to standrard output</span></span><br><span class="line">test_func <span class="string">&quot;<span class="variable">$1</span>&quot;</span> &gt; /tmp/test_output</span><br></pre></td></tr></table></figure>

<h3 id="test-match"><a href="#test-match" class="headerlink" title="test match"></a>test match</h3><ul>
<li>string1 &#x3D; string2 and string1 &#x3D;&#x3D; string2 - The equality operator returns true if the operands are equal.<ul>
<li>Use the &#x3D; operator with the test [ command.</li>
<li>Use the &#x3D;&#x3D; operator with the [[ command for pattern matching.</li>
</ul>
</li>
<li>string1 !&#x3D; string2 - The inequality operator returns true if the operands are not equal.</li>
<li>string1 &#x3D;~ regex- The regex operator returns true if the left operand matches the extended regular expression on the right.</li>
<li>string1 &gt; string2 - The greater than operator returns true if the left operand is greater than the right sorted by lexicographical (alphabetical) order.</li>
<li>string1 &lt; string2 - The less than operator returns true if the right operand is greater than the right sorted by lexicographical (alphabetical) order.</li>
<li>-z string - True if the string length is zero.</li>
<li>-n string - True if the string length is non-zero.</li>
</ul>
<h4 id="is-a-integer-1"><a href="#is-a-integer-1" class="headerlink" title="is a integer"></a>is a integer</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">a=1</span><br><span class="line">[[ <span class="variable">$a</span> == *[[:digit:]]* ]] &amp;&amp; <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$a</span> is an integer&quot;</span></span><br><span class="line">[[ <span class="variable">$1</span> == ?(-)+([0-9]) ]] &amp;&amp; <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$a</span> is an integer&quot;</span></span><br><span class="line"><span class="comment">#match yes</span></span><br><span class="line">[[ <span class="string">&quot;<span class="variable">$response</span>&quot;</span> =~ ^([yY][eE][sS]|[yY])+$ ]]</span><br><span class="line"></span><br><span class="line">awk <span class="string">&#x27;/^[[:digit:]]+/&#x27;</span> file</span><br></pre></td></tr></table></figure>

<h3 id="process"><a href="#process" class="headerlink" title="process"></a>process</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ps aux | grep -Ei <span class="string">&#x27;evolution|packagekit|snapd|monitor&#x27;</span> | grep -v gvfs-mtp-volume-monitor | awk <span class="string">&#x27;&#123;print $2&#125;&#x27;</span> | xargs <span class="built_in">kill</span></span><br></pre></td></tr></table></figure>

<p>Show the running time   </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ps -o etime= -p <span class="variable">$pid</span></span><br></pre></td></tr></table></figure>

<p>Sort processes    </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ps -eo pid,ppid,<span class="built_in">comm</span> --<span class="built_in">sort</span> pid</span><br></pre></td></tr></table></figure>

<p>kill with the child process   </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">kill</span> $(pgrep -P <span class="variable">$parent_pid</span>)</span><br><span class="line">pkill -9 -P <span class="variable">$parent_pid</span></span><br></pre></td></tr></table></figure>

<h3 id="bash-case"><a href="#bash-case" class="headerlink" title="bash case"></a><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/4554718/how-to-use-patterns-in-a-case-statement">bash case</a></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">shopt</span> -s extglob</span><br><span class="line"><span class="keyword">for</span> arg <span class="keyword">in</span> apple be <span class="built_in">cd</span> meet o mississippi</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="comment"># call functions based on arguments</span></span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;<span class="variable">$arg</span>&quot;</span> <span class="keyword">in</span></span><br><span class="line">        a*             ) foo;;    <span class="comment"># matches anything starting with &quot;a&quot;</span></span><br><span class="line">        b?             ) bar;;    <span class="comment"># matches any two-character string starting with &quot;b&quot;</span></span><br><span class="line">        c[de]          ) baz;;    <span class="comment"># matches &quot;cd&quot; or &quot;ce&quot;</span></span><br><span class="line">        me?(e)t        ) qux;;    <span class="comment"># matches &quot;met&quot; or &quot;meet&quot;</span></span><br><span class="line">        @(a|e|i|o|u)   ) fuzz;;   <span class="comment"># matches one vowel</span></span><br><span class="line">        m+(iss)?(ippi) ) fizz;;   <span class="comment"># matches &quot;miss&quot; or &quot;mississippi&quot; or others</span></span><br><span class="line">        *              ) bazinga;; <span class="comment"># catchall, matches anything not matched above</span></span><br><span class="line">    <span class="keyword">esac</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

  </div>
</article>


    <div class="blog-post-comments">
        <div id="utterances_thread">
            <noscript>Please enable JavaScript to view the comments.</noscript>
        </div>
    </div>


        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a target="_blank" rel="noopener" href="http://github.com/probberechts">Projects</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#bash-env-ENV-set"><span class="toc-number">1.</span> <span class="toc-text">bash env ENV set</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#arguments"><span class="toc-number">1.1.</span> <span class="toc-text">arguments</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#logic"><span class="toc-number">1.2.</span> <span class="toc-text">logic</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#sort"><span class="toc-number">1.3.</span> <span class="toc-text">sort</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#man-page-setting"><span class="toc-number">1.4.</span> <span class="toc-text">man page setting</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#eval"><span class="toc-number">1.5.</span> <span class="toc-text">eval</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#bash-auto-input-in-the-cmd-like-expect"><span class="toc-number">2.</span> <span class="toc-text">bash auto input in the cmd, like expect</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#function-FUNCTION"><span class="toc-number">3.</span> <span class="toc-text">function FUNCTION</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#return-value"><span class="toc-number">3.1.</span> <span class="toc-text">return value</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#multiple-background-process-in-bash-and-got-the-return-code"><span class="toc-number">3.2.</span> <span class="toc-text">multiple background process in bash and got the return code</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#bash-function-return-string"><span class="toc-number">3.3.</span> <span class="toc-text">bash function return string</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#grep-GREP"><span class="toc-number">4.</span> <span class="toc-text">grep GREP</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#grep-show-the-match-number-in-single-line"><span class="toc-number">4.1.</span> <span class="toc-text">grep show the match number in single line</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#grep-2-more-more-blank"><span class="toc-number">4.2.</span> <span class="toc-text">grep 2 more more blank</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SSH-ssh"><span class="toc-number">5.</span> <span class="toc-text">SSH ssh</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Parallel-ssh"><span class="toc-number">5.1.</span> <span class="toc-text">Parallel ssh</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Background-exec-script-by-ssh"><span class="toc-number">5.2.</span> <span class="toc-text">Background exec script by ssh</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#output-ssh-script"><span class="toc-number">5.3.</span> <span class="toc-text">output ssh script</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#double-quotes-single-quotes"><span class="toc-number">5.4.</span> <span class="toc-text">double-quotes, single-quotes</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ssh-share-parameter-by-echo-output"><span class="toc-number">5.5.</span> <span class="toc-text">ssh share parameter by echo output</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ssh-command-hang"><span class="toc-number">5.6.</span> <span class="toc-text">ssh command hang</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#remove-name-begin-with-%E2%80%9C-%E2%80%9C"><span class="toc-number">5.7.</span> <span class="toc-text">remove name begin with “-“</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#test"><span class="toc-number">6.</span> <span class="toc-text">test</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#test-the-variable-is-numeric"><span class="toc-number">6.1.</span> <span class="toc-text">test the variable is numeric</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#is-a-integer"><span class="toc-number">6.2.</span> <span class="toc-text">is a integer</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#STRING"><span class="toc-number">7.</span> <span class="toc-text">STRING</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ARRAY"><span class="toc-number">8.</span> <span class="toc-text">ARRAY</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Normal-Array"><span class="toc-number">8.1.</span> <span class="toc-text">Normal Array</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Associative-ARRAY"><span class="toc-number">8.2.</span> <span class="toc-text">Associative ARRAY</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Wait-sub-process-finish"><span class="toc-number">9.</span> <span class="toc-text">Wait sub process finish</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SED"><span class="toc-number">10.</span> <span class="toc-text">SED</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Get-bash-variable"><span class="toc-number">10.1.</span> <span class="toc-text">Get bash variable</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#print-line-from-16224-to-16482"><span class="toc-number">10.2.</span> <span class="toc-text">print line from 16224 to 16482</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#bash-set"><span class="toc-number">11.</span> <span class="toc-text">[bash set]</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#IFS"><span class="toc-number">11.1.</span> <span class="toc-text">IFS</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Ternary-conditional-operator"><span class="toc-number">11.2.</span> <span class="toc-text">Ternary conditional operator</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#bash-double-quotes-single-quotes"><span class="toc-number">12.</span> <span class="toc-text">bash double-quotes, single-quotes</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#bash-replace-expect-script"><span class="toc-number">13.</span> <span class="toc-text">bash replace expect script</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#multiple-background-process-in-bash-and-got-the-return-code-1"><span class="toc-number">14.</span> <span class="toc-text">multiple background process in bash and got the return code</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#bash-background-array-variable"><span class="toc-number">15.</span> <span class="toc-text">bash background array variable</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ssh-remote-exec-command"><span class="toc-number">16.</span> <span class="toc-text">ssh remote exec command</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#single-command-jump-2-nodes"><span class="toc-number">16.1.</span> <span class="toc-text">single command jump 2 nodes</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#remove-name-begin-with-%E2%80%9C-%E2%80%9C-1"><span class="toc-number">17.</span> <span class="toc-text">remove name begin with “-“</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#IFS-1"><span class="toc-number">18.</span> <span class="toc-text">IFS</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#GAWK"><span class="toc-number">19.</span> <span class="toc-text">GAWK</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Issues"><span class="toc-number">19.1.</span> <span class="toc-text">Issues</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#to-binary-num"><span class="toc-number">19.2.</span> <span class="toc-text">to binary num</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Matrix-sum"><span class="toc-number">19.3.</span> <span class="toc-text">Matrix sum</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#append-string"><span class="toc-number">19.4.</span> <span class="toc-text">append string</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Bit-Manipulation-Functions"><span class="toc-number">19.5.</span> <span class="toc-text">Bit-Manipulation Functions</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#split-func"><span class="toc-number">19.6.</span> <span class="toc-text">split func</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#max-and-min"><span class="toc-number">19.7.</span> <span class="toc-text">max and min</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#percent-to-int"><span class="toc-number">19.8.</span> <span class="toc-text">percent to int</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#replace-square-brackets"><span class="toc-number">19.9.</span> <span class="toc-text">replace square brackets</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#match-bash-variable"><span class="toc-number">19.10.</span> <span class="toc-text">match bash variable</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Set-awk-env"><span class="toc-number">19.11.</span> <span class="toc-text">Set awk env</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#write-file-in-awk"><span class="toc-number">19.12.</span> <span class="toc-text">write file in awk</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Sort-array-by-awk"><span class="toc-number">19.13.</span> <span class="toc-text">Sort array by awk</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Found-2-files-diff"><span class="toc-number">19.14.</span> <span class="toc-text">Found 2 files diff</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#match-ip-addr"><span class="toc-number">19.15.</span> <span class="toc-text">match ip addr</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#print-the-last-char"><span class="toc-number">19.16.</span> <span class="toc-text">print the last char</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#awk-print-terminal-bell"><span class="toc-number">19.17.</span> <span class="toc-text">awk print terminal bell</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#awk-single-quote"><span class="toc-number">19.18.</span> <span class="toc-text">awk single quote</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#awk-percent"><span class="toc-number">19.19.</span> <span class="toc-text">awk percent</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#IGONE-CASE"><span class="toc-number">19.20.</span> <span class="toc-text">IGONE CASE</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#field-delimiter-%E2%80%9C-%E2%80%9D"><span class="toc-number">19.21.</span> <span class="toc-text">field delimiter &#x3D; “|”</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#only-match-number-in-a-string"><span class="toc-number">19.22.</span> <span class="toc-text">only match number in a string</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#logarithm-in-awk"><span class="toc-number">19.23.</span> <span class="toc-text">logarithm in awk</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#sort-and-uniq"><span class="toc-number">19.24.</span> <span class="toc-text">sort and uniq</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#reformat-print-output-by-OFMT"><span class="toc-number">19.25.</span> <span class="toc-text">reformat print output by OFMT</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#match-matching-left-bracket"><span class="toc-number">19.26.</span> <span class="toc-text">match matching left bracket</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#single-character-fields"><span class="toc-number">19.27.</span> <span class="toc-text">single character fields</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#filter"><span class="toc-number">19.28.</span> <span class="toc-text">filter</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#awk-match-bash-variable"><span class="toc-number">19.29.</span> <span class="toc-text">awk match bash variable</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#awk-sort-key-and-value"><span class="toc-number">19.30.</span> <span class="toc-text">awk sort key and value</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#match-and"><span class="toc-number">19.31.</span> <span class="toc-text">match &lt; and &#x2F;</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#convert-to-int"><span class="toc-number">19.32.</span> <span class="toc-text">convert to int</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#remove-new-line-characters-from-the-middle-of-a-field"><span class="toc-number">19.33.</span> <span class="toc-text">remove new line characters from the middle of a field</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#awk-statement-%E2%80%9Cnext%E2%80%9D-bash-continue"><span class="toc-number">19.34.</span> <span class="toc-text">awk statement “next” &#x3D; bash continue</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Termination-Signals-https-www-gnu-org-software-libc-manual-html-node-Termination-Signals-html"><span class="toc-number">20.</span> <span class="toc-text">[Termination Signals] (https:&#x2F;&#x2F;www.gnu.org&#x2F;software&#x2F;libc&#x2F;manual&#x2F;html_node&#x2F;Termination-Signals.html)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#trap-TRAP"><span class="toc-number">20.1.</span> <span class="toc-text">trap TRAP</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#sub-shell-error-handler"><span class="toc-number">20.2.</span> <span class="toc-text">sub shell error handler</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Random-RANDOM-random"><span class="toc-number">21.</span> <span class="toc-text">Random RANDOM random</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#number"><span class="toc-number">21.1.</span> <span class="toc-text">number</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#tr-get-scsi-serial-number-by-bash"><span class="toc-number">22.</span> <span class="toc-text">tr get scsi serial number by bash</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#print-last-colume"><span class="toc-number">22.1.</span> <span class="toc-text">print last colume</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Get-parent-id-info"><span class="toc-number">23.</span> <span class="toc-text">Get parent id info</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#change-ssh-cipher-with-rsync"><span class="toc-number">24.</span> <span class="toc-text">change ssh cipher with rsync</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Create-sparse-file"><span class="toc-number">25.</span> <span class="toc-text">Create sparse file</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Num-convert"><span class="toc-number">26.</span> <span class="toc-text">Num convert</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Two%E2%80%99s-Complement-and-the-negative-number"><span class="toc-number">26.1.</span> <span class="toc-text">Two’s Complement and the negative number</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#hex-to-ip-addr-ipv4"><span class="toc-number">26.2.</span> <span class="toc-text">hex to ip addr (ipv4)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#bitwise"><span class="toc-number">26.3.</span> <span class="toc-text">bitwise</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Integer-ASCII-value-to-character"><span class="toc-number">26.4.</span> <span class="toc-text">Integer ASCII value to character</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#xargs"><span class="toc-number">27.</span> <span class="toc-text">xargs</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#taskset"><span class="toc-number">28.</span> <span class="toc-text">taskset</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#stat"><span class="toc-number">29.</span> <span class="toc-text">stat</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#dd"><span class="toc-number">30.</span> <span class="toc-text">dd</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#parallel"><span class="toc-number">31.</span> <span class="toc-text">parallel</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Pipe-single-big-file"><span class="toc-number">31.1.</span> <span class="toc-text">Pipe single big file</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#For-multiple-files"><span class="toc-number">31.2.</span> <span class="toc-text">For multiple files</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Get-parameter"><span class="toc-number">31.3.</span> <span class="toc-text">Get parameter</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#tee"><span class="toc-number">32.</span> <span class="toc-text">tee</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Merge-the-bash-script-with-file"><span class="toc-number">33.</span> <span class="toc-text">Merge the bash script with file</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E2%80%9C-%E2%80%9C-means-read-the-standard-ouput"><span class="toc-number">34.</span> <span class="toc-text">“-“ means read the standard ouput</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#jira-text-syntax"><span class="toc-number">35.</span> <span class="toc-text">jira text syntax</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#parallel-bash"><span class="toc-number">36.</span> <span class="toc-text">parallel bash</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#seq-number"><span class="toc-number">37.</span> <span class="toc-text">seq number</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#absolute-value"><span class="toc-number">38.</span> <span class="toc-text">absolute value</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#file-descriptors"><span class="toc-number">39.</span> <span class="toc-text">file descriptors</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#date-convert-date-cmd"><span class="toc-number">40.</span> <span class="toc-text">date convert date cmd</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#dd-cmd"><span class="toc-number">41.</span> <span class="toc-text">dd cmd</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Background-exec-script-by-ssh-1"><span class="toc-number">42.</span> <span class="toc-text">Background exec script by ssh</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#remove-name-begin-with-%E2%80%9C-%E2%80%9C-2"><span class="toc-number">43.</span> <span class="toc-text">remove name begin with “-“</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#bash-double-quotes-single-quotes-1"><span class="toc-number">44.</span> <span class="toc-text">bash double-quotes, single-quotes</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#bash-input-char-in-cli"><span class="toc-number">45.</span> <span class="toc-text">bash input char in cli</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#multiple-background-process-in-bash-and-got-the-return-code-2"><span class="toc-number">46.</span> <span class="toc-text">multiple background process in bash and got the return code</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#bash-background-array-variable-1"><span class="toc-number">47.</span> <span class="toc-text">bash background array variable</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#test-match"><span class="toc-number">48.</span> <span class="toc-text">test match</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#is-a-integer-1"><span class="toc-number">48.1.</span> <span class="toc-text">is a integer</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#process"><span class="toc-number">49.</span> <span class="toc-text">process</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#bash-case"><span class="toc-number">50.</span> <span class="toc-text">bash case</span></a></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=http://example.com/2018/12/11/bash/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=http://example.com/2018/12/11/bash/&text=Bash tips"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=http://example.com/2018/12/11/bash/&title=Bash tips"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=http://example.com/2018/12/11/bash/&is_video=false&description=Bash tips"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Bash tips&body=Check out this article: http://example.com/2018/12/11/bash/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=http://example.com/2018/12/11/bash/&title=Bash tips"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=http://example.com/2018/12/11/bash/&title=Bash tips"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=http://example.com/2018/12/11/bash/&title=Bash tips"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=http://example.com/2018/12/11/bash/&title=Bash tips"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=http://example.com/2018/12/11/bash/&name=Bash tips&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=http://example.com/2018/12/11/bash/&t=Bash tips"><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> Share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy;
    
    
    2016-2024
    John Doe
  </div>
  <div class="footer-right">
    <nav>
      <ul>
        <!--
       --><li><a href="/">Home</a></li><!--
     --><!--
       --><li><a href="/about/">About</a></li><!--
     --><!--
       --><li><a href="/archives/">Writing</a></li><!--
     --><!--
       --><li><a target="_blank" rel="noopener" href="http://github.com/probberechts">Projects</a></li><!--
     -->
      </ul>
    </nav>
  </div>
</footer>

    </div>
    <!-- styles -->



  <link rel="preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css" crossorigin="anonymous" onload="this.onload=null;this.rel='stylesheet'"/>


    <!-- jquery -->
 
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" crossorigin="anonymous"></script> 




<!-- clipboard -->

  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.7/clipboard.min.js" crossorigin="anonymous"></script> 
  
  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"Copy to clipboard!\">";
    btn += '<i class="far fa-clone"></i>';
    btn += '</span>'; 
    // mount it!
    $(".highlight table").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      text: function(trigger) {
        return Array.from(trigger.nextElementSibling.querySelectorAll('.code')).reduce((str,it)=>str+it.innerText+'\n','')
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "Copied!");
      e.clearSelection();
    })
  })
  </script>


<script src="/js/main.js"></script>

<!-- search -->

<!-- Google Analytics -->

<!-- Baidu Analytics -->

<!-- Cloudflare Analytics -->

<!-- Umami Analytics -->

<!-- Disqus Comments -->

<!-- utterances Comments -->

    <script type="text/javascript">
      var utterances_repo = '67e8c052/67e8c052.github.io';
      var utterances_issue_term = 'pathname';
      var utterances_label = 'blog-comments';
      var utterances_theme = 'github-dark';

      (function(){
          var script = document.createElement('script');

          script.src = 'https://utteranc.es/client.js';
          script.setAttribute('repo', utterances_repo);
          script.setAttribute('issue-term', 'pathname');
          script.setAttribute('label', utterances_label);
          script.setAttribute('theme', utterances_theme);
          script.setAttribute('crossorigin', 'anonymous');
          script.async = true;
          (document.getElementById('utterances_thread')).appendChild(script);
      }());
  </script>

</body>
</html>
