<!DOCTYPE html>
<html lang=en>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5" />
    <meta name="description" content="Get all variables for this group12345678ansible test -m setup#flush cacheansible-playbook -i inventory helloworld.yaml --flush-cache#parameter logicTrue &#x3D; yes &#x3D; Yes &#x3D; number &gt; 0 ;  when : True be w">
<meta property="og:type" content="article">
<meta property="og:title" content="Ansible">
<meta property="og:url" content="http://example.com/2018/04/12/ansible/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="Get all variables for this group12345678ansible test -m setup#flush cacheansible-playbook -i inventory helloworld.yaml --flush-cache#parameter logicTrue &#x3D; yes &#x3D; Yes &#x3D; number &gt; 0 ;  when : True be w">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2018-04-12T07:23:03.000Z">
<meta property="article:modified_time" content="2023-02-28T09:49:50.582Z">
<meta property="article:author" content="John Doe">
<meta property="article:tag" content="ansible">
<meta name="twitter:card" content="summary">
    
    
      
        
          <link rel="shortcut icon" href="/images/favicon.ico">
        
      
      
        
          <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
        
      
      
        
          <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
        
      
    
    <!-- title -->
    <title>Ansible</title>
    <!-- styles -->
    
<link rel="stylesheet" href="/css/style.css">

    <!-- persian styles -->
    
    <!-- rss -->
    
    
	<!-- mathjax -->
	
<meta name="generator" content="Hexo 6.3.0"></head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#" aria-label="Menu"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#" aria-label="Menu"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" aria-label="Top" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
        <!--
       --><li><a href="/">Home</a></li><!--
     --><!--
       --><li><a href="/about/">About</a></li><!--
     --><!--
       --><li><a href="/archives/">Writing</a></li><!--
     --><!--
       --><li><a target="_blank" rel="noopener" href="http://github.com/probberechts">Projects</a></li><!--
     -->
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" aria-label="Previous post" href="/2018/07/29/pcie/"><i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" aria-label="Next post" href="/2017/11/21/linux_calls/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" aria-label="Back to top" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" aria-label="Share post" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=http://example.com/2018/04/12/ansible/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=http://example.com/2018/04/12/ansible/&text=Ansible"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=http://example.com/2018/04/12/ansible/&title=Ansible"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=http://example.com/2018/04/12/ansible/&is_video=false&description=Ansible"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Ansible&body=Check out this article: http://example.com/2018/04/12/ansible/"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=http://example.com/2018/04/12/ansible/&title=Ansible"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=http://example.com/2018/04/12/ansible/&title=Ansible"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=http://example.com/2018/04/12/ansible/&title=Ansible"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=http://example.com/2018/04/12/ansible/&title=Ansible"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=http://example.com/2018/04/12/ansible/&name=Ansible&description=&lt;h3 id=&#34;Get-all-variables-for-this-group&#34;&gt;&lt;a href=&#34;#Get-all-variables-for-this-group&#34; class=&#34;headerlink&#34; title=&#34;Get all variables for this group&#34;&gt;&lt;/a&gt;Get all variables for this group&lt;/h3&gt;&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;ansible &lt;span class=&#34;built_in&#34;&gt;test&lt;/span&gt; -m setup&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;#flush cache&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;ansible-playbook -i inventory helloworld.yaml --flush-cache&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;#parameter logic&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;True = &lt;span class=&#34;built_in&#34;&gt;yes&lt;/span&gt; = Yes = number &amp;gt; 0 ;  when : True be worked,  When : the_para &lt;span class=&#34;comment&#34;&gt;# default means &amp;gt;0&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;False = no = No = number &amp;lt;= 0 ;  when : The_para &amp;lt; 0 == when : False ; skip&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h3 id=&#34;debug-variable&#34;&gt;&lt;a href=&#34;#debug-variable&#34; class=&#34;headerlink&#34; title=&#34;debug variable&#34;&gt;&lt;/a&gt;debug variable&lt;/h3&gt;&lt;p&gt;&lt;a href=&#34;https://github.com/ansible/ansible/issues/23675&#34;&gt;conditional is defined fails to capture undefined var&lt;/a&gt;&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;55&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;#match or not match&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;when: nginxVersion.stdout != &lt;span class=&#34;string&#34;&gt;&amp;#x27;nginx version: nginx/1.8.0&amp;#x27;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;or&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;when: &lt;span class=&#34;string&#34;&gt;&amp;#x27;&amp;quot;nginx version: nginx/1.8.0&amp;quot; not in nginxVersion.stdout&amp;#x27;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;- name: Make sure OS version&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  fail: msg=&lt;span class=&#34;string&#34;&gt;&amp;quot;Must be large than RHEL/CentOS 7&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  when: ansible_distribution_major_version|int == 7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;$ &lt;span class=&#34;built_in&#34;&gt;cat&lt;/span&gt; main.yml&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;- include: centos_el7.yml&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  when: ansible_os_family == &lt;span class=&#34;string&#34;&gt;&amp;quot;RedHat&amp;quot;&lt;/span&gt; and ansible_distribution_major_version == &lt;span class=&#34;string&#34;&gt;&amp;#x27;7&amp;#x27;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;- include: alma_el8.yml&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  when: ansible_os_family == &lt;span class=&#34;string&#34;&gt;&amp;quot;RedHat&amp;quot;&lt;/span&gt; and ansible_distribution_major_version == &lt;span class=&#34;string&#34;&gt;&amp;#x27;8&amp;#x27;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;when: &lt;span class=&#34;string&#34;&gt;&amp;quot;&amp;#x27;amd&amp;#x27; in ansible_processor|lower and ansible_distribution_major_version|int == 7&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;when: &amp;quot;&lt;/span&gt;&amp;#123;&amp;#123; item &amp;#125;&amp;#125; is defined or xxx&lt;span class=&#34;string&#34;&gt;&amp;quot; ## looks like the &amp;quot;&lt;/span&gt;or&lt;span class=&#34;string&#34;&gt;&amp;quot; cound help you&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;when: &amp;quot;&lt;/span&gt;&amp;#123;&amp;#123; item &amp;#125;&amp;#125; is not defined&lt;span class=&#34;string&#34;&gt;&amp;quot; ## looks like the &amp;quot;&lt;/span&gt;not&lt;span class=&#34;string&#34;&gt;&amp;quot; could not work well&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;- name: Get the kernel module version&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;  shell: modinfo mpt3sas&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;  register: mpt3sas_ver&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;  ignore_errors: true&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;  tags:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;    - test_install&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;- name: output mpt3sas_ver&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;  debug: var=mpt3sas_ver&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;#I resolved this for my usage with adding a combo:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;when:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;    - variable is defined&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;    - variable != &amp;quot;&lt;/span&gt;&lt;span class=&#34;string&#34;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;#resloved This has been resolved by #56116 and will be included in the 2.14 release in Nov 2022.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;- hosts: localhost&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;  gather_facts: false&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;  vars:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;    thing: &amp;quot;&lt;/span&gt;&amp;#123;&amp;#123; other &amp;#125;&amp;#125;&lt;span class=&#34;string&#34;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;  tasks:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;    - debug:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;        var: thing&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;      when: thing is defined&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;output:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;PLAY [localhost] ***************************************************************&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;TASK [debug] *******************************************************************&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;skipping: [localhost]&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;PLAY RECAP *********************************************************************&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;localhost                  : ok=0    changed=0    unreachable=0    failed=0    skipped=1    rescued=0    ignored&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h3 id=&#34;multiple-when-condition&#34;&gt;&lt;a href=&#34;#multiple-when-condition&#34; class=&#34;headerlink&#34; title=&#34;multiple when condition&#34;&gt;&lt;/a&gt;&lt;a href=&#34;https://github.com/ansible/ansible/issues/22397&#34;&gt;multiple when condition&lt;/a&gt;&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;True&lt;ul&gt;
&lt;li&gt;Any positeve number &amp;gt;0: 1,2&lt;/li&gt;
&lt;li&gt;Non-empty string: “1”, “True”,”False”,’Nonsence’&lt;/li&gt;
&lt;li&gt;Boolean value (unquoted): True,true&lt;/li&gt;
&lt;li&gt;Ansible-specific (case-agnostic): Yes,yes&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;False&lt;ul&gt;
&lt;li&gt;Any number &amp;lt;&amp;#x3D;0: 0,-1 ..&lt;/li&gt;
&lt;li&gt;Empty string: “”, ‘’&lt;/li&gt;
&lt;li&gt;Boolean value (unquoted): False,false&lt;/li&gt;
&lt;li&gt;Ansible-specific (case-agnostic): No,no&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;force_install :&lt;span class=&#34;built_in&#34;&gt;yes&lt;/span&gt; &lt;span class=&#34;comment&#34;&gt;# define in group_var/test&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;when: &lt;span class=&#34;string&#34;&gt;&amp;quot;(system_type is match(&amp;#x27;your_key_word&amp;#x27;) and (megaraid_version.rc != 0 or mpt3sas_ver.rc != 0)) or (system_ty pe is match(&amp;#x27;your_key_word&amp;#x27;) and force_install)&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;# right&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  when: (shell_output is defined or shell_output.rc &amp;gt; 0) and (ansible_distribution_major_version == &lt;span class=&#34;string&#34;&gt;&amp;#x27;7&amp;#x27;&lt;/span&gt; and reinstall)&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;# wrong&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  when: (shell_output is defined or &lt;span class=&#34;string&#34;&gt;&amp;quot;shell_output.rc &amp;gt; 0&amp;quot;&lt;/span&gt;) or (ansible_distribution_major_version == &lt;span class=&#34;string&#34;&gt;&amp;#x27;7&amp;#x27;&lt;/span&gt; and reinstall)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h4 id=&#34;Got-NIC-info&#34;&gt;&lt;a href=&#34;#Got-NIC-info&#34; class=&#34;headerlink&#34; title=&#34;Got NIC info&#34;&gt;&lt;/a&gt;Got NIC info&lt;/h4&gt;&lt;figure class=&#34;highlight json&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;68&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;69&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;70&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;71&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;72&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;73&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;74&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;75&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;76&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;77&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;78&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;79&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;80&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;81&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;82&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;83&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;84&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;85&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;86&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;87&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;88&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;89&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;90&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;91&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;92&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;93&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;94&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;95&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;96&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;97&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;98&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;99&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;100&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;101&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;102&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;103&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;104&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;105&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;106&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;107&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;108&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;109&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;110&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;111&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;112&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;113&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;114&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;115&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;116&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;117&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;118&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;119&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;120&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;121&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;122&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;123&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;124&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;125&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;126&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;127&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;128&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;129&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;130&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;131&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;132&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;133&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;134&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;135&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;cat ../../host_vars/&lt;span class=&#34;number&#34;&gt;192.168&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.8&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.2&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;network_bond_interfaces&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt; - device&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; bond0&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;   address&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;number&#34;&gt;192.168&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.1&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.2&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;   netmask&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;number&#34;&gt;225.255&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.225&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.0&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;   gateway&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;number&#34;&gt;192.168&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.1&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;   bootproto&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; static&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;   bond_mode&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;number&#34;&gt;4&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;   bond_miimon&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;number&#34;&gt;1000&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;   bond_slaves&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;punctuation&#34;&gt;[&lt;/span&gt;enp1s0f0&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt;enp1s0f1&lt;span class=&#34;punctuation&#34;&gt;]&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;network_ether_interfaces&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt; - device&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; eno1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;   bootproto&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; static&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;   address&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;number&#34;&gt;192.168&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.1&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.20&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;   netmask&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;number&#34;&gt;255.255&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.0&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.0&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;   route&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    - network&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;number&#34;&gt;192.168&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.200&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.0&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;      netmask&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;number&#34;&gt;24&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;      gateway&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;number&#34;&gt;192.168&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.200&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    - network&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;number&#34;&gt;192.168&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.100&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.0&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;      netmask&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;number&#34;&gt;24&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;      gateway&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;number&#34;&gt;192.168&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.100&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt; - device&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; eno2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;   bootproto&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; static&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;   address&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;number&#34;&gt;192.168&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.1&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.21&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;   netmask&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;number&#34;&gt;255.255&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.0&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.0&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;   route&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    - network&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;number&#34;&gt;192.168&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.200&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.0&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;      netmask&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;number&#34;&gt;24&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;      gateway&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;number&#34;&gt;192.168&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.200&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.2&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    - network&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;number&#34;&gt;192.168&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.100&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.0&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;      netmask&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;number&#34;&gt;24&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;      gateway&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;number&#34;&gt;192.168&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.100&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.2&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;- debug&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    msg&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    - &lt;span class=&#34;string&#34;&gt;&amp;quot;&amp;#123;&amp;#123; network_bond_interfaces &amp;#125;&amp;#125;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;- debug&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    msg&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    - &lt;span class=&#34;string&#34;&gt;&amp;quot;&amp;#123;&amp;#123; ansible_os_family &amp;#125;&amp;#125;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    - &lt;span class=&#34;string&#34;&gt;&amp;quot;&amp;#123;&amp;#123; item.device &amp;#125;&amp;#125;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    - &lt;span class=&#34;string&#34;&gt;&amp;quot;&amp;#123;&amp;#123; item.address &amp;#125;&amp;#125;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    - &lt;span class=&#34;string&#34;&gt;&amp;quot;&amp;#123;&amp;#123; item.bond_slaves.0 &amp;#125;&amp;#125;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    - &lt;span class=&#34;string&#34;&gt;&amp;quot;&amp;#123;&amp;#123; item.bond_slaves.1 &amp;#125;&amp;#125;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    - &lt;span class=&#34;string&#34;&gt;&amp;quot;&amp;#123;&amp;#123; item.bond_slaves &amp;#125;&amp;#125;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    - &lt;span class=&#34;string&#34;&gt;&amp;quot;&amp;#123;&amp;#123; hostvars[inventory_hostname][&amp;#x27;ansible_&amp;#x27; + item.bond_slaves.0 ].macaddress &amp;#125;&amp;#125;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  with_items&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;     - &lt;span class=&#34;string&#34;&gt;&amp;quot;&amp;#123;&amp;#123; network_bond_interfaces &amp;#125;&amp;#125;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt; &lt;span class=&#34;punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;attr&#34;&gt;&amp;quot;msg&amp;quot;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;punctuation&#34;&gt;[&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &lt;span class=&#34;punctuation&#34;&gt;[&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;            &lt;span class=&#34;punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                &lt;span class=&#34;attr&#34;&gt;&amp;quot;address&amp;quot;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;&amp;quot;192.168.1.2&amp;quot;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                &lt;span class=&#34;attr&#34;&gt;&amp;quot;bond_miimon&amp;quot;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;number&#34;&gt;1000&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                &lt;span class=&#34;attr&#34;&gt;&amp;quot;bond_mode&amp;quot;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;number&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                &lt;span class=&#34;attr&#34;&gt;&amp;quot;bond_slaves&amp;quot;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;punctuation&#34;&gt;[&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                    &lt;span class=&#34;string&#34;&gt;&amp;quot;enp1s0f0&amp;quot;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                    &lt;span class=&#34;string&#34;&gt;&amp;quot;enp1s0f1&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                &lt;span class=&#34;punctuation&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                &lt;span class=&#34;attr&#34;&gt;&amp;quot;bootproto&amp;quot;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;&amp;quot;static&amp;quot;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                &lt;span class=&#34;attr&#34;&gt;&amp;quot;device&amp;quot;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;&amp;quot;bond0&amp;quot;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                &lt;span class=&#34;attr&#34;&gt;&amp;quot;gateway&amp;quot;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;&amp;quot;192.168.1.1&amp;quot;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                &lt;span class=&#34;attr&#34;&gt;&amp;quot;netmask&amp;quot;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;&amp;quot;225.255.225.0&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;            &lt;span class=&#34;punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &lt;span class=&#34;punctuation&#34;&gt;]&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;punctuation&#34;&gt;]&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;TASK &lt;span class=&#34;punctuation&#34;&gt;[&lt;/span&gt;network &lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; debug&lt;span class=&#34;punctuation&#34;&gt;]&lt;/span&gt; ************************************************************************************************************************************************************************&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;ok&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;punctuation&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;10.53&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.128&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.224&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;]&lt;/span&gt; =&amp;gt; (item=&lt;span class=&#34;punctuation&#34;&gt;&amp;#123;&lt;/span&gt;u&amp;#x27;bond_miimon&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;number&#34;&gt;1000&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt; u&amp;#x27;bond_slaves&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;punctuation&#34;&gt;[&lt;/span&gt;u&amp;#x27;enp1s0f0&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt; u&amp;#x27;enp1s0f1&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt; u&amp;#x27;bond_mode&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;number&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt; u&amp;#x27;netmask&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; u&amp;#x27;&lt;span class=&#34;number&#34;&gt;225.255&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.225&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.0&lt;/span&gt;&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt; u&amp;#x27;bootproto&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; u&amp;#x27;static&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt; u&amp;#x27;address&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; u&amp;#x27;&lt;span class=&#34;number&#34;&gt;192.168&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.1&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.2&lt;/span&gt;&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt; u&amp;#x27;device&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; u&amp;#x27;bond0&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt; u&amp;#x27;gateway&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; u&amp;#x27;&lt;span class=&#34;number&#34;&gt;192.168&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.1&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.1&lt;/span&gt;&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;&amp;#125;&lt;/span&gt;) =&amp;gt; &lt;span class=&#34;punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;attr&#34;&gt;&amp;quot;msg&amp;quot;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;punctuation&#34;&gt;[&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &lt;span class=&#34;string&#34;&gt;&amp;quot;RedHat&amp;quot;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &lt;span class=&#34;string&#34;&gt;&amp;quot;bond0&amp;quot;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &lt;span class=&#34;string&#34;&gt;&amp;quot;192.168.1.2&amp;quot;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &lt;span class=&#34;string&#34;&gt;&amp;quot;enp1s0f0&amp;quot;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &lt;span class=&#34;string&#34;&gt;&amp;quot;enp1s0f1&amp;quot;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &lt;span class=&#34;punctuation&#34;&gt;[&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;            &lt;span class=&#34;string&#34;&gt;&amp;quot;enp1s0f0&amp;quot;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;            &lt;span class=&#34;string&#34;&gt;&amp;quot;enp1s0f1&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &lt;span class=&#34;punctuation&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &lt;span class=&#34;string&#34;&gt;&amp;quot;3c:fd:fe:15:08:40&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;punctuation&#34;&gt;]&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;## create bonding&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;- name&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; Write configuration files for route configuration&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  template&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; src=route_&lt;span class=&#34;punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;&amp;#123;&lt;/span&gt; ansible_os_family &lt;span class=&#34;punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;&amp;#125;&lt;/span&gt;.j2 dest=&lt;span class=&#34;punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;&amp;#123;&lt;/span&gt; net_path &lt;span class=&#34;punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;&amp;#125;&lt;/span&gt;/route-&lt;span class=&#34;punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;&amp;#123;&lt;/span&gt; item.device &lt;span class=&#34;punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  with_items&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;     - &lt;span class=&#34;string&#34;&gt;&amp;quot;&amp;#123;&amp;#123; network_bond_interfaces &amp;#125;&amp;#125;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  when&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; network_bond_interfaces is defined and item.route is defined and ansible_os_family == &amp;#x27;RedHat&amp;#x27;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;- name&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; Create the network configuration file for slave in the bond devices&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  template&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; src=bond_slave_&lt;span class=&#34;punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;&amp;#123;&lt;/span&gt; ansible_os_family &lt;span class=&#34;punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;&amp;#125;&lt;/span&gt;.j2 dest=&lt;span class=&#34;punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;&amp;#123;&lt;/span&gt; net_path &lt;span class=&#34;punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;&amp;#125;&lt;/span&gt;/ifcfg-&lt;span class=&#34;punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;&amp;#123;&lt;/span&gt; item&lt;span class=&#34;number&#34;&gt;.1&lt;/span&gt; &lt;span class=&#34;punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  with_subelements&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;   - &lt;span class=&#34;string&#34;&gt;&amp;quot;&amp;#123;&amp;#123; network_bond_interfaces &amp;#125;&amp;#125;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;   - bond_slaves&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  when&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; network_bond_interfaces is defined&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  register&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; bond_port_result&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;- debug&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; msg=&lt;span class=&#34;string&#34;&gt;&amp;quot;&amp;#123;&amp;#123; bond_port_result &amp;#125;&amp;#125;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;- shell&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; ifdown bond_slave &lt;span class=&#34;punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;&amp;#123;&lt;/span&gt; item.item&lt;span class=&#34;number&#34;&gt;.1&lt;/span&gt; &lt;span class=&#34;punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;&amp;#125;&lt;/span&gt;; ifup &lt;span class=&#34;punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;&amp;#123;&lt;/span&gt; item.item&lt;span class=&#34;number&#34;&gt;.1&lt;/span&gt; &lt;span class=&#34;punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  with_items&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    - &lt;span class=&#34;string&#34;&gt;&amp;quot;&amp;#123;&amp;#123; bond_port_result.results &amp;#125;&amp;#125;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  when&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; network_bond_interfaces is defined and bond_slaves is defined&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  register&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; if_slave&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;- debug&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    msg&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    - &lt;span class=&#34;string&#34;&gt;&amp;quot;&amp;#123;&amp;#123; item.route.1 &amp;#125;&amp;#125;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  with_items&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;     - &lt;span class=&#34;string&#34;&gt;&amp;quot;&amp;#123;&amp;#123; network_ether_interfaces &amp;#125;&amp;#125;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt; =&amp;gt; (item=&lt;span class=&#34;punctuation&#34;&gt;&amp;#123;&lt;/span&gt;u&amp;#x27;device&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; u&amp;#x27;eno1&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt; u&amp;#x27;netmask&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; u&amp;#x27;&lt;span class=&#34;number&#34;&gt;255.255&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.0&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.0&lt;/span&gt;&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt; u&amp;#x27;bootproto&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; u&amp;#x27;static&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt; u&amp;#x27;route&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;punctuation&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;&amp;#123;&lt;/span&gt;u&amp;#x27;netmask&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;number&#34;&gt;24&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt; u&amp;#x27;network&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; u&amp;#x27;&lt;span class=&#34;number&#34;&gt;192.168&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.200&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.0&lt;/span&gt;&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt; u&amp;#x27;gateway&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; u&amp;#x27;&lt;span class=&#34;number&#34;&gt;192.168&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.200&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.1&lt;/span&gt;&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;punctuation&#34;&gt;&amp;#123;&lt;/span&gt;u&amp;#x27;netmask&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;number&#34;&gt;24&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt; u&amp;#x27;network&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; u&amp;#x27;&lt;span class=&#34;number&#34;&gt;192.168&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.100&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.0&lt;/span&gt;&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt; u&amp;#x27;gateway&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; u&amp;#x27;&lt;span class=&#34;number&#34;&gt;192.168&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.100&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.1&lt;/span&gt;&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt; u&amp;#x27;address&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; u&amp;#x27;&lt;span class=&#34;number&#34;&gt;192.168&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.1&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.20&lt;/span&gt;&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;&amp;#125;&lt;/span&gt;) =&amp;gt; &lt;span class=&#34;punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;attr&#34;&gt;&amp;quot;msg&amp;quot;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;punctuation&#34;&gt;[&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &lt;span class=&#34;punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;            &lt;span class=&#34;attr&#34;&gt;&amp;quot;gateway&amp;quot;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;&amp;quot;192.168.100.1&amp;quot;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;            &lt;span class=&#34;attr&#34;&gt;&amp;quot;netmask&amp;quot;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;number&#34;&gt;24&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;            &lt;span class=&#34;attr&#34;&gt;&amp;quot;network&amp;quot;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;&amp;quot;192.168.100.0&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &lt;span class=&#34;punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;punctuation&#34;&gt;]&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;ok&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;punctuation&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;10.53&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.128&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.224&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;]&lt;/span&gt; =&amp;gt; (item=&lt;span class=&#34;punctuation&#34;&gt;&amp;#123;&lt;/span&gt;u&amp;#x27;device&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; u&amp;#x27;eno2&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt; u&amp;#x27;netmask&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; u&amp;#x27;&lt;span class=&#34;number&#34;&gt;255.255&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.0&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.0&lt;/span&gt;&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt; u&amp;#x27;bootproto&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; u&amp;#x27;static&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt; u&amp;#x27;route&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;punctuation&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;&amp;#123;&lt;/span&gt;u&amp;#x27;netmask&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;number&#34;&gt;24&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt; u&amp;#x27;network&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; u&amp;#x27;&lt;span class=&#34;number&#34;&gt;192.168&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.200&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.0&lt;/span&gt;&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt; u&amp;#x27;gateway&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; u&amp;#x27;&lt;span class=&#34;number&#34;&gt;192.168&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.200&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.2&lt;/span&gt;&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;punctuation&#34;&gt;&amp;#123;&lt;/span&gt;u&amp;#x27;netmask&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;number&#34;&gt;24&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt; u&amp;#x27;network&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; u&amp;#x27;&lt;span class=&#34;number&#34;&gt;192.168&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.100&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.0&lt;/span&gt;&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt; u&amp;#x27;gateway&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; u&amp;#x27;&lt;span class=&#34;number&#34;&gt;192.168&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.100&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.2&lt;/span&gt;&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt; u&amp;#x27;address&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; u&amp;#x27;&lt;span class=&#34;number&#34;&gt;192.168&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.1&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.21&lt;/span&gt;&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;&amp;#125;&lt;/span&gt;) =&amp;gt; &lt;span class=&#34;punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;attr&#34;&gt;&amp;quot;msg&amp;quot;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;punctuation&#34;&gt;[&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &lt;span class=&#34;punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;            &lt;span class=&#34;attr&#34;&gt;&amp;quot;gateway&amp;quot;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;&amp;quot;192.168.100.2&amp;quot;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;            &lt;span class=&#34;attr&#34;&gt;&amp;quot;netmask&amp;quot;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;number&#34;&gt;24&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;            &lt;span class=&#34;attr&#34;&gt;&amp;quot;network&amp;quot;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;&amp;quot;192.168.100.0&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &lt;span class=&#34;punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;punctuation&#34;&gt;]&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;nmcli loading config file from centos 8&lt;/p&gt;
&lt;figure class=&#34;highlight json&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;- name&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; loading slave&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  shell&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; nmcli connection load &lt;span class=&#34;punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;&amp;#123;&lt;/span&gt; net_path &lt;span class=&#34;punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;&amp;#125;&lt;/span&gt;/ifcfg-&lt;span class=&#34;punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;&amp;#123;&lt;/span&gt; item&lt;span class=&#34;number&#34;&gt;.1&lt;/span&gt; &lt;span class=&#34;punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  with_subelements&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;   - &lt;span class=&#34;string&#34;&gt;&amp;quot;&amp;#123;&amp;#123; network_bond_interfaces &amp;#125;&amp;#125;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;   - bond_slaves&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  when&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; ansible_distribution_major_version == &lt;span class=&#34;string&#34;&gt;&amp;quot;8&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;- name&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; loading master&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  shell&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; nmcli connection load &lt;span class=&#34;punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;&amp;#123;&lt;/span&gt; net_path &lt;span class=&#34;punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;&amp;#125;&lt;/span&gt;/ifcfg-&lt;span class=&#34;punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;&amp;#123;&lt;/span&gt; item.device &lt;span class=&#34;punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  with_items&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;     - &lt;span class=&#34;string&#34;&gt;&amp;quot;&amp;#123;&amp;#123; network_bond_interfaces &amp;#125;&amp;#125;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  when&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; ansible_distribution_major_version == &lt;span class=&#34;string&#34;&gt;&amp;quot;8&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h3 id=&#34;Continue-run&#34;&gt;&lt;a href=&#34;#Continue-run&#34; class=&#34;headerlink&#34; title=&#34;Continue run&#34;&gt;&lt;/a&gt;Continue run&lt;/h3&gt;&lt;p&gt;If the modify to another format in main.yml, maybe list-tasks not work   &lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;19&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;$ &lt;span class=&#34;built_in&#34;&gt;cat&lt;/span&gt; roles/xxxx/main.yml&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;- include: centos_el7.yml&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  when: ansible_os_family == &lt;span class=&#34;string&#34;&gt;&amp;quot;RedHat&amp;quot;&lt;/span&gt; and ansible_distribution_major_version == &lt;span class=&#34;string&#34;&gt;&amp;#x27;7&amp;#x27;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;- include: alma_el8.yml&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  when: ansible_os_family == &lt;span class=&#34;string&#34;&gt;&amp;quot;RedHat&amp;quot;&lt;/span&gt; and ansible_distribution_major_version == &lt;span class=&#34;string&#34;&gt;&amp;#x27;8&amp;#x27;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;$ ansible-playbook playbook.yml --list-tasks&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;playbook: site.yml&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  play &lt;span class=&#34;comment&#34;&gt;#1 (test): test	TAGS: []&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    tasks:&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;      os_init : RHEL/CentOS version	TAGS: []&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;      os_init : Create the temp &lt;span class=&#34;built_in&#34;&gt;dir&lt;/span&gt;	TAGS: []&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;      os_init : yum install rpms	TAGS: []&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;$ ansible-playbook playbook.yml --start-at-task=&lt;span class=&#34;string&#34;&gt;&amp;quot;yum install rpms&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;$ ansible-playbook playbook.yml --step &lt;span class=&#34;comment&#34;&gt;## every step will ask you&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;"><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=http://example.com/2018/04/12/ansible/&t=Ansible"><i class="fab fa-hacker-news " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#Get-all-variables-for-this-group"><span class="toc-number">1.</span> <span class="toc-text">Get all variables for this group</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#debug-variable"><span class="toc-number">2.</span> <span class="toc-text">debug variable</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#multiple-when-condition"><span class="toc-number">3.</span> <span class="toc-text">multiple when condition</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Got-NIC-info"><span class="toc-number">3.1.</span> <span class="toc-text">Got NIC info</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Continue-run"><span class="toc-number">4.</span> <span class="toc-text">Continue run</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Custom-install-data"><span class="toc-number">5.</span> <span class="toc-text">Custom install data</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#match-the-keyword-from-a-list"><span class="toc-number">5.1.</span> <span class="toc-text">match the keyword from a list</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#localintall"><span class="toc-number">6.</span> <span class="toc-text">localintall</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#reboot"><span class="toc-number">7.</span> <span class="toc-text">reboot</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#template"><span class="toc-number">8.</span> <span class="toc-text">template</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#diff-os-version"><span class="toc-number">9.</span> <span class="toc-text">diff os version</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#add-line-to-the-begining-the-low-efficiency-in-ansible"><span class="toc-number">10.</span> <span class="toc-text">add line to the begining, the low efficiency in ansible</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ansible-return-data-struction"><span class="toc-number">11.</span> <span class="toc-text">ansible return data struction</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#template-1"><span class="toc-number">12.</span> <span class="toc-text">template</span></a></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index py4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        Ansible
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">John Doe</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2018-04-12T07:23:03.000Z" itemprop="datePublished">2018-04-12</time>
        
      
    </div>


      
    <div class="article-category">
        <i class="fas fa-archive"></i>
        <a class="category-link" href="/categories/Scripts/">Scripts</a>
    </div>


      
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link-link" href="/tags/ansible/" rel="tag">ansible</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <h3 id="Get-all-variables-for-this-group"><a href="#Get-all-variables-for-this-group" class="headerlink" title="Get all variables for this group"></a>Get all variables for this group</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ansible <span class="built_in">test</span> -m setup</span><br><span class="line"></span><br><span class="line"><span class="comment">#flush cache</span></span><br><span class="line">ansible-playbook -i inventory helloworld.yaml --flush-cache</span><br><span class="line"></span><br><span class="line"><span class="comment">#parameter logic</span></span><br><span class="line">True = <span class="built_in">yes</span> = Yes = number &gt; 0 ;  when : True be worked,  When : the_para <span class="comment"># default means &gt;0</span></span><br><span class="line">False = no = No = number &lt;= 0 ;  when : The_para &lt; 0 == when : False ; skip</span><br></pre></td></tr></table></figure>

<h3 id="debug-variable"><a href="#debug-variable" class="headerlink" title="debug variable"></a>debug variable</h3><p><a target="_blank" rel="noopener" href="https://github.com/ansible/ansible/issues/23675">conditional is defined fails to capture undefined var</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#match or not match</span></span><br><span class="line">when: nginxVersion.stdout != <span class="string">&#x27;nginx version: nginx/1.8.0&#x27;</span></span><br><span class="line">or</span><br><span class="line">when: <span class="string">&#x27;&quot;nginx version: nginx/1.8.0&quot; not in nginxVersion.stdout&#x27;</span></span><br><span class="line"></span><br><span class="line">- name: Make sure OS version</span><br><span class="line">  fail: msg=<span class="string">&quot;Must be large than RHEL/CentOS 7&quot;</span></span><br><span class="line">  when: ansible_distribution_major_version|int == 7</span><br><span class="line"></span><br><span class="line">$ <span class="built_in">cat</span> main.yml</span><br><span class="line">- include: centos_el7.yml</span><br><span class="line">  when: ansible_os_family == <span class="string">&quot;RedHat&quot;</span> and ansible_distribution_major_version == <span class="string">&#x27;7&#x27;</span></span><br><span class="line"></span><br><span class="line">- include: alma_el8.yml</span><br><span class="line">  when: ansible_os_family == <span class="string">&quot;RedHat&quot;</span> and ansible_distribution_major_version == <span class="string">&#x27;8&#x27;</span></span><br><span class="line"></span><br><span class="line">when: <span class="string">&quot;&#x27;amd&#x27; in ansible_processor|lower and ansible_distribution_major_version|int == 7</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">when: &quot;</span>&#123;&#123; item &#125;&#125; is defined or xxx<span class="string">&quot; ## looks like the &quot;</span>or<span class="string">&quot; cound help you</span></span><br><span class="line"><span class="string">when: &quot;</span>&#123;&#123; item &#125;&#125; is not defined<span class="string">&quot; ## looks like the &quot;</span>not<span class="string">&quot; could not work well</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">- name: Get the kernel module version</span></span><br><span class="line"><span class="string">  shell: modinfo mpt3sas</span></span><br><span class="line"><span class="string">  register: mpt3sas_ver</span></span><br><span class="line"><span class="string">  ignore_errors: true</span></span><br><span class="line"><span class="string">  tags:</span></span><br><span class="line"><span class="string">    - test_install</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">- name: output mpt3sas_ver</span></span><br><span class="line"><span class="string">  debug: var=mpt3sas_ver</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#I resolved this for my usage with adding a combo:</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">when:</span></span><br><span class="line"><span class="string">    - variable is defined</span></span><br><span class="line"><span class="string">    - variable != &quot;</span><span class="string">&quot;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#resloved This has been resolved by #56116 and will be included in the 2.14 release in Nov 2022.</span></span><br><span class="line"><span class="string">- hosts: localhost</span></span><br><span class="line"><span class="string">  gather_facts: false</span></span><br><span class="line"><span class="string">  vars:</span></span><br><span class="line"><span class="string">    thing: &quot;</span>&#123;&#123; other &#125;&#125;<span class="string">&quot;</span></span><br><span class="line"><span class="string">  tasks:</span></span><br><span class="line"><span class="string">    - debug:</span></span><br><span class="line"><span class="string">        var: thing</span></span><br><span class="line"><span class="string">      when: thing is defined</span></span><br><span class="line"><span class="string">output:</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">PLAY [localhost] ***************************************************************</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">TASK [debug] *******************************************************************</span></span><br><span class="line"><span class="string">skipping: [localhost]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">PLAY RECAP *********************************************************************</span></span><br><span class="line"><span class="string">localhost                  : ok=0    changed=0    unreachable=0    failed=0    skipped=1    rescued=0    ignored</span></span><br></pre></td></tr></table></figure>

<h3 id="multiple-when-condition"><a href="#multiple-when-condition" class="headerlink" title="multiple when condition"></a><a target="_blank" rel="noopener" href="https://github.com/ansible/ansible/issues/22397">multiple when condition</a></h3><ul>
<li>True<ul>
<li>Any positeve number &gt;0: 1,2</li>
<li>Non-empty string: “1”, “True”,”False”,’Nonsence’</li>
<li>Boolean value (unquoted): True,true</li>
<li>Ansible-specific (case-agnostic): Yes,yes</li>
</ul>
</li>
<li>False<ul>
<li>Any number &lt;&#x3D;0: 0,-1 ..</li>
<li>Empty string: “”, ‘’</li>
<li>Boolean value (unquoted): False,false</li>
<li>Ansible-specific (case-agnostic): No,no</li>
</ul>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">force_install :<span class="built_in">yes</span> <span class="comment"># define in group_var/test</span></span><br><span class="line">when: <span class="string">&quot;(system_type is match(&#x27;your_key_word&#x27;) and (megaraid_version.rc != 0 or mpt3sas_ver.rc != 0)) or (system_ty pe is match(&#x27;your_key_word&#x27;) and force_install)&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># right</span></span><br><span class="line">  when: (shell_output is defined or shell_output.rc &gt; 0) and (ansible_distribution_major_version == <span class="string">&#x27;7&#x27;</span> and reinstall)</span><br><span class="line"></span><br><span class="line"><span class="comment"># wrong</span></span><br><span class="line">  when: (shell_output is defined or <span class="string">&quot;shell_output.rc &gt; 0&quot;</span>) or (ansible_distribution_major_version == <span class="string">&#x27;7&#x27;</span> and reinstall)</span><br></pre></td></tr></table></figure>

<h4 id="Got-NIC-info"><a href="#Got-NIC-info" class="headerlink" title="Got NIC info"></a>Got NIC info</h4><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br></pre></td><td class="code"><pre><span class="line">cat ../../host_vars/<span class="number">192.168</span><span class="number">.8</span><span class="number">.2</span></span><br><span class="line">network_bond_interfaces<span class="punctuation">:</span></span><br><span class="line"> - device<span class="punctuation">:</span> bond0</span><br><span class="line">   address<span class="punctuation">:</span> <span class="number">192.168</span><span class="number">.1</span><span class="number">.2</span></span><br><span class="line">   netmask<span class="punctuation">:</span> <span class="number">225.255</span><span class="number">.225</span><span class="number">.0</span></span><br><span class="line">   gateway<span class="punctuation">:</span> <span class="number">192.168</span><span class="number">.1</span><span class="number">.1</span></span><br><span class="line">   bootproto<span class="punctuation">:</span> static</span><br><span class="line">   bond_mode<span class="punctuation">:</span> <span class="number">4</span></span><br><span class="line">   bond_miimon<span class="punctuation">:</span> <span class="number">1000</span></span><br><span class="line">   bond_slaves<span class="punctuation">:</span> <span class="punctuation">[</span>enp1s0f0<span class="punctuation">,</span>enp1s0f1<span class="punctuation">]</span></span><br><span class="line">network_ether_interfaces<span class="punctuation">:</span></span><br><span class="line"> - device<span class="punctuation">:</span> eno1</span><br><span class="line">   bootproto<span class="punctuation">:</span> static</span><br><span class="line">   address<span class="punctuation">:</span> <span class="number">192.168</span><span class="number">.1</span><span class="number">.20</span></span><br><span class="line">   netmask<span class="punctuation">:</span> <span class="number">255.255</span><span class="number">.0</span><span class="number">.0</span></span><br><span class="line">   route<span class="punctuation">:</span></span><br><span class="line">    - network<span class="punctuation">:</span> <span class="number">192.168</span><span class="number">.200</span><span class="number">.0</span></span><br><span class="line">      netmask<span class="punctuation">:</span> <span class="number">24</span></span><br><span class="line">      gateway<span class="punctuation">:</span> <span class="number">192.168</span><span class="number">.200</span><span class="number">.1</span></span><br><span class="line">    - network<span class="punctuation">:</span> <span class="number">192.168</span><span class="number">.100</span><span class="number">.0</span></span><br><span class="line">      netmask<span class="punctuation">:</span> <span class="number">24</span></span><br><span class="line">      gateway<span class="punctuation">:</span> <span class="number">192.168</span><span class="number">.100</span><span class="number">.1</span></span><br><span class="line"> - device<span class="punctuation">:</span> eno2</span><br><span class="line">   bootproto<span class="punctuation">:</span> static</span><br><span class="line">   address<span class="punctuation">:</span> <span class="number">192.168</span><span class="number">.1</span><span class="number">.21</span></span><br><span class="line">   netmask<span class="punctuation">:</span> <span class="number">255.255</span><span class="number">.0</span><span class="number">.0</span></span><br><span class="line">   route<span class="punctuation">:</span></span><br><span class="line">    - network<span class="punctuation">:</span> <span class="number">192.168</span><span class="number">.200</span><span class="number">.0</span></span><br><span class="line">      netmask<span class="punctuation">:</span> <span class="number">24</span></span><br><span class="line">      gateway<span class="punctuation">:</span> <span class="number">192.168</span><span class="number">.200</span><span class="number">.2</span></span><br><span class="line">    - network<span class="punctuation">:</span> <span class="number">192.168</span><span class="number">.100</span><span class="number">.0</span></span><br><span class="line">      netmask<span class="punctuation">:</span> <span class="number">24</span></span><br><span class="line">      gateway<span class="punctuation">:</span> <span class="number">192.168</span><span class="number">.100</span><span class="number">.2</span></span><br><span class="line"></span><br><span class="line">- debug<span class="punctuation">:</span></span><br><span class="line">    msg<span class="punctuation">:</span></span><br><span class="line">    - <span class="string">&quot;&#123;&#123; network_bond_interfaces &#125;&#125;&quot;</span></span><br><span class="line"></span><br><span class="line">- debug<span class="punctuation">:</span></span><br><span class="line">    msg<span class="punctuation">:</span></span><br><span class="line">    - <span class="string">&quot;&#123;&#123; ansible_os_family &#125;&#125;&quot;</span></span><br><span class="line">    - <span class="string">&quot;&#123;&#123; item.device &#125;&#125;&quot;</span></span><br><span class="line">    - <span class="string">&quot;&#123;&#123; item.address &#125;&#125;&quot;</span></span><br><span class="line">    - <span class="string">&quot;&#123;&#123; item.bond_slaves.0 &#125;&#125;&quot;</span></span><br><span class="line">    - <span class="string">&quot;&#123;&#123; item.bond_slaves.1 &#125;&#125;&quot;</span></span><br><span class="line">    - <span class="string">&quot;&#123;&#123; item.bond_slaves &#125;&#125;&quot;</span></span><br><span class="line">    - <span class="string">&quot;&#123;&#123; hostvars[inventory_hostname][&#x27;ansible_&#x27; + item.bond_slaves.0 ].macaddress &#125;&#125;&quot;</span></span><br><span class="line">  with_items<span class="punctuation">:</span></span><br><span class="line">     - <span class="string">&quot;&#123;&#123; network_bond_interfaces &#125;&#125;&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;msg&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">[</span></span><br><span class="line">            <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;address&quot;</span><span class="punctuation">:</span> <span class="string">&quot;192.168.1.2&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;bond_miimon&quot;</span><span class="punctuation">:</span> <span class="number">1000</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;bond_mode&quot;</span><span class="punctuation">:</span> <span class="number">4</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;bond_slaves&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                    <span class="string">&quot;enp1s0f0&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="string">&quot;enp1s0f1&quot;</span></span><br><span class="line">                <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;bootproto&quot;</span><span class="punctuation">:</span> <span class="string">&quot;static&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;device&quot;</span><span class="punctuation">:</span> <span class="string">&quot;bond0&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;gateway&quot;</span><span class="punctuation">:</span> <span class="string">&quot;192.168.1.1&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;netmask&quot;</span><span class="punctuation">:</span> <span class="string">&quot;225.255.225.0&quot;</span></span><br><span class="line">            <span class="punctuation">&#125;</span></span><br><span class="line">        <span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br><span class="line">TASK <span class="punctuation">[</span>network <span class="punctuation">:</span> debug<span class="punctuation">]</span> ************************************************************************************************************************************************************************</span><br><span class="line">ok<span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">10.53</span><span class="number">.128</span><span class="number">.224</span><span class="punctuation">]</span> =&gt; (item=<span class="punctuation">&#123;</span>u&#x27;bond_miimon&#x27;<span class="punctuation">:</span> <span class="number">1000</span><span class="punctuation">,</span> u&#x27;bond_slaves&#x27;<span class="punctuation">:</span> <span class="punctuation">[</span>u&#x27;enp1s0f0&#x27;<span class="punctuation">,</span> u&#x27;enp1s0f1&#x27;<span class="punctuation">]</span><span class="punctuation">,</span> u&#x27;bond_mode&#x27;<span class="punctuation">:</span> <span class="number">4</span><span class="punctuation">,</span> u&#x27;netmask&#x27;<span class="punctuation">:</span> u&#x27;<span class="number">225.255</span><span class="number">.225</span><span class="number">.0</span>&#x27;<span class="punctuation">,</span> u&#x27;bootproto&#x27;<span class="punctuation">:</span> u&#x27;static&#x27;<span class="punctuation">,</span> u&#x27;address&#x27;<span class="punctuation">:</span> u&#x27;<span class="number">192.168</span><span class="number">.1</span><span class="number">.2</span>&#x27;<span class="punctuation">,</span> u&#x27;device&#x27;<span class="punctuation">:</span> u&#x27;bond0&#x27;<span class="punctuation">,</span> u&#x27;gateway&#x27;<span class="punctuation">:</span> u&#x27;<span class="number">192.168</span><span class="number">.1</span><span class="number">.1</span>&#x27;<span class="punctuation">&#125;</span>) =&gt; <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;msg&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="string">&quot;RedHat&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;bond0&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;192.168.1.2&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;enp1s0f0&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;enp1s0f1&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">[</span></span><br><span class="line">            <span class="string">&quot;enp1s0f0&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="string">&quot;enp1s0f1&quot;</span></span><br><span class="line">        <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;3c:fd:fe:15:08:40&quot;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br><span class="line">## create bonding</span><br><span class="line">- name<span class="punctuation">:</span> Write configuration files for route configuration</span><br><span class="line">  template<span class="punctuation">:</span> src=route_<span class="punctuation">&#123;</span><span class="punctuation">&#123;</span> ansible_os_family <span class="punctuation">&#125;</span><span class="punctuation">&#125;</span>.j2 dest=<span class="punctuation">&#123;</span><span class="punctuation">&#123;</span> net_path <span class="punctuation">&#125;</span><span class="punctuation">&#125;</span>/route-<span class="punctuation">&#123;</span><span class="punctuation">&#123;</span> item.device <span class="punctuation">&#125;</span><span class="punctuation">&#125;</span></span><br><span class="line">  with_items<span class="punctuation">:</span></span><br><span class="line">     - <span class="string">&quot;&#123;&#123; network_bond_interfaces &#125;&#125;&quot;</span></span><br><span class="line">  when<span class="punctuation">:</span> network_bond_interfaces is defined and item.route is defined and ansible_os_family == &#x27;RedHat&#x27;</span><br><span class="line"></span><br><span class="line">- name<span class="punctuation">:</span> Create the network configuration file for slave in the bond devices</span><br><span class="line">  template<span class="punctuation">:</span> src=bond_slave_<span class="punctuation">&#123;</span><span class="punctuation">&#123;</span> ansible_os_family <span class="punctuation">&#125;</span><span class="punctuation">&#125;</span>.j2 dest=<span class="punctuation">&#123;</span><span class="punctuation">&#123;</span> net_path <span class="punctuation">&#125;</span><span class="punctuation">&#125;</span>/ifcfg-<span class="punctuation">&#123;</span><span class="punctuation">&#123;</span> item<span class="number">.1</span> <span class="punctuation">&#125;</span><span class="punctuation">&#125;</span></span><br><span class="line">  with_subelements<span class="punctuation">:</span></span><br><span class="line">   - <span class="string">&quot;&#123;&#123; network_bond_interfaces &#125;&#125;&quot;</span></span><br><span class="line">   - bond_slaves</span><br><span class="line">  when<span class="punctuation">:</span> network_bond_interfaces is defined</span><br><span class="line">  register<span class="punctuation">:</span> bond_port_result</span><br><span class="line"></span><br><span class="line">- debug<span class="punctuation">:</span> msg=<span class="string">&quot;&#123;&#123; bond_port_result &#125;&#125;&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- shell<span class="punctuation">:</span> ifdown bond_slave <span class="punctuation">&#123;</span><span class="punctuation">&#123;</span> item.item<span class="number">.1</span> <span class="punctuation">&#125;</span><span class="punctuation">&#125;</span>; ifup <span class="punctuation">&#123;</span><span class="punctuation">&#123;</span> item.item<span class="number">.1</span> <span class="punctuation">&#125;</span><span class="punctuation">&#125;</span></span><br><span class="line">  with_items<span class="punctuation">:</span></span><br><span class="line">    - <span class="string">&quot;&#123;&#123; bond_port_result.results &#125;&#125;&quot;</span></span><br><span class="line">  when<span class="punctuation">:</span> network_bond_interfaces is defined and bond_slaves is defined</span><br><span class="line">  register<span class="punctuation">:</span> if_slave</span><br><span class="line"></span><br><span class="line">- debug<span class="punctuation">:</span></span><br><span class="line">    msg<span class="punctuation">:</span></span><br><span class="line">    - <span class="string">&quot;&#123;&#123; item.route.1 &#125;&#125;&quot;</span></span><br><span class="line">  with_items<span class="punctuation">:</span></span><br><span class="line">     - <span class="string">&quot;&#123;&#123; network_ether_interfaces &#125;&#125;&quot;</span></span><br><span class="line"></span><br><span class="line"> =&gt; (item=<span class="punctuation">&#123;</span>u&#x27;device&#x27;<span class="punctuation">:</span> u&#x27;eno1&#x27;<span class="punctuation">,</span> u&#x27;netmask&#x27;<span class="punctuation">:</span> u&#x27;<span class="number">255.255</span><span class="number">.0</span><span class="number">.0</span>&#x27;<span class="punctuation">,</span> u&#x27;bootproto&#x27;<span class="punctuation">:</span> u&#x27;static&#x27;<span class="punctuation">,</span> u&#x27;route&#x27;<span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">&#123;</span>u&#x27;netmask&#x27;<span class="punctuation">:</span> <span class="number">24</span><span class="punctuation">,</span> u&#x27;network&#x27;<span class="punctuation">:</span> u&#x27;<span class="number">192.168</span><span class="number">.200</span><span class="number">.0</span>&#x27;<span class="punctuation">,</span> u&#x27;gateway&#x27;<span class="punctuation">:</span> u&#x27;<span class="number">192.168</span><span class="number">.200</span><span class="number">.1</span>&#x27;<span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span>u&#x27;netmask&#x27;<span class="punctuation">:</span> <span class="number">24</span><span class="punctuation">,</span> u&#x27;network&#x27;<span class="punctuation">:</span> u&#x27;<span class="number">192.168</span><span class="number">.100</span><span class="number">.0</span>&#x27;<span class="punctuation">,</span> u&#x27;gateway&#x27;<span class="punctuation">:</span> u&#x27;<span class="number">192.168</span><span class="number">.100</span><span class="number">.1</span>&#x27;<span class="punctuation">&#125;</span><span class="punctuation">]</span><span class="punctuation">,</span> u&#x27;address&#x27;<span class="punctuation">:</span> u&#x27;<span class="number">192.168</span><span class="number">.1</span><span class="number">.20</span>&#x27;<span class="punctuation">&#125;</span>) =&gt; <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;msg&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;gateway&quot;</span><span class="punctuation">:</span> <span class="string">&quot;192.168.100.1&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;netmask&quot;</span><span class="punctuation">:</span> <span class="number">24</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;network&quot;</span><span class="punctuation">:</span> <span class="string">&quot;192.168.100.0&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line">ok<span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">10.53</span><span class="number">.128</span><span class="number">.224</span><span class="punctuation">]</span> =&gt; (item=<span class="punctuation">&#123;</span>u&#x27;device&#x27;<span class="punctuation">:</span> u&#x27;eno2&#x27;<span class="punctuation">,</span> u&#x27;netmask&#x27;<span class="punctuation">:</span> u&#x27;<span class="number">255.255</span><span class="number">.0</span><span class="number">.0</span>&#x27;<span class="punctuation">,</span> u&#x27;bootproto&#x27;<span class="punctuation">:</span> u&#x27;static&#x27;<span class="punctuation">,</span> u&#x27;route&#x27;<span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">&#123;</span>u&#x27;netmask&#x27;<span class="punctuation">:</span> <span class="number">24</span><span class="punctuation">,</span> u&#x27;network&#x27;<span class="punctuation">:</span> u&#x27;<span class="number">192.168</span><span class="number">.200</span><span class="number">.0</span>&#x27;<span class="punctuation">,</span> u&#x27;gateway&#x27;<span class="punctuation">:</span> u&#x27;<span class="number">192.168</span><span class="number">.200</span><span class="number">.2</span>&#x27;<span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span>u&#x27;netmask&#x27;<span class="punctuation">:</span> <span class="number">24</span><span class="punctuation">,</span> u&#x27;network&#x27;<span class="punctuation">:</span> u&#x27;<span class="number">192.168</span><span class="number">.100</span><span class="number">.0</span>&#x27;<span class="punctuation">,</span> u&#x27;gateway&#x27;<span class="punctuation">:</span> u&#x27;<span class="number">192.168</span><span class="number">.100</span><span class="number">.2</span>&#x27;<span class="punctuation">&#125;</span><span class="punctuation">]</span><span class="punctuation">,</span> u&#x27;address&#x27;<span class="punctuation">:</span> u&#x27;<span class="number">192.168</span><span class="number">.1</span><span class="number">.21</span>&#x27;<span class="punctuation">&#125;</span>) =&gt; <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;msg&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;gateway&quot;</span><span class="punctuation">:</span> <span class="string">&quot;192.168.100.2&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;netmask&quot;</span><span class="punctuation">:</span> <span class="number">24</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;network&quot;</span><span class="punctuation">:</span> <span class="string">&quot;192.168.100.0&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<p>nmcli loading config file from centos 8</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">- name<span class="punctuation">:</span> loading slave</span><br><span class="line">  shell<span class="punctuation">:</span> nmcli connection load <span class="punctuation">&#123;</span><span class="punctuation">&#123;</span> net_path <span class="punctuation">&#125;</span><span class="punctuation">&#125;</span>/ifcfg-<span class="punctuation">&#123;</span><span class="punctuation">&#123;</span> item<span class="number">.1</span> <span class="punctuation">&#125;</span><span class="punctuation">&#125;</span></span><br><span class="line">  with_subelements<span class="punctuation">:</span></span><br><span class="line">   - <span class="string">&quot;&#123;&#123; network_bond_interfaces &#125;&#125;&quot;</span></span><br><span class="line">   - bond_slaves</span><br><span class="line">  when<span class="punctuation">:</span> ansible_distribution_major_version == <span class="string">&quot;8&quot;</span></span><br><span class="line"></span><br><span class="line">- name<span class="punctuation">:</span> loading master</span><br><span class="line">  shell<span class="punctuation">:</span> nmcli connection load <span class="punctuation">&#123;</span><span class="punctuation">&#123;</span> net_path <span class="punctuation">&#125;</span><span class="punctuation">&#125;</span>/ifcfg-<span class="punctuation">&#123;</span><span class="punctuation">&#123;</span> item.device <span class="punctuation">&#125;</span><span class="punctuation">&#125;</span></span><br><span class="line">  with_items<span class="punctuation">:</span></span><br><span class="line">     - <span class="string">&quot;&#123;&#123; network_bond_interfaces &#125;&#125;&quot;</span></span><br><span class="line">  when<span class="punctuation">:</span> ansible_distribution_major_version == <span class="string">&quot;8&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="Continue-run"><a href="#Continue-run" class="headerlink" title="Continue run"></a>Continue run</h3><p>If the modify to another format in main.yml, maybe list-tasks not work   </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cat</span> roles/xxxx/main.yml</span><br><span class="line">- include: centos_el7.yml</span><br><span class="line">  when: ansible_os_family == <span class="string">&quot;RedHat&quot;</span> and ansible_distribution_major_version == <span class="string">&#x27;7&#x27;</span></span><br><span class="line"></span><br><span class="line">- include: alma_el8.yml</span><br><span class="line">  when: ansible_os_family == <span class="string">&quot;RedHat&quot;</span> and ansible_distribution_major_version == <span class="string">&#x27;8&#x27;</span></span><br><span class="line"></span><br><span class="line">$ ansible-playbook playbook.yml --list-tasks</span><br><span class="line">playbook: site.yml</span><br><span class="line"></span><br><span class="line">  play <span class="comment">#1 (test): test	TAGS: []</span></span><br><span class="line">    tasks:</span><br><span class="line">      os_init : RHEL/CentOS version	TAGS: []</span><br><span class="line">      os_init : Create the temp <span class="built_in">dir</span>	TAGS: []</span><br><span class="line">      os_init : yum install rpms	TAGS: []</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">$ ansible-playbook playbook.yml --start-at-task=<span class="string">&quot;yum install rpms&quot;</span></span><br><span class="line">$ ansible-playbook playbook.yml --step <span class="comment">## every step will ask you</span></span><br></pre></td></tr></table></figure>
<span id="more"></span>

<h3 id="Custom-install-data"><a href="#Custom-install-data" class="headerlink" title="Custom install data"></a>Custom install data</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cat</span> group_vars/all</span><br><span class="line"></span><br><span class="line">ieel_ver: testfs2_102</span><br><span class="line">intel_ieel:</span><br><span class="line">  ieel310:</span><br><span class="line">    testfs:</span><br><span class="line">      - ieel310/testfs-2.7.19.8-3.10.0_514.2.2.el7_testfs.x86_64.x86_64.rpm</span><br><span class="line">      - ieel310/testfs-modules-2.7.19.8-3.10.0_514.2.2.el7_testfs.x86_64.x86_64.rpm</span><br><span class="line">      - ieel310/testfs-debuginfo-2.7.19.8-3.10.0_514.2.2.el7_testfs.x86_64.x86_64.rpm</span><br><span class="line">      - ieel310/testfs-osd-ldiskfs-2.7.19.8-3.10.0_514.2.2.el7_testfs.x86_64.x86_64.rpm</span><br><span class="line">      - ieel310/testfs-osd-ldiskfs-mount-2.7.19.8-3.10.0_514.2.2.el7_testfs.x86_64.x86_64.rpm</span><br><span class="line">      - ieel310/testfs-osd-zfs-2.7.19.8-3.10.0_514.2.2.el7_testfs.x86_64.x86_64.rpm</span><br><span class="line">      - ieel310/testfs-osd-zfs-mount-2.7.19.8-3.10.0_514.2.2.el7_testfs.x86_64.x86_64.rpm</span><br><span class="line">      - ieel310/testfs-iokit-2.7.19.8-3.10.0_514.2.2.el7.x86_64.x86_64.rpm</span><br><span class="line">    zfs:</span><br><span class="line">      - ieel310/spl-0.6.5.7-1.el7.x86_64.rpm</span><br><span class="line">      - ieel310/spl-dkms-0.6.5.7-1.el7.noarch.rpm</span><br><span class="line">      - ieel310/zfs-0.6.5.7-1.el7.x86_64.rpm</span><br><span class="line">      - ieel310/libzpool2-0.6.5.7-1.el7.x86_64.rpm</span><br><span class="line">      - ieel310/libzfs2-0.6.5.7-1.el7.x86_64.rpm</span><br><span class="line">      - ieel310/libuutil1-0.6.5.7-1.el7.x86_64.rpm</span><br><span class="line">      - ieel310/libnvpair1-0.6.5.7-1.el7.x86_64.rpm</span><br><span class="line">    e2fsprogs:</span><br><span class="line">      - ieel310/e2fsprogs-1.42.13.wc5-7.el7.x86_64.rpm</span><br><span class="line">      - ieel310/e2fsprogs-libs-1.42.13.wc5-7.el7.x86_64.rpm</span><br><span class="line">      - ieel310/libcom_err-1.42.13.wc5-7.el7.x86_64.rpm</span><br><span class="line">      - ieel310/libss-1.42.13.wc5-7.el7.x86_64.rpm</span><br><span class="line">    kernel:</span><br><span class="line">      - ieel310/kernel-3.10.0-514.2.2.el7_testfs.x86_64.rpm</span><br><span class="line">      - ieel310/kernel-debuginfo-3.10.0-514.2.2.el7_testfs.x86_64.rpm</span><br><span class="line">      - ieel310/kernel-debuginfo-common-x86_64-3.10.0-514.2.2.el7_testfs.x86_64.rpm</span><br><span class="line">      - ieel310/kernel-devel-3.10.0-514.2.2.el7_testfs.x86_64.rpm</span><br><span class="line">      - ieel310/kernel-headers-3.10.0-514.2.2.el7_testfs.x86_64.rpm</span><br><span class="line">    dkms:</span><br><span class="line">      - ieel310/dkms-2.3-1.20161202gitde1dca9.el7.noarch.rpm</span><br><span class="line">      - ieel310/testfs-dkms-2.7.19.8-1.el7.noarch.rpm</span><br><span class="line">      - ieel310/zfs-dkms-0.6.5.7-1.el7.noarch.rpm</span><br><span class="line">  testfs2_102:</span><br><span class="line">    e2fsprogs:</span><br><span class="line">      - testfs2_102/e2fsprogs-1.42.13.wc6-7.el7.x86_64.rpm</span><br><span class="line">      - testfs2_102/e2fsprogs-libs-1.42.13.wc6-7.el7.x86_64.rpm</span><br><span class="line">      - testfs2_102/e2fsprogs-static-1.42.13.wc6-7.el7.x86_64.rpm</span><br><span class="line">      - testfs2_102/libcom_err-1.42.13.wc6-7.el7.x86_64.rpm</span><br><span class="line">      - testfs2_102/libss-1.42.13.wc6-7.el7.x86_64.rpm</span><br><span class="line">    testfs:</span><br><span class="line">      - testfs2_102/testfs-2.10.2-1.el7.x86_64.rpm</span><br><span class="line">      - testfs2_102/testfs-osd-zfs-mount-2.10.2-1.el7.x86_64.rpm</span><br><span class="line">      - testfs2_102/testfs-osd-ldiskfs-mount-2.10.2-1.el7.x86_64.rpm</span><br><span class="line">      - testfs2_102/kmod-testfs-osd-ldiskfs-2.10.2-1.el7.x86_64.rpm</span><br><span class="line">    zfs:</span><br><span class="line">      - testfs2_102/ksh-20120801-34.el7.x86_64.rpm</span><br><span class="line">      - testfs2_102/libnvpair1-0.7.3-1.el7.x86_64.rpm</span><br><span class="line">      - testfs2_102/libuutil1-0.7.3-1.el7.x86_64.rpm</span><br><span class="line">      - testfs2_102/libzfs2-0.7.3-1.el7.x86_64.rpm</span><br><span class="line">      - testfs2_102/libzpool2-0.7.3-1.el7.x86_64.rpm</span><br><span class="line">      - testfs2_102/zfs-0.7.3-1.el7.x86_64.rpm</span><br><span class="line">      - testfs2_102/spl-0.7.3-1.el7.x86_64.rpm</span><br><span class="line">    dkms:</span><br><span class="line">      - testfs2_102/testfs-dkms-2.10.2-1.el7.noarch.rpm</span><br><span class="line">      - testfs2_102/zfs-dkms-0.7.3-1.el7.noarch.rpm</span><br><span class="line">      - testfs2_102/dkms-2.3-5.20170523git8c3065c.el7.noarch.rpm</span><br><span class="line">      - testfs2_102/spl-dkms-0.7.3-1.el7.noarch.rpm</span><br><span class="line">    kernel:</span><br><span class="line">      - testfs2_102/kernel-3.10.0-693.5.2.el7_testfs.x86_64.rpm</span><br><span class="line">      - testfs2_102/kernel-devel-3.10.0-693.5.2.el7_testfs.x86_64.rpm</span><br><span class="line">      - testfs2_102/kernel-headers-3.10.0-693.5.2.el7_testfs.x86_64.rpm</span><br><span class="line">      - testfs2_102/kernel-tools-3.10.0-693.5.2.el7_testfs.x86_64.rpm</span><br><span class="line">      - testfs2_102/kernel-tools-libs-3.10.0-693.5.2.el7_testfs.x86_64.rpm</span><br><span class="line">    sasdriver:</span><br><span class="line">      - testfs2_102/kmod-mpt3sas-26.00.00.00-1.x86_64.rpm</span><br><span class="line"></span><br><span class="line">- name: check testfs <span class="built_in">type</span></span><br><span class="line">  shell: bash -c <span class="string">&#x27;hostname | grep -Ei &quot;(mds|oss)&quot;&#x27;</span></span><br><span class="line">  register: testfs_type</span><br><span class="line">  ignore_errors: True</span><br><span class="line"></span><br><span class="line">- debug:</span><br><span class="line">   var: testfs_type.stdout</span><br><span class="line"></span><br><span class="line">- name: copy mds.conf to modprobe.d</span><br><span class="line">  copy: src=&#123;&#123; item &#125;&#125; dest=/etc/modprobe.d/testfs.conf</span><br><span class="line">  with_items:</span><br><span class="line">   - mds.conf</span><br><span class="line">  when: <span class="string">&#x27;&quot;mds&quot; in hostvars[inventory_hostname].testfs_type.stdout&#x27;</span></span><br><span class="line"></span><br><span class="line">- name: copy oss.conf to modprobe.d</span><br><span class="line">  copy: src=&#123;&#123; item &#125;&#125; dest=/etc/modprobe.d/testfs.conf</span><br><span class="line">  with_items:</span><br><span class="line">   - oss.conf</span><br><span class="line">  when: <span class="string">&#x27;&quot;oss&quot; in hostvars[inventory_hostname].testfs_type.stdout&#x27;</span></span><br><span class="line"></span><br><span class="line">- debug: var=intel_ieel.&#123;&#123; ieel_ver &#125;&#125;.kernel</span><br><span class="line"></span><br><span class="line">- name: Copy kernel packages</span><br><span class="line">  copy: src=&#123;&#123; item &#125;&#125; dest=&#123;&#123; templfs &#125;&#125;</span><br><span class="line">  with_items:</span><br><span class="line">   - <span class="string">&quot;&#123;&#123; intel_ieel[ieel_ver].kernel &#125;&#125;&quot;</span></span><br><span class="line"></span><br><span class="line">- name: Install testfs kernel</span><br><span class="line">  shell: <span class="built_in">cd</span> &#123;&#123; templfs &#125;&#125; &amp;&amp; rpm -Uvh --force kernel-*.rpm &amp;&amp; <span class="built_in">sleep</span> 5</span><br></pre></td></tr></table></figure>

<h4 id="match-the-keyword-from-a-list"><a href="#match-the-keyword-from-a-list" class="headerlink" title="match the keyword from a list"></a>match the keyword from a list</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="bullet">-</span> <span class="attr">debug:</span> <span class="string">msg=&quot;&#123;&#123;</span> <span class="string">item</span>  <span class="string">&#125;&#125;&quot;</span></span><br><span class="line">  <span class="attr">with_items:</span> <span class="string">&quot;<span class="template-variable">&#123;&#123; intel_ieel[ieel_ver].zfs | select(&#x27;search&#x27;, &#x27;/zfs-2.*.el8.x86_64.rpm&#x27;) | list | length &gt;0 &#125;&#125;</span>&quot;</span></span><br><span class="line">  <span class="attr">register:</span> <span class="string">zfs_out</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> <span class="attr">debug:</span></span><br><span class="line">    <span class="attr">msg:</span> <span class="string">&quot;<span class="template-variable">&#123;&#123; zfs_out.results[0].item &#125;&#125;</span>&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> <span class="attr">debug:</span></span><br><span class="line">    <span class="attr">msg:</span> <span class="string">&quot;<span class="template-variable">&#123;&#123; ieel_ver &#125;&#125;</span>&quot;</span></span><br><span class="line">  <span class="attr">when:</span> <span class="string">&quot;<span class="template-variable">&#123;&#123; zfs_out.results[0].item &#125;&#125;</span>&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="string">TASK</span> [<span class="attr">test_role :</span> <span class="string">debug</span>] <span class="string">***********************************************************************************************************************************************************************</span></span><br><span class="line"><span class="attr">ok:</span> [<span class="string">xx.xx.xx.xx</span>] <span class="string">=&gt;</span> &#123;</span><br><span class="line">    <span class="attr">&quot;msg&quot;:</span> [</span><br><span class="line">        <span class="string">&quot;lustre2_150/kmod-lustre-osd-zfs-2.15.0-1.el8.x86_64.rpm&quot;</span>, </span><br><span class="line">        <span class="string">&quot;lustre2_150/kmod-lustre-osd-zfs-debuginfo-2.15.0-1.el8.x86_64.rpm&quot;</span>, </span><br><span class="line">        <span class="string">&quot;lustre2_150/dkms-3.0.3-1.el8.noarch.rpm&quot;</span>, </span><br><span class="line">        <span class="string">&quot;lustre2_150/libnvpair3-2.0.7-1.el8.x86_64.rpm&quot;</span>, </span><br><span class="line">        <span class="string">&quot;lustre2_150/libnvpair3-debuginfo-2.0.7-1.el8.x86_64.rpm&quot;</span>, </span><br><span class="line">        <span class="string">&quot;lustre2_150/libuutil3-2.0.7-1.el8.x86_64.rpm&quot;</span>, </span><br><span class="line">        <span class="string">&quot;lustre2_150/libuutil3-debuginfo-2.0.7-1.el8.x86_64.rpm&quot;</span>, </span><br><span class="line">        <span class="string">&quot;lustre2_150/libzfs4-2.0.7-1.el8.x86_64.rpm&quot;</span>, </span><br><span class="line">        <span class="string">&quot;lustre2_150/libzfs4-debuginfo-2.0.7-1.el8.x86_64.rpm&quot;</span>, </span><br><span class="line">        <span class="string">&quot;lustre2_150/libzfs4-devel-2.0.7-1.el8.x86_64.rpm&quot;</span>, </span><br><span class="line">        <span class="string">&quot;lustre2_150/libzpool4-2.0.7-1.el8.x86_64.rpm&quot;</span>, </span><br><span class="line">        <span class="string">&quot;lustre2_150/libzpool4-debuginfo-2.0.7-1.el8.x86_64.rpm&quot;</span>, </span><br><span class="line">        <span class="string">&quot;lustre2_150/zfs-2.0.7-1.el8.x86_64.rpm&quot;</span>, </span><br><span class="line">        <span class="string">&quot;lustre2_150/zfs-debuginfo-2.0.7-1.el8.x86_64.rpm&quot;</span>, </span><br><span class="line">        <span class="string">&quot;lustre2_150/zfs-debugsource-2.0.7-1.el8.x86_64.rpm&quot;</span>, </span><br><span class="line">        <span class="string">&quot;lustre2_150/zfs-dkms-2.0.7-1.el8.noarch.rpm&quot;</span>, </span><br><span class="line">        <span class="string">&quot;lustre2_150/zfs-test-2.0.7-1.el8.x86_64.rpm&quot;</span>, </span><br><span class="line">        <span class="string">&quot;lustre2_150/zfs-test-debuginfo-2.0.7-1.el8.x86_64.rpm&quot;</span></span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="string">TASK</span> [<span class="attr">test_role :</span> <span class="string">debug</span>] <span class="string">***********************************************************************************************************************************************************************</span></span><br><span class="line"><span class="attr">ok:</span> [<span class="string">xx.xx.xx.xx</span>] <span class="string">=&gt;</span> <span class="string">(item=True)</span> <span class="string">=&gt;</span> &#123;</span><br><span class="line">    <span class="attr">&quot;msg&quot;:</span> <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="string">TASK</span> [<span class="attr">test_role :</span> <span class="string">debug</span>] <span class="string">***********************************************************************************************************************************************************************</span></span><br><span class="line"><span class="attr">ok:</span> [<span class="string">xx.xx.xx.xx</span>] <span class="string">=&gt;</span> &#123;</span><br><span class="line">    <span class="attr">&quot;msg&quot;:</span> <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="string">TASK</span> [<span class="attr">test_role :</span> <span class="string">debug</span>] <span class="string">*******************************************************************************************************************************************************************</span></span><br><span class="line">[<span class="string">WARNING</span>]<span class="string">:</span> <span class="string">conditional</span> <span class="string">statements</span> <span class="string">should</span> <span class="string">not</span> <span class="string">include</span> <span class="string">jinja2</span> <span class="string">templating</span> <span class="string">delimiters</span> <span class="string">such</span> <span class="string">as</span> &#123;&#123; &#125;&#125; <span class="string">or</span> &#123;<span class="string">%</span> <span class="string">%</span>&#125;<span class="string">.</span> <span class="attr">Found:</span> &#123;&#123; <span class="string">zfs_out.results</span>[<span class="number">0</span>]<span class="string">.item</span> &#125;&#125;</span><br><span class="line"><span class="attr">ok:</span> [<span class="string">xx.xx.xx.xx</span>] <span class="string">=&gt;</span> &#123;</span><br><span class="line">    <span class="attr">&quot;msg&quot;:</span> <span class="string">&quot;lfs2150&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="string">----------------------------------not</span> <span class="string">match</span></span><br><span class="line"></span><br><span class="line"><span class="string">TASK</span> [<span class="attr">test_role :</span> <span class="string">debug</span>] <span class="string">***********************************************************************************************************************************************************************</span></span><br><span class="line"><span class="attr">ok:</span> [<span class="string">xx.xx.xx.xx</span>] <span class="string">=&gt;</span> &#123;</span><br><span class="line">    <span class="attr">&quot;msg&quot;:</span> [</span><br><span class="line">        <span class="string">&quot;lustre2_128/kmod-lustre-osd-zfs-2.12.8_6_g5457c37-1.el7.x86_64.rpm&quot;</span>,</span><br><span class="line">        <span class="string">&quot;lustre2_128/dkms-2.8.1-4.20200214git5ca628c.el7.noarch.rpm&quot;</span>,</span><br><span class="line">        <span class="string">&quot;lustre2_128/libnvpair1-0.7.13-1.el7.x86_64.rpm&quot;</span>,</span><br><span class="line">        <span class="string">&quot;lustre2_128/libuutil1-0.7.13-1.el7.x86_64.rpm&quot;</span>,</span><br><span class="line">        <span class="string">&quot;lustre2_128/libzfs2-0.7.13-1.el7.x86_64.rpm&quot;</span>,</span><br><span class="line">        <span class="string">&quot;lustre2_128/libzpool2-0.7.13-1.el7.x86_64.rpm&quot;</span>,</span><br><span class="line">        <span class="string">&quot;lustre2_128/spl-0.7.13-1.el7.x86_64.rpm&quot;</span>,</span><br><span class="line">        <span class="string">&quot;lustre2_128/spl-debuginfo-0.7.13-1.el7.x86_64.rpm&quot;</span>,</span><br><span class="line">        <span class="string">&quot;lustre2_128/spl-dkms-0.7.13-1.el7.noarch.rpm&quot;</span>,</span><br><span class="line">        <span class="string">&quot;lustre2_128/zfs-0.7.13-1.el7.x86_64.rpm&quot;</span>,</span><br><span class="line">        <span class="string">&quot;lustre2_128/zfs-debuginfo-0.7.13-1.el7.x86_64.rpm&quot;</span>,</span><br><span class="line">        <span class="string">&quot;lustre2_128/zfs-dkms-0.7.13-1.el7.noarch.rpm&quot;</span></span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="string">TASK</span> [<span class="attr">test_role :</span> <span class="string">debug</span>] <span class="string">***********************************************************************************************************************************************************************</span></span><br><span class="line"><span class="attr">ok:</span> [<span class="string">xx.xx.xx.xx</span>] <span class="string">=&gt;</span> <span class="string">(item=False)</span> <span class="string">=&gt;</span> &#123;</span><br><span class="line">    <span class="attr">&quot;msg&quot;:</span> <span class="literal">false</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="string">TASK</span> [<span class="attr">test_role :</span> <span class="string">debug</span>] <span class="string">***********************************************************************************************************************************************************************</span></span><br><span class="line"><span class="attr">ok:</span> [<span class="string">xx.xx.xx.xx</span>] <span class="string">=&gt;</span> &#123;</span><br><span class="line">    <span class="attr">&quot;msg&quot;:</span> <span class="literal">false</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="string">TASK</span> [<span class="attr">test_role :</span> <span class="string">debug</span>] <span class="string">*******************************************************************************************************************************************************************</span></span><br><span class="line">[<span class="string">WARNING</span>]<span class="string">:</span> <span class="string">conditional</span> <span class="string">statements</span> <span class="string">should</span> <span class="string">not</span> <span class="string">include</span> <span class="string">jinja2</span> <span class="string">templating</span> <span class="string">delimiters</span> <span class="string">such</span> <span class="string">as</span> &#123;&#123; &#125;&#125; <span class="string">or</span> &#123;<span class="string">%</span> <span class="string">%</span>&#125;<span class="string">.</span> <span class="attr">Found:</span> &#123;&#123; <span class="string">zfs_out.results</span>[<span class="number">0</span>]<span class="string">.item</span> &#125;&#125;</span><br><span class="line"><span class="attr">skipping:</span> [<span class="string">xx.xx.xx.xx</span>]</span><br></pre></td></tr></table></figure>


<h3 id="localintall"><a href="#localintall" class="headerlink" title="localintall"></a>localintall</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">- name: Copy dell racadm</span><br><span class="line">  copy: src=&#123;&#123; item &#125;&#125; dest=/dev/shm</span><br><span class="line">  with_items:</span><br><span class="line">   - dell_racadm/libsmbios-2.3.1-2965.12849.el7.x86_64.rpm</span><br><span class="line">   - dell_racadm/libsmbiosc++-2.3.1-2965.12849.el7.x86_64.rpm</span><br><span class="line">   - dell_racadm/smbios-utils-bin-2.3.1-2965.12849.el7.x86_64.rpm</span><br><span class="line">   - dell_racadm/srvadmin-argtable2-9.1.2-2965.12849.el7.x86_64.rpm</span><br><span class="line">   - dell_racadm/srvadmin-deng-9.1.2-2965.12849.el7.x86_64.rpm</span><br><span class="line">   - dell_racadm/srvadmin-deng-snmp-9.1.2-2965.12849.el7.x86_64.rpm</span><br><span class="line">   - dell_racadm/srvadmin-hapi-9.1.2-2965.12849.el7.x86_64.rpm</span><br><span class="line">   - dell_racadm/srvadmin-idrac7-9.1.2-2965.12849.el7.x86_64.rpm</span><br><span class="line">   - dell_racadm/srvadmin-idracadm7-9.1.2-2965.12849.el7.x86_64.rpm</span><br><span class="line">   - dell_racadm/srvadmin-idracadm-9.1.2-2965.12849.el7.x86_64.rpm</span><br><span class="line">   - dell_racadm/srvadmin-idrac-ivmcli-9.1.2-2965.12849.el7.x86_64.rpm</span><br><span class="line">   - dell_racadm/srvadmin-idrac-snmp-9.1.2-2965.12849.el7.x86_64.rpm</span><br><span class="line">   - dell_racadm/srvadmin-idrac-vmcli-9.1.2-2965.12849.el7.x86_64.rpm</span><br><span class="line">   - dell_racadm/srvadmin-isvc-9.1.2-2965.12849.el7.x86_64.rpm</span><br><span class="line">   - dell_racadm/srvadmin-isvc-snmp-9.1.2-2965.12849.el7.x86_64.rpm</span><br><span class="line">   - dell_racadm/srvadmin-omacs-9.1.2-2965.12849.el7.x86_64.rpm</span><br><span class="line">   - dell_racadm/srvadmin-omcommon-9.1.2-2965.12849.el7.x86_64.rpm</span><br><span class="line">   - dell_racadm/srvadmin-omilcore-9.1.2-2965.12849.el7.x86_64.rpm</span><br><span class="line">   - dell_racadm/srvadmin-racadm4-9.1.2-2965.12849.el7.x86_64.rpm</span><br><span class="line">   - dell_racadm/srvadmin-racadm5-9.1.2-2965.12849.el7.x86_64.rpm</span><br><span class="line">   - dell_racadm/srvadmin-rac-components-9.1.2-2965.12849.el7.x86_64.rpm</span><br><span class="line">   - dell_racadm/srvadmin-racdrsc-9.1.2-2965.12849.el7.x86_64.rpm</span><br><span class="line"></span><br><span class="line">- name: find templfs all testfs releated rpm, using <span class="keyword">for</span> yum localinstall</span><br><span class="line">  find:</span><br><span class="line">    paths: <span class="string">&quot;/dev/shm&quot;</span></span><br><span class="line">    patterns: <span class="string">&#x27;*.rpm&#x27;</span></span><br><span class="line">  register: dellrpm</span><br><span class="line"></span><br><span class="line">- name: Install racadm rpm</span><br><span class="line">  yum:</span><br><span class="line">    name: <span class="string">&quot;&#123;&#123; dellrpm.files | map(attribute=&#x27;path&#x27;) | list &#125;&#125;&quot;</span></span><br><span class="line">    state: present</span><br><span class="line"></span><br><span class="line">- name: Upgrade all packages</span><br><span class="line">  yum: name=* state=latest</span><br></pre></td></tr></table></figure>

<h3 id="reboot"><a href="#reboot" class="headerlink" title="reboot"></a>reboot</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">##reboot</span></span><br><span class="line">- name: first restart server <span class="keyword">for</span> lutre kernel</span><br><span class="line">  shell: bash -c <span class="string">&#x27;(sleep 2 &amp;&amp; reboot -f)&#x27;</span></span><br><span class="line">  async: 1</span><br><span class="line">  poll: 0</span><br><span class="line"></span><br><span class="line">- name: waiting <span class="keyword">for</span> server to come back after reboot</span><br><span class="line">  local_action: wait_for host=&#123;&#123; inventory_hostname &#125;&#125; state=started <span class="built_in">timeout</span>=600 delay=10 connect_timeout=600 port=22</span><br><span class="line"></span><br><span class="line"><span class="comment">### [retry](https://bbs.huaweicloud.com/blogs/140864)</span></span><br><span class="line">```bash</span><br><span class="line">ansible-playbook -i host stress.yml --extra-vars <span class="string">&quot;host=all&quot;</span> --<span class="built_in">limit</span> @<span class="variable">$playbook_retry</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#!/bin/sh</span></span><br><span class="line"></span><br><span class="line">hosts=(</span><br><span class="line"><span class="string">&quot;host1&quot;</span> </span><br><span class="line"><span class="string">&quot;host2&quot;</span> </span><br><span class="line"><span class="string">&quot;host3&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">cpu_load=(15 15 15 15 15 15)</span><br><span class="line">mem_load=(5 5 5 5 5 5)</span><br><span class="line"></span><br><span class="line"><span class="built_in">mkdir</span> -p tmp</span><br><span class="line"></span><br><span class="line">host_file=<span class="string">&quot;./hosts&quot;</span></span><br><span class="line"></span><br><span class="line">total_result=<span class="string">&quot;./tmp/total_result.log&quot;</span></span><br><span class="line">playbook_result=<span class="string">&quot;./tmp/playbook_result.log&quot;</span></span><br><span class="line">playbook_retry=<span class="string">&quot;./tmp/playbook_retry.txt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;&quot;</span> &gt; <span class="variable">$total_result</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">parse_playbook_result</span></span>()</span><br><span class="line">&#123;</span><br><span class="line">	sed <span class="string">&#x27;1,/PLAY RECAP/d&#x27;</span> <span class="variable">$playbook_result</span> | awk -F<span class="string">&quot; *|=|\t&quot;</span> <span class="string">&#x27;</span></span><br><span class="line"><span class="string">	/unreachable/&#123;</span></span><br><span class="line"><span class="string">	ip=$1</span></span><br><span class="line"><span class="string">	ok_cnt=$4</span></span><br><span class="line"><span class="string">	changed_cnt=$6</span></span><br><span class="line"><span class="string">	unreachable_cnt=$8</span></span><br><span class="line"><span class="string">	failed_cnt=$10</span></span><br><span class="line"><span class="string">	if(unreachable_cnt!=0 || failed_cnt!=0 || rescued_cnt!=0)&#123;</span></span><br><span class="line"><span class="string">		print ip</span></span><br><span class="line"><span class="string">	&#125;</span></span><br><span class="line"><span class="string">	&#125;&#x27;</span> &gt; <span class="variable">$playbook_retry</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">ansible_playbook</span></span>()</span><br><span class="line">&#123;</span><br><span class="line">	<span class="built_in">echo</span> <span class="string">&quot;playbook Vars: <span class="variable">$2</span>&quot;</span></span><br><span class="line">	ansible-playbook -i <span class="variable">$host_file</span> <span class="variable">$1</span> --extra-vars <span class="string">&quot;<span class="variable">$2</span>&quot;</span> &gt;<span class="variable">$playbook_result</span> 2&gt;&amp;1</span><br><span class="line"></span><br><span class="line">	<span class="built_in">cat</span> <span class="variable">$playbook_result</span> &gt; <span class="variable">$total_result</span></span><br><span class="line">	</span><br><span class="line">	<span class="keyword">while</span> <span class="literal">true</span></span><br><span class="line">	<span class="keyword">do</span></span><br><span class="line">		parse_playbook_result</span><br><span class="line">		RETRY_CNT=$(<span class="built_in">wc</span> -l <span class="variable">$playbook_retry</span> | awk <span class="string">&#x27;&#123;print $1&#125;&#x27;</span>)</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">if</span> [[ <span class="variable">$RETRY_CNT</span> != 0 ]]; <span class="keyword">then</span></span><br><span class="line">			<span class="built_in">echo</span> <span class="string">&quot;Some host will retry:&quot;</span></span><br><span class="line">			<span class="built_in">cat</span> <span class="variable">$playbook_retry</span></span><br><span class="line">			ansible-playbook -i <span class="variable">$host_file</span> stress_stop.yml --extra-vars <span class="string">&quot;<span class="variable">$2</span>&quot;</span> --<span class="built_in">limit</span> @<span class="variable">$playbook_retry</span> &gt;/dev/null 2&gt;&amp;1</span><br><span class="line">			ansible-playbook -i <span class="variable">$host_file</span> <span class="variable">$1</span> --extra-vars <span class="string">&quot;<span class="variable">$2</span>&quot;</span> --<span class="built_in">limit</span> @<span class="variable">$playbook_retry</span> &gt;<span class="variable">$playbook_result</span> 2&gt;&amp;1</span><br><span class="line">			<span class="built_in">cat</span> <span class="variable">$playbook_result</span> &gt; <span class="variable">$total_result</span></span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">			<span class="built_in">return</span></span><br><span class="line">		<span class="keyword">fi</span></span><br><span class="line">	<span class="keyword">done</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(( i=0; i&lt;<span class="variable">$&#123;#hosts[@]&#125;</span>; i++ ))</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&quot;Stress&quot;</span> <span class="variable">$&#123;hosts[i]&#125;</span></span><br><span class="line">  ansible_playbook <span class="string">&quot;stress_start.yml&quot;</span> <span class="string">&quot;host=<span class="variable">$&#123;hosts[i]&#125;</span> cpu_load=<span class="variable">$&#123;cpu_load[i]&#125;</span> mem_load=<span class="variable">$&#123;mem_load[i]&#125;</span>&quot;</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Over zzz&quot;</span></span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://www.middlewareinventory.com/blog/ansible-changed_when-and-failed_when-examples/#:~:text=Ansible%20failed_when%20and%20changed_when%20statements%20are%20similar%20to%20ansible%20when,defined%2C%20is%20met%20or%20satisfied.&text=Ansible%20would%20report%20it%20as,script%20give%20ZERO%20return%20code.">shell work with failed_when and changed_when</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">- hosts: app</span><br><span class="line">  tasks:</span><br><span class="line">  - name: Making sure the /tmp has more than 1gb</span><br><span class="line">    shell: <span class="string">&quot;df -h /tmp|grep -v Filesystem|awk &#x27;&#123;print <span class="variable">$4</span>&#125;&#x27;|cut -d G -f1&quot;</span></span><br><span class="line">    register: tmpspace</span><br><span class="line">    failed_when: <span class="string">&quot;tmpspace.stdout|float &lt; 1&quot;</span></span><br><span class="line"></span><br><span class="line">  - name: Making sure the /opt has more than 4gb</span><br><span class="line">    shell: <span class="string">&quot;df -h /opt|grep -v Filesystem|awk &#x27;&#123;print <span class="variable">$4</span>&#125;&#x27;|cut -d G -f1&quot;</span></span><br><span class="line">    register: tmpspace</span><br><span class="line">    failed_when: <span class="string">&quot;tmpspace.stdout|float &lt; 4&quot;</span></span><br><span class="line"></span><br><span class="line">  - name: Making sure the Physical Memory more than 2gb</span><br><span class="line">    shell: <span class="string">&quot;cat /proc/meminfo|grep -i memtotal|awk &#x27;&#123;print <span class="variable">$2</span>/1024/1024&#125;&#x27;&quot;</span></span><br><span class="line">    register: memory</span><br><span class="line">    failed_when: <span class="string">&quot;memory.stdout|float &lt; 2&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="template"><a href="#template" class="headerlink" title="template"></a>template</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="string">%</span> <span class="string">if</span> <span class="string">&#x27;oss&#x27;</span> <span class="string">in</span> <span class="string">ansible_hostname</span> <span class="string">and</span> <span class="string">&#x27;zfs&#x27;</span> <span class="string">in</span> <span class="string">lfstype</span> <span class="string">%</span>&#125;</span><br><span class="line"><span class="string">options</span> <span class="string">osd_zfs</span> <span class="string">osd_sync_destroy_max_size=1048576</span></span><br><span class="line">&#123;<span class="string">%</span> <span class="string">endif</span> <span class="string">%</span>&#125;</span><br></pre></td></tr></table></figure>

<h3 id="diff-os-version"><a href="#diff-os-version" class="headerlink" title="diff os version"></a>diff os version</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">- include_tasks: freebsd.yml</span><br><span class="line">  when: ansible_os_family == &quot;FreeBSD&quot;</span><br><span class="line">  tags:</span><br><span class="line">    - unbound</span><br><span class="line"></span><br><span class="line">- include_tasks: debian.yml</span><br><span class="line">  when: ansible_os_family == &quot;Debian&quot;</span><br><span class="line">  tags:</span><br><span class="line">    - unbound</span><br><span class="line"></span><br><span class="line">- include_tasks: redhat.yml</span><br><span class="line">  when: ansible_os_family == &quot;RedHat&quot;</span><br><span class="line">  tags:</span><br><span class="line">    - unbound</span><br></pre></td></tr></table></figure>

<h3 id="add-line-to-the-begining-the-low-efficiency-in-ansible"><a href="#add-line-to-the-begining-the-low-efficiency-in-ansible" class="headerlink" title="add line to the begining, the low efficiency in ansible"></a>add line to the begining, the low efficiency in ansible</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">hosts:</span> <span class="string">all</span></span><br><span class="line">  <span class="attr">tasks:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">create</span> <span class="string">empty</span> <span class="string">file</span></span><br><span class="line">    <span class="attr">file:</span></span><br><span class="line">      <span class="attr">path:</span> <span class="string">&quot;/root/testfile&quot;</span></span><br><span class="line">      <span class="attr">state:</span> <span class="string">touch</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">line</span> <span class="string">insert</span></span><br><span class="line">    <span class="attr">lineinfile:</span></span><br><span class="line">      <span class="attr">path:</span> <span class="string">&quot;/root/testfile&quot;</span></span><br><span class="line">      <span class="attr">line:</span> <span class="string">This</span> <span class="string">is</span> <span class="string">the</span> <span class="string">second</span> <span class="string">line</span></span><br><span class="line">      <span class="attr">insertbefore:</span> <span class="string">BOF</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">line</span> <span class="string">insert</span></span><br><span class="line">    <span class="attr">lineinfile:</span></span><br><span class="line">      <span class="attr">path:</span> <span class="string">&quot;/root/testfile&quot;</span></span><br><span class="line">      <span class="attr">line:</span> <span class="string">This</span> <span class="string">is</span> <span class="string">the</span> <span class="string">first</span> <span class="string">line</span></span><br><span class="line">      <span class="attr">insertbefore:</span> <span class="string">BOF</span></span><br></pre></td></tr></table></figure>

<h3 id="ansible-return-data-struction"><a href="#ansible-return-data-struction" class="headerlink" title="ansible return data struction"></a><a target="_blank" rel="noopener" href="https://www.tailored.cloud/devops/how-to-filter-and-map-lists-in-ansible/">ansible return data struction</a></h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#https://jon.sprig.gs/blog/post/1801</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">yum</span> <span class="string">install</span> <span class="string">el8</span> <span class="string">full</span> <span class="string">packages</span></span><br><span class="line">  <span class="attr">yum:</span> <span class="string">pkg=&#123;&#123;</span> <span class="string">item</span> <span class="string">&#125;&#125;</span> <span class="string">state=present</span></span><br><span class="line">  <span class="attr">with_items:</span></span><br><span class="line">   <span class="bullet">-</span> <span class="string">iotop</span></span><br><span class="line">   <span class="bullet">-</span> <span class="string">bpftrace</span></span><br><span class="line">   <span class="bullet">-</span> <span class="string">iputils</span></span><br><span class="line">   <span class="bullet">-</span> <span class="string">nfs-utils</span></span><br><span class="line">  <span class="attr">register:</span> <span class="string">yum_out</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># print value</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">debug:</span></span><br><span class="line">    <span class="attr">msg:</span> <span class="string">&quot;<span class="template-variable">&#123;&#123; yum_out.results[0].rc &#125;&#125;</span>&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> <span class="attr">debug:</span></span><br><span class="line">    <span class="attr">msg:</span> <span class="string">&quot;<span class="template-variable">&#123;&#123; yum_out | select(&#x27;match&#x27;, &#x27;results&#x27;) | list &#125;&#125;</span>&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># match keyword from the map</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">debug:</span></span><br><span class="line">    <span class="attr">msg:</span> <span class="string">&quot;<span class="template-variable">&#123;&#123; yum_out.results[0] | select(&#x27;match&#x27;, &#x27;failed&#x27;) | list &#125;&#125;</span>&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> <span class="attr">debug:</span></span><br><span class="line">    <span class="attr">msg:</span> <span class="string">&quot;<span class="template-variable">&#123;&#123; yum_out.results[0] | map(&#x27;upper&#x27;) | list &#125;&#125;</span>&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#append value</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">debug:</span></span><br><span class="line">    <span class="attr">msg:</span> <span class="string">&quot;<span class="template-variable">&#123;&#123; yum_out.results[0].item | list + [\&quot;VETH-1\&quot;, \&quot;VETH-2\&quot;] &#125;&#125;</span>&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#show sub map all</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">debug:</span></span><br><span class="line">    <span class="attr">msg:</span> <span class="string">&quot;<span class="template-variable">&#123;&#123; yum_out.results[0].item | map(&#x27;upper&#x27;) | list &#125;&#125;</span>&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#show sub map all</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">debug:</span></span><br><span class="line">    <span class="attr">msg:</span> <span class="string">&quot;<span class="template-variable">&#123;&#123; yum_out.results[0].item | map(&#x27;upper&#x27;) | list &#125;&#125;</span>&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">is</span> <span class="string">mapping</span></span><br><span class="line">  <span class="attr">debug:</span></span><br><span class="line">    <span class="attr">msg:</span> <span class="string">&quot;<span class="template-variable">&#123;&#123; yum_out.results[0].rc is mapping &#125;&#125;</span>&quot;</span> </span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">is</span> <span class="string">string</span></span><br><span class="line">  <span class="attr">debug:</span></span><br><span class="line">    <span class="attr">msg:</span> <span class="string">&quot;<span class="template-variable">&#123;&#123; yum_out.results is string &#125;&#125;</span>&quot;</span> </span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">is</span> <span class="string">iterable</span></span><br><span class="line">  <span class="attr">debug:</span></span><br><span class="line">    <span class="attr">msg:</span> <span class="string">&quot;<span class="template-variable">&#123;&#123; yum_out.results is iterable &#125;&#125;</span>&quot;</span> </span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">is</span> <span class="string">sequence</span></span><br><span class="line">  <span class="attr">debug:</span></span><br><span class="line">    <span class="attr">msg:</span> <span class="string">&quot;<span class="template-variable">&#123;&#123; yum_out.results is sequence &#125;&#125;</span>&quot;</span> </span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">show</span> <span class="string">type</span></span><br><span class="line">  <span class="attr">debug:</span></span><br><span class="line">    <span class="attr">msg:</span> <span class="string">&quot;<span class="template-variable">&#123;&#123; yum_out.results | type_debug &#125;&#125;</span>&quot;</span> </span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">show</span> <span class="string">type</span></span><br><span class="line">  <span class="attr">debug:</span></span><br><span class="line">    <span class="attr">msg:</span> <span class="string">&quot;<span class="template-variable">&#123;&#123; yum_out.results[0] | type_debug &#125;&#125;</span>&quot;</span> </span><br></pre></td></tr></table></figure>

<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">ok:</span> [<span class="string">xx.xx.xx.xx</span>] <span class="string">=&gt;</span> &#123;</span><br><span class="line">    <span class="attr">&quot;msg&quot;:</span> &#123;</span><br><span class="line">        <span class="attr">&quot;changed&quot;:</span> <span class="literal">false</span>, </span><br><span class="line">        <span class="attr">&quot;msg&quot;:</span> <span class="string">&quot;All items completed&quot;</span>, </span><br><span class="line">        <span class="attr">&quot;results&quot;:</span> [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">&quot;ansible_loop_var&quot;:</span> <span class="string">&quot;item&quot;</span>, </span><br><span class="line">                <span class="attr">&quot;changed&quot;:</span> <span class="literal">false</span>, </span><br><span class="line">                <span class="attr">&quot;failed&quot;:</span> <span class="literal">false</span>, </span><br><span class="line">                <span class="attr">&quot;invocation&quot;:</span> &#123;</span><br><span class="line">                    <span class="attr">&quot;module_args&quot;:</span> &#123;</span><br><span class="line">                        <span class="attr">&quot;allow_downgrade&quot;:</span> <span class="literal">false</span>, </span><br><span class="line">                        <span class="attr">&quot;autoremove&quot;:</span> <span class="literal">false</span>, </span><br><span class="line">                        <span class="attr">&quot;bugfix&quot;:</span> <span class="literal">false</span>, </span><br><span class="line">                        <span class="attr">&quot;conf_file&quot;:</span> <span class="literal">null</span>, </span><br><span class="line">                        <span class="attr">&quot;disable_excludes&quot;:</span> <span class="literal">null</span>, </span><br><span class="line">                        <span class="attr">&quot;disable_gpg_check&quot;:</span> <span class="literal">false</span>, </span><br><span class="line">                        <span class="attr">&quot;disable_plugin&quot;:</span> [], </span><br><span class="line">                        <span class="attr">&quot;disablerepo&quot;:</span> [], </span><br><span class="line">                        <span class="attr">&quot;download_dir&quot;:</span> <span class="literal">null</span>, </span><br><span class="line">                        <span class="attr">&quot;download_only&quot;:</span> <span class="literal">false</span>, </span><br><span class="line">                        <span class="attr">&quot;enable_plugin&quot;:</span> [], </span><br><span class="line">                        <span class="attr">&quot;enablerepo&quot;:</span> [], </span><br><span class="line">                        <span class="attr">&quot;exclude&quot;:</span> [], </span><br><span class="line">                        <span class="attr">&quot;install_repoquery&quot;:</span> <span class="literal">true</span>, </span><br><span class="line">                        <span class="attr">&quot;install_weak_deps&quot;:</span> <span class="literal">true</span>, </span><br><span class="line">                        <span class="attr">&quot;installroot&quot;:</span> <span class="string">&quot;/&quot;</span>, </span><br><span class="line">                        <span class="attr">&quot;list&quot;:</span> <span class="literal">null</span>, </span><br><span class="line">                        <span class="attr">&quot;lock_timeout&quot;:</span> <span class="number">30</span>, </span><br><span class="line">                        <span class="attr">&quot;name&quot;:</span> [</span><br><span class="line">                            <span class="string">&quot;iotop&quot;</span>, </span><br><span class="line">                            <span class="string">&quot;bpftrace&quot;</span>, </span><br><span class="line">                            <span class="string">&quot;iputils&quot;</span>, </span><br><span class="line">                            <span class="string">&quot;nfs-utils&quot;</span></span><br><span class="line">                        ], </span><br><span class="line">                        <span class="attr">&quot;releasever&quot;:</span> <span class="literal">null</span>, </span><br><span class="line">                        <span class="attr">&quot;security&quot;:</span> <span class="literal">false</span>, </span><br><span class="line">                        <span class="attr">&quot;skip_broken&quot;:</span> <span class="literal">false</span>, </span><br><span class="line">                        <span class="attr">&quot;state&quot;:</span> <span class="string">&quot;present&quot;</span>, </span><br><span class="line">                        <span class="attr">&quot;update_cache&quot;:</span> <span class="literal">false</span>, </span><br><span class="line">                        <span class="attr">&quot;update_only&quot;:</span> <span class="literal">false</span>, </span><br><span class="line">                        <span class="attr">&quot;validate_certs&quot;:</span> <span class="literal">true</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;, </span><br><span class="line">                <span class="attr">&quot;item&quot;:</span> [</span><br><span class="line">                    <span class="string">&quot;iotop&quot;</span>, </span><br><span class="line">                    <span class="string">&quot;bpftrace&quot;</span>, </span><br><span class="line">                    <span class="string">&quot;iputils&quot;</span>, </span><br><span class="line">                    <span class="string">&quot;nfs-utils&quot;</span></span><br><span class="line">                ], </span><br><span class="line">                <span class="attr">&quot;msg&quot;:</span> <span class="string">&quot;Nothing to do&quot;</span>, </span><br><span class="line">                <span class="attr">&quot;rc&quot;:</span> <span class="number">0</span>, </span><br><span class="line">                <span class="attr">&quot;results&quot;:</span> []</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="string">TASK</span> [<span class="attr">test_role :</span> <span class="string">yum</span> <span class="string">install</span> <span class="string">el8</span> <span class="string">full</span> <span class="string">packages</span>] <span class="string">***********************************************************************************************************************************************</span></span><br><span class="line"><span class="attr">ok:</span> [<span class="string">xx.xx.xx.xx</span>] <span class="string">=&gt;</span> <span class="string">(item=[u&#x27;iotop&#x27;,</span> <span class="string">u&#x27;bpftrace&#x27;,</span> <span class="string">u&#x27;iputils&#x27;,</span> <span class="string">u&#x27;nfs-utils&#x27;])</span></span><br><span class="line"></span><br><span class="line"><span class="string">TASK</span> [<span class="attr">test_role :</span> <span class="string">debug</span>] <span class="string">***********************************************************************************************************************************************************************</span></span><br><span class="line"><span class="attr">ok:</span> [<span class="string">xx.xx.xx.xx</span>] <span class="string">=&gt;</span> &#123;</span><br><span class="line">    <span class="attr">&quot;msg&quot;:</span> <span class="string">&quot;0&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="string">TASK</span> [<span class="attr">test_role :</span> <span class="string">debug</span>] <span class="string">***********************************************************************************************************************************************************************</span></span><br><span class="line"><span class="attr">ok:</span> [<span class="string">xx.xx.xx.xx</span>] <span class="string">=&gt;</span> &#123;</span><br><span class="line">    <span class="attr">&quot;msg&quot;:</span> [</span><br><span class="line">        <span class="string">&quot;results&quot;</span></span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="string">TASK</span> [<span class="attr">test_role :</span> <span class="string">debug</span>] <span class="string">***********************************************************************************************************************************************************************</span></span><br><span class="line"><span class="attr">ok:</span> [<span class="string">xx.xx.xx.xx</span>] <span class="string">=&gt;</span> &#123;</span><br><span class="line">    <span class="attr">&quot;msg&quot;:</span> [</span><br><span class="line">        <span class="string">&quot;failed&quot;</span></span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="string">TASK</span> [<span class="attr">test_role :</span> <span class="string">debug</span>] <span class="string">***********************************************************************************************************************************************************************</span></span><br><span class="line"><span class="attr">ok:</span> [<span class="string">xx.xx.xx.xx</span>] <span class="string">=&gt;</span> &#123;</span><br><span class="line">    <span class="attr">&quot;msg&quot;:</span> [</span><br><span class="line">        <span class="string">&quot;ANSIBLE_LOOP_VAR&quot;</span>, </span><br><span class="line">        <span class="string">&quot;FAILED&quot;</span>, </span><br><span class="line">        <span class="string">&quot;CHANGED&quot;</span>, </span><br><span class="line">        <span class="string">&quot;RESULTS&quot;</span>, </span><br><span class="line">        <span class="string">&quot;ITEM&quot;</span>, </span><br><span class="line">        <span class="string">&quot;RC&quot;</span>, </span><br><span class="line">        <span class="string">&quot;INVOCATION&quot;</span>, </span><br><span class="line">        <span class="string">&quot;MSG&quot;</span></span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="string">TASK</span> [<span class="attr">test_role :</span> <span class="string">debug</span>] <span class="string">***********************************************************************************************************************************************************************</span></span><br><span class="line"><span class="attr">ok:</span> [<span class="string">xx.xx.xx.xx</span>] <span class="string">=&gt;</span> &#123;</span><br><span class="line">    <span class="attr">&quot;msg&quot;:</span> [</span><br><span class="line">        <span class="string">&quot;iotop&quot;</span>, </span><br><span class="line">        <span class="string">&quot;bpftrace&quot;</span>, </span><br><span class="line">        <span class="string">&quot;iputils&quot;</span>, </span><br><span class="line">        <span class="string">&quot;nfs-utils&quot;</span>, </span><br><span class="line">        <span class="string">&quot;VETH-1&quot;</span>, </span><br><span class="line">        <span class="string">&quot;VETH-2&quot;</span></span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="string">TASK</span> [<span class="attr">test_role :</span> <span class="string">debug</span>] <span class="string">***********************************************************************************************************************************************************************</span></span><br><span class="line"><span class="attr">ok:</span> [<span class="string">xx.xx.xx.xx</span>] <span class="string">=&gt;</span> &#123;</span><br><span class="line">    <span class="attr">&quot;msg&quot;:</span> [</span><br><span class="line">        <span class="string">&quot;IOTOP&quot;</span>, </span><br><span class="line">        <span class="string">&quot;BPFTRACE&quot;</span>, </span><br><span class="line">        <span class="string">&quot;IPUTILS&quot;</span>, </span><br><span class="line">        <span class="string">&quot;NFS-UTILS&quot;</span></span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="string">TASK</span> [<span class="attr">test_role :</span> <span class="string">debug</span>] <span class="string">***********************************************************************************************************************************************************************</span></span><br><span class="line"><span class="attr">ok:</span> [<span class="string">xx.xx.xx.xx</span>] <span class="string">=&gt;</span> &#123;</span><br><span class="line">    <span class="attr">&quot;msg&quot;:</span> [</span><br><span class="line">        <span class="string">&quot;IOTOP&quot;</span>, </span><br><span class="line">        <span class="string">&quot;BPFTRACE&quot;</span>, </span><br><span class="line">        <span class="string">&quot;IPUTILS&quot;</span>, </span><br><span class="line">        <span class="string">&quot;NFS-UTILS&quot;</span></span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="string">TASK</span> [<span class="attr">test_role :</span> <span class="string">is</span> <span class="string">mapping</span>] <span class="string">******************************************************************************************************************************************************************</span></span><br><span class="line"><span class="attr">ok:</span> [<span class="string">xx.xx.xx.xx</span>] <span class="string">=&gt;</span> &#123;</span><br><span class="line">    <span class="attr">&quot;msg&quot;:</span> <span class="literal">false</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="string">TASK</span> [<span class="attr">test_role :</span> <span class="string">is</span> <span class="string">string</span>] <span class="string">*******************************************************************************************************************************************************************</span></span><br><span class="line"><span class="attr">ok:</span> [<span class="string">xx.xx.xx.xx</span>] <span class="string">=&gt;</span> &#123;</span><br><span class="line">    <span class="attr">&quot;msg&quot;:</span> <span class="literal">false</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="string">TASK</span> [<span class="attr">test_role :</span> <span class="string">is</span> <span class="string">iterable</span>] <span class="string">*****************************************************************************************************************************************************************</span></span><br><span class="line"><span class="attr">ok:</span> [<span class="string">xx.xx.xx.xx</span>] <span class="string">=&gt;</span> &#123;</span><br><span class="line">    <span class="attr">&quot;msg&quot;:</span> <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="string">TASK</span> [<span class="attr">test_role :</span> <span class="string">is</span> <span class="string">sequence</span>] <span class="string">*****************************************************************************************************************************************************************</span></span><br><span class="line"><span class="attr">ok:</span> [<span class="string">xx.xx.xx.xx</span>] <span class="string">=&gt;</span> &#123;</span><br><span class="line">    <span class="attr">&quot;msg&quot;:</span> <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="string">TASK</span> [<span class="attr">test_role :</span> <span class="string">show</span> <span class="string">type</span>] <span class="string">*******************************************************************************************************************************************************************</span></span><br><span class="line"><span class="attr">ok:</span> [<span class="string">xx.xx.xx.xx</span>] <span class="string">=&gt;</span> &#123;</span><br><span class="line">    <span class="attr">&quot;msg&quot;:</span> <span class="string">&quot;list&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="string">TASK</span> [<span class="attr">test_role :</span> <span class="string">show</span> <span class="string">type</span>] <span class="string">*******************************************************************************************************************************************************************</span></span><br><span class="line"><span class="attr">ok:</span> [<span class="string">xx.xx.xx.xx</span>] <span class="string">=&gt;</span> &#123;</span><br><span class="line">    <span class="attr">&quot;msg&quot;:</span> <span class="string">&quot;dict&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="template-1"><a href="#template-1" class="headerlink" title="template"></a>template</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% <span class="keyword">if</span> <span class="string">&#x27;keword&#x27;</span> <span class="keyword">in</span> ansible_hostname and <span class="string">&#x27;another_keyword&#x27;</span> <span class="keyword">in</span> custom_type %&#125;</span><br><span class="line">xxxxxx</span><br><span class="line">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure>

  </div>
</article>


    <div class="blog-post-comments">
        <div id="utterances_thread">
            <noscript>Please enable JavaScript to view the comments.</noscript>
        </div>
    </div>


        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a target="_blank" rel="noopener" href="http://github.com/probberechts">Projects</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#Get-all-variables-for-this-group"><span class="toc-number">1.</span> <span class="toc-text">Get all variables for this group</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#debug-variable"><span class="toc-number">2.</span> <span class="toc-text">debug variable</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#multiple-when-condition"><span class="toc-number">3.</span> <span class="toc-text">multiple when condition</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Got-NIC-info"><span class="toc-number">3.1.</span> <span class="toc-text">Got NIC info</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Continue-run"><span class="toc-number">4.</span> <span class="toc-text">Continue run</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Custom-install-data"><span class="toc-number">5.</span> <span class="toc-text">Custom install data</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#match-the-keyword-from-a-list"><span class="toc-number">5.1.</span> <span class="toc-text">match the keyword from a list</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#localintall"><span class="toc-number">6.</span> <span class="toc-text">localintall</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#reboot"><span class="toc-number">7.</span> <span class="toc-text">reboot</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#template"><span class="toc-number">8.</span> <span class="toc-text">template</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#diff-os-version"><span class="toc-number">9.</span> <span class="toc-text">diff os version</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#add-line-to-the-begining-the-low-efficiency-in-ansible"><span class="toc-number">10.</span> <span class="toc-text">add line to the begining, the low efficiency in ansible</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ansible-return-data-struction"><span class="toc-number">11.</span> <span class="toc-text">ansible return data struction</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#template-1"><span class="toc-number">12.</span> <span class="toc-text">template</span></a></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=http://example.com/2018/04/12/ansible/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=http://example.com/2018/04/12/ansible/&text=Ansible"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=http://example.com/2018/04/12/ansible/&title=Ansible"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=http://example.com/2018/04/12/ansible/&is_video=false&description=Ansible"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Ansible&body=Check out this article: http://example.com/2018/04/12/ansible/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=http://example.com/2018/04/12/ansible/&title=Ansible"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=http://example.com/2018/04/12/ansible/&title=Ansible"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=http://example.com/2018/04/12/ansible/&title=Ansible"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=http://example.com/2018/04/12/ansible/&title=Ansible"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=http://example.com/2018/04/12/ansible/&name=Ansible&description=&lt;h3 id=&#34;Get-all-variables-for-this-group&#34;&gt;&lt;a href=&#34;#Get-all-variables-for-this-group&#34; class=&#34;headerlink&#34; title=&#34;Get all variables for this group&#34;&gt;&lt;/a&gt;Get all variables for this group&lt;/h3&gt;&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;ansible &lt;span class=&#34;built_in&#34;&gt;test&lt;/span&gt; -m setup&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;#flush cache&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;ansible-playbook -i inventory helloworld.yaml --flush-cache&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;#parameter logic&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;True = &lt;span class=&#34;built_in&#34;&gt;yes&lt;/span&gt; = Yes = number &amp;gt; 0 ;  when : True be worked,  When : the_para &lt;span class=&#34;comment&#34;&gt;# default means &amp;gt;0&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;False = no = No = number &amp;lt;= 0 ;  when : The_para &amp;lt; 0 == when : False ; skip&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h3 id=&#34;debug-variable&#34;&gt;&lt;a href=&#34;#debug-variable&#34; class=&#34;headerlink&#34; title=&#34;debug variable&#34;&gt;&lt;/a&gt;debug variable&lt;/h3&gt;&lt;p&gt;&lt;a href=&#34;https://github.com/ansible/ansible/issues/23675&#34;&gt;conditional is defined fails to capture undefined var&lt;/a&gt;&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;55&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;#match or not match&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;when: nginxVersion.stdout != &lt;span class=&#34;string&#34;&gt;&amp;#x27;nginx version: nginx/1.8.0&amp;#x27;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;or&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;when: &lt;span class=&#34;string&#34;&gt;&amp;#x27;&amp;quot;nginx version: nginx/1.8.0&amp;quot; not in nginxVersion.stdout&amp;#x27;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;- name: Make sure OS version&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  fail: msg=&lt;span class=&#34;string&#34;&gt;&amp;quot;Must be large than RHEL/CentOS 7&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  when: ansible_distribution_major_version|int == 7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;$ &lt;span class=&#34;built_in&#34;&gt;cat&lt;/span&gt; main.yml&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;- include: centos_el7.yml&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  when: ansible_os_family == &lt;span class=&#34;string&#34;&gt;&amp;quot;RedHat&amp;quot;&lt;/span&gt; and ansible_distribution_major_version == &lt;span class=&#34;string&#34;&gt;&amp;#x27;7&amp;#x27;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;- include: alma_el8.yml&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  when: ansible_os_family == &lt;span class=&#34;string&#34;&gt;&amp;quot;RedHat&amp;quot;&lt;/span&gt; and ansible_distribution_major_version == &lt;span class=&#34;string&#34;&gt;&amp;#x27;8&amp;#x27;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;when: &lt;span class=&#34;string&#34;&gt;&amp;quot;&amp;#x27;amd&amp;#x27; in ansible_processor|lower and ansible_distribution_major_version|int == 7&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;when: &amp;quot;&lt;/span&gt;&amp;#123;&amp;#123; item &amp;#125;&amp;#125; is defined or xxx&lt;span class=&#34;string&#34;&gt;&amp;quot; ## looks like the &amp;quot;&lt;/span&gt;or&lt;span class=&#34;string&#34;&gt;&amp;quot; cound help you&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;when: &amp;quot;&lt;/span&gt;&amp;#123;&amp;#123; item &amp;#125;&amp;#125; is not defined&lt;span class=&#34;string&#34;&gt;&amp;quot; ## looks like the &amp;quot;&lt;/span&gt;not&lt;span class=&#34;string&#34;&gt;&amp;quot; could not work well&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;- name: Get the kernel module version&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;  shell: modinfo mpt3sas&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;  register: mpt3sas_ver&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;  ignore_errors: true&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;  tags:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;    - test_install&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;- name: output mpt3sas_ver&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;  debug: var=mpt3sas_ver&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;#I resolved this for my usage with adding a combo:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;when:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;    - variable is defined&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;    - variable != &amp;quot;&lt;/span&gt;&lt;span class=&#34;string&#34;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;#resloved This has been resolved by #56116 and will be included in the 2.14 release in Nov 2022.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;- hosts: localhost&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;  gather_facts: false&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;  vars:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;    thing: &amp;quot;&lt;/span&gt;&amp;#123;&amp;#123; other &amp;#125;&amp;#125;&lt;span class=&#34;string&#34;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;  tasks:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;    - debug:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;        var: thing&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;      when: thing is defined&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;output:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;PLAY [localhost] ***************************************************************&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;TASK [debug] *******************************************************************&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;skipping: [localhost]&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;PLAY RECAP *********************************************************************&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;localhost                  : ok=0    changed=0    unreachable=0    failed=0    skipped=1    rescued=0    ignored&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h3 id=&#34;multiple-when-condition&#34;&gt;&lt;a href=&#34;#multiple-when-condition&#34; class=&#34;headerlink&#34; title=&#34;multiple when condition&#34;&gt;&lt;/a&gt;&lt;a href=&#34;https://github.com/ansible/ansible/issues/22397&#34;&gt;multiple when condition&lt;/a&gt;&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;True&lt;ul&gt;
&lt;li&gt;Any positeve number &amp;gt;0: 1,2&lt;/li&gt;
&lt;li&gt;Non-empty string: “1”, “True”,”False”,’Nonsence’&lt;/li&gt;
&lt;li&gt;Boolean value (unquoted): True,true&lt;/li&gt;
&lt;li&gt;Ansible-specific (case-agnostic): Yes,yes&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;False&lt;ul&gt;
&lt;li&gt;Any number &amp;lt;&amp;#x3D;0: 0,-1 ..&lt;/li&gt;
&lt;li&gt;Empty string: “”, ‘’&lt;/li&gt;
&lt;li&gt;Boolean value (unquoted): False,false&lt;/li&gt;
&lt;li&gt;Ansible-specific (case-agnostic): No,no&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;force_install :&lt;span class=&#34;built_in&#34;&gt;yes&lt;/span&gt; &lt;span class=&#34;comment&#34;&gt;# define in group_var/test&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;when: &lt;span class=&#34;string&#34;&gt;&amp;quot;(system_type is match(&amp;#x27;your_key_word&amp;#x27;) and (megaraid_version.rc != 0 or mpt3sas_ver.rc != 0)) or (system_ty pe is match(&amp;#x27;your_key_word&amp;#x27;) and force_install)&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;# right&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  when: (shell_output is defined or shell_output.rc &amp;gt; 0) and (ansible_distribution_major_version == &lt;span class=&#34;string&#34;&gt;&amp;#x27;7&amp;#x27;&lt;/span&gt; and reinstall)&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;# wrong&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  when: (shell_output is defined or &lt;span class=&#34;string&#34;&gt;&amp;quot;shell_output.rc &amp;gt; 0&amp;quot;&lt;/span&gt;) or (ansible_distribution_major_version == &lt;span class=&#34;string&#34;&gt;&amp;#x27;7&amp;#x27;&lt;/span&gt; and reinstall)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h4 id=&#34;Got-NIC-info&#34;&gt;&lt;a href=&#34;#Got-NIC-info&#34; class=&#34;headerlink&#34; title=&#34;Got NIC info&#34;&gt;&lt;/a&gt;Got NIC info&lt;/h4&gt;&lt;figure class=&#34;highlight json&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;68&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;69&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;70&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;71&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;72&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;73&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;74&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;75&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;76&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;77&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;78&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;79&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;80&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;81&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;82&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;83&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;84&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;85&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;86&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;87&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;88&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;89&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;90&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;91&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;92&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;93&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;94&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;95&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;96&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;97&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;98&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;99&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;100&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;101&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;102&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;103&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;104&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;105&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;106&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;107&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;108&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;109&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;110&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;111&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;112&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;113&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;114&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;115&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;116&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;117&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;118&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;119&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;120&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;121&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;122&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;123&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;124&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;125&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;126&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;127&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;128&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;129&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;130&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;131&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;132&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;133&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;134&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;135&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;cat ../../host_vars/&lt;span class=&#34;number&#34;&gt;192.168&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.8&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.2&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;network_bond_interfaces&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt; - device&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; bond0&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;   address&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;number&#34;&gt;192.168&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.1&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.2&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;   netmask&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;number&#34;&gt;225.255&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.225&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.0&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;   gateway&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;number&#34;&gt;192.168&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.1&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;   bootproto&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; static&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;   bond_mode&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;number&#34;&gt;4&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;   bond_miimon&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;number&#34;&gt;1000&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;   bond_slaves&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;punctuation&#34;&gt;[&lt;/span&gt;enp1s0f0&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt;enp1s0f1&lt;span class=&#34;punctuation&#34;&gt;]&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;network_ether_interfaces&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt; - device&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; eno1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;   bootproto&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; static&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;   address&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;number&#34;&gt;192.168&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.1&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.20&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;   netmask&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;number&#34;&gt;255.255&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.0&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.0&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;   route&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    - network&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;number&#34;&gt;192.168&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.200&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.0&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;      netmask&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;number&#34;&gt;24&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;      gateway&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;number&#34;&gt;192.168&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.200&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    - network&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;number&#34;&gt;192.168&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.100&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.0&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;      netmask&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;number&#34;&gt;24&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;      gateway&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;number&#34;&gt;192.168&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.100&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt; - device&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; eno2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;   bootproto&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; static&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;   address&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;number&#34;&gt;192.168&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.1&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.21&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;   netmask&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;number&#34;&gt;255.255&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.0&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.0&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;   route&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    - network&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;number&#34;&gt;192.168&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.200&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.0&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;      netmask&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;number&#34;&gt;24&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;      gateway&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;number&#34;&gt;192.168&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.200&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.2&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    - network&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;number&#34;&gt;192.168&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.100&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.0&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;      netmask&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;number&#34;&gt;24&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;      gateway&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;number&#34;&gt;192.168&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.100&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.2&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;- debug&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    msg&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    - &lt;span class=&#34;string&#34;&gt;&amp;quot;&amp;#123;&amp;#123; network_bond_interfaces &amp;#125;&amp;#125;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;- debug&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    msg&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    - &lt;span class=&#34;string&#34;&gt;&amp;quot;&amp;#123;&amp;#123; ansible_os_family &amp;#125;&amp;#125;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    - &lt;span class=&#34;string&#34;&gt;&amp;quot;&amp;#123;&amp;#123; item.device &amp;#125;&amp;#125;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    - &lt;span class=&#34;string&#34;&gt;&amp;quot;&amp;#123;&amp;#123; item.address &amp;#125;&amp;#125;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    - &lt;span class=&#34;string&#34;&gt;&amp;quot;&amp;#123;&amp;#123; item.bond_slaves.0 &amp;#125;&amp;#125;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    - &lt;span class=&#34;string&#34;&gt;&amp;quot;&amp;#123;&amp;#123; item.bond_slaves.1 &amp;#125;&amp;#125;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    - &lt;span class=&#34;string&#34;&gt;&amp;quot;&amp;#123;&amp;#123; item.bond_slaves &amp;#125;&amp;#125;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    - &lt;span class=&#34;string&#34;&gt;&amp;quot;&amp;#123;&amp;#123; hostvars[inventory_hostname][&amp;#x27;ansible_&amp;#x27; + item.bond_slaves.0 ].macaddress &amp;#125;&amp;#125;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  with_items&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;     - &lt;span class=&#34;string&#34;&gt;&amp;quot;&amp;#123;&amp;#123; network_bond_interfaces &amp;#125;&amp;#125;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt; &lt;span class=&#34;punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;attr&#34;&gt;&amp;quot;msg&amp;quot;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;punctuation&#34;&gt;[&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &lt;span class=&#34;punctuation&#34;&gt;[&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;            &lt;span class=&#34;punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                &lt;span class=&#34;attr&#34;&gt;&amp;quot;address&amp;quot;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;&amp;quot;192.168.1.2&amp;quot;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                &lt;span class=&#34;attr&#34;&gt;&amp;quot;bond_miimon&amp;quot;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;number&#34;&gt;1000&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                &lt;span class=&#34;attr&#34;&gt;&amp;quot;bond_mode&amp;quot;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;number&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                &lt;span class=&#34;attr&#34;&gt;&amp;quot;bond_slaves&amp;quot;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;punctuation&#34;&gt;[&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                    &lt;span class=&#34;string&#34;&gt;&amp;quot;enp1s0f0&amp;quot;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                    &lt;span class=&#34;string&#34;&gt;&amp;quot;enp1s0f1&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                &lt;span class=&#34;punctuation&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                &lt;span class=&#34;attr&#34;&gt;&amp;quot;bootproto&amp;quot;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;&amp;quot;static&amp;quot;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                &lt;span class=&#34;attr&#34;&gt;&amp;quot;device&amp;quot;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;&amp;quot;bond0&amp;quot;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                &lt;span class=&#34;attr&#34;&gt;&amp;quot;gateway&amp;quot;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;&amp;quot;192.168.1.1&amp;quot;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                &lt;span class=&#34;attr&#34;&gt;&amp;quot;netmask&amp;quot;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;&amp;quot;225.255.225.0&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;            &lt;span class=&#34;punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &lt;span class=&#34;punctuation&#34;&gt;]&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;punctuation&#34;&gt;]&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;TASK &lt;span class=&#34;punctuation&#34;&gt;[&lt;/span&gt;network &lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; debug&lt;span class=&#34;punctuation&#34;&gt;]&lt;/span&gt; ************************************************************************************************************************************************************************&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;ok&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;punctuation&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;10.53&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.128&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.224&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;]&lt;/span&gt; =&amp;gt; (item=&lt;span class=&#34;punctuation&#34;&gt;&amp;#123;&lt;/span&gt;u&amp;#x27;bond_miimon&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;number&#34;&gt;1000&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt; u&amp;#x27;bond_slaves&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;punctuation&#34;&gt;[&lt;/span&gt;u&amp;#x27;enp1s0f0&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt; u&amp;#x27;enp1s0f1&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt; u&amp;#x27;bond_mode&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;number&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt; u&amp;#x27;netmask&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; u&amp;#x27;&lt;span class=&#34;number&#34;&gt;225.255&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.225&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.0&lt;/span&gt;&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt; u&amp;#x27;bootproto&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; u&amp;#x27;static&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt; u&amp;#x27;address&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; u&amp;#x27;&lt;span class=&#34;number&#34;&gt;192.168&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.1&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.2&lt;/span&gt;&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt; u&amp;#x27;device&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; u&amp;#x27;bond0&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt; u&amp;#x27;gateway&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; u&amp;#x27;&lt;span class=&#34;number&#34;&gt;192.168&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.1&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.1&lt;/span&gt;&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;&amp;#125;&lt;/span&gt;) =&amp;gt; &lt;span class=&#34;punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;attr&#34;&gt;&amp;quot;msg&amp;quot;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;punctuation&#34;&gt;[&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &lt;span class=&#34;string&#34;&gt;&amp;quot;RedHat&amp;quot;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &lt;span class=&#34;string&#34;&gt;&amp;quot;bond0&amp;quot;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &lt;span class=&#34;string&#34;&gt;&amp;quot;192.168.1.2&amp;quot;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &lt;span class=&#34;string&#34;&gt;&amp;quot;enp1s0f0&amp;quot;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &lt;span class=&#34;string&#34;&gt;&amp;quot;enp1s0f1&amp;quot;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &lt;span class=&#34;punctuation&#34;&gt;[&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;            &lt;span class=&#34;string&#34;&gt;&amp;quot;enp1s0f0&amp;quot;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;            &lt;span class=&#34;string&#34;&gt;&amp;quot;enp1s0f1&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &lt;span class=&#34;punctuation&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &lt;span class=&#34;string&#34;&gt;&amp;quot;3c:fd:fe:15:08:40&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;punctuation&#34;&gt;]&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;## create bonding&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;- name&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; Write configuration files for route configuration&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  template&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; src=route_&lt;span class=&#34;punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;&amp;#123;&lt;/span&gt; ansible_os_family &lt;span class=&#34;punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;&amp;#125;&lt;/span&gt;.j2 dest=&lt;span class=&#34;punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;&amp;#123;&lt;/span&gt; net_path &lt;span class=&#34;punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;&amp;#125;&lt;/span&gt;/route-&lt;span class=&#34;punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;&amp;#123;&lt;/span&gt; item.device &lt;span class=&#34;punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  with_items&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;     - &lt;span class=&#34;string&#34;&gt;&amp;quot;&amp;#123;&amp;#123; network_bond_interfaces &amp;#125;&amp;#125;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  when&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; network_bond_interfaces is defined and item.route is defined and ansible_os_family == &amp;#x27;RedHat&amp;#x27;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;- name&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; Create the network configuration file for slave in the bond devices&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  template&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; src=bond_slave_&lt;span class=&#34;punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;&amp;#123;&lt;/span&gt; ansible_os_family &lt;span class=&#34;punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;&amp;#125;&lt;/span&gt;.j2 dest=&lt;span class=&#34;punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;&amp;#123;&lt;/span&gt; net_path &lt;span class=&#34;punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;&amp;#125;&lt;/span&gt;/ifcfg-&lt;span class=&#34;punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;&amp;#123;&lt;/span&gt; item&lt;span class=&#34;number&#34;&gt;.1&lt;/span&gt; &lt;span class=&#34;punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  with_subelements&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;   - &lt;span class=&#34;string&#34;&gt;&amp;quot;&amp;#123;&amp;#123; network_bond_interfaces &amp;#125;&amp;#125;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;   - bond_slaves&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  when&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; network_bond_interfaces is defined&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  register&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; bond_port_result&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;- debug&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; msg=&lt;span class=&#34;string&#34;&gt;&amp;quot;&amp;#123;&amp;#123; bond_port_result &amp;#125;&amp;#125;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;- shell&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; ifdown bond_slave &lt;span class=&#34;punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;&amp;#123;&lt;/span&gt; item.item&lt;span class=&#34;number&#34;&gt;.1&lt;/span&gt; &lt;span class=&#34;punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;&amp;#125;&lt;/span&gt;; ifup &lt;span class=&#34;punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;&amp;#123;&lt;/span&gt; item.item&lt;span class=&#34;number&#34;&gt;.1&lt;/span&gt; &lt;span class=&#34;punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  with_items&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    - &lt;span class=&#34;string&#34;&gt;&amp;quot;&amp;#123;&amp;#123; bond_port_result.results &amp;#125;&amp;#125;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  when&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; network_bond_interfaces is defined and bond_slaves is defined&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  register&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; if_slave&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;- debug&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    msg&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    - &lt;span class=&#34;string&#34;&gt;&amp;quot;&amp;#123;&amp;#123; item.route.1 &amp;#125;&amp;#125;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  with_items&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;     - &lt;span class=&#34;string&#34;&gt;&amp;quot;&amp;#123;&amp;#123; network_ether_interfaces &amp;#125;&amp;#125;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt; =&amp;gt; (item=&lt;span class=&#34;punctuation&#34;&gt;&amp;#123;&lt;/span&gt;u&amp;#x27;device&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; u&amp;#x27;eno1&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt; u&amp;#x27;netmask&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; u&amp;#x27;&lt;span class=&#34;number&#34;&gt;255.255&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.0&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.0&lt;/span&gt;&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt; u&amp;#x27;bootproto&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; u&amp;#x27;static&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt; u&amp;#x27;route&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;punctuation&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;&amp;#123;&lt;/span&gt;u&amp;#x27;netmask&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;number&#34;&gt;24&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt; u&amp;#x27;network&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; u&amp;#x27;&lt;span class=&#34;number&#34;&gt;192.168&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.200&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.0&lt;/span&gt;&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt; u&amp;#x27;gateway&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; u&amp;#x27;&lt;span class=&#34;number&#34;&gt;192.168&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.200&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.1&lt;/span&gt;&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;punctuation&#34;&gt;&amp;#123;&lt;/span&gt;u&amp;#x27;netmask&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;number&#34;&gt;24&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt; u&amp;#x27;network&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; u&amp;#x27;&lt;span class=&#34;number&#34;&gt;192.168&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.100&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.0&lt;/span&gt;&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt; u&amp;#x27;gateway&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; u&amp;#x27;&lt;span class=&#34;number&#34;&gt;192.168&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.100&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.1&lt;/span&gt;&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt; u&amp;#x27;address&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; u&amp;#x27;&lt;span class=&#34;number&#34;&gt;192.168&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.1&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.20&lt;/span&gt;&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;&amp;#125;&lt;/span&gt;) =&amp;gt; &lt;span class=&#34;punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;attr&#34;&gt;&amp;quot;msg&amp;quot;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;punctuation&#34;&gt;[&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &lt;span class=&#34;punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;            &lt;span class=&#34;attr&#34;&gt;&amp;quot;gateway&amp;quot;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;&amp;quot;192.168.100.1&amp;quot;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;            &lt;span class=&#34;attr&#34;&gt;&amp;quot;netmask&amp;quot;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;number&#34;&gt;24&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;            &lt;span class=&#34;attr&#34;&gt;&amp;quot;network&amp;quot;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;&amp;quot;192.168.100.0&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &lt;span class=&#34;punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;punctuation&#34;&gt;]&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;ok&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;punctuation&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;10.53&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.128&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.224&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;]&lt;/span&gt; =&amp;gt; (item=&lt;span class=&#34;punctuation&#34;&gt;&amp;#123;&lt;/span&gt;u&amp;#x27;device&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; u&amp;#x27;eno2&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt; u&amp;#x27;netmask&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; u&amp;#x27;&lt;span class=&#34;number&#34;&gt;255.255&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.0&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.0&lt;/span&gt;&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt; u&amp;#x27;bootproto&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; u&amp;#x27;static&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt; u&amp;#x27;route&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;punctuation&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;&amp;#123;&lt;/span&gt;u&amp;#x27;netmask&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;number&#34;&gt;24&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt; u&amp;#x27;network&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; u&amp;#x27;&lt;span class=&#34;number&#34;&gt;192.168&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.200&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.0&lt;/span&gt;&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt; u&amp;#x27;gateway&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; u&amp;#x27;&lt;span class=&#34;number&#34;&gt;192.168&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.200&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.2&lt;/span&gt;&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;punctuation&#34;&gt;&amp;#123;&lt;/span&gt;u&amp;#x27;netmask&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;number&#34;&gt;24&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt; u&amp;#x27;network&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; u&amp;#x27;&lt;span class=&#34;number&#34;&gt;192.168&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.100&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.0&lt;/span&gt;&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt; u&amp;#x27;gateway&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; u&amp;#x27;&lt;span class=&#34;number&#34;&gt;192.168&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.100&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.2&lt;/span&gt;&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt; u&amp;#x27;address&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; u&amp;#x27;&lt;span class=&#34;number&#34;&gt;192.168&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.1&lt;/span&gt;&lt;span class=&#34;number&#34;&gt;.21&lt;/span&gt;&amp;#x27;&lt;span class=&#34;punctuation&#34;&gt;&amp;#125;&lt;/span&gt;) =&amp;gt; &lt;span class=&#34;punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;attr&#34;&gt;&amp;quot;msg&amp;quot;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;punctuation&#34;&gt;[&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &lt;span class=&#34;punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;            &lt;span class=&#34;attr&#34;&gt;&amp;quot;gateway&amp;quot;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;&amp;quot;192.168.100.2&amp;quot;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;            &lt;span class=&#34;attr&#34;&gt;&amp;quot;netmask&amp;quot;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;number&#34;&gt;24&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;,&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;            &lt;span class=&#34;attr&#34;&gt;&amp;quot;network&amp;quot;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;&amp;quot;192.168.100.0&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &lt;span class=&#34;punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;punctuation&#34;&gt;]&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;nmcli loading config file from centos 8&lt;/p&gt;
&lt;figure class=&#34;highlight json&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;- name&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; loading slave&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  shell&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; nmcli connection load &lt;span class=&#34;punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;&amp;#123;&lt;/span&gt; net_path &lt;span class=&#34;punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;&amp;#125;&lt;/span&gt;/ifcfg-&lt;span class=&#34;punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;&amp;#123;&lt;/span&gt; item&lt;span class=&#34;number&#34;&gt;.1&lt;/span&gt; &lt;span class=&#34;punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  with_subelements&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;   - &lt;span class=&#34;string&#34;&gt;&amp;quot;&amp;#123;&amp;#123; network_bond_interfaces &amp;#125;&amp;#125;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;   - bond_slaves&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  when&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; ansible_distribution_major_version == &lt;span class=&#34;string&#34;&gt;&amp;quot;8&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;- name&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; loading master&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  shell&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; nmcli connection load &lt;span class=&#34;punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;&amp;#123;&lt;/span&gt; net_path &lt;span class=&#34;punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;&amp;#125;&lt;/span&gt;/ifcfg-&lt;span class=&#34;punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;&amp;#123;&lt;/span&gt; item.device &lt;span class=&#34;punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  with_items&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;     - &lt;span class=&#34;string&#34;&gt;&amp;quot;&amp;#123;&amp;#123; network_bond_interfaces &amp;#125;&amp;#125;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  when&lt;span class=&#34;punctuation&#34;&gt;:&lt;/span&gt; ansible_distribution_major_version == &lt;span class=&#34;string&#34;&gt;&amp;quot;8&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h3 id=&#34;Continue-run&#34;&gt;&lt;a href=&#34;#Continue-run&#34; class=&#34;headerlink&#34; title=&#34;Continue run&#34;&gt;&lt;/a&gt;Continue run&lt;/h3&gt;&lt;p&gt;If the modify to another format in main.yml, maybe list-tasks not work   &lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;19&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;$ &lt;span class=&#34;built_in&#34;&gt;cat&lt;/span&gt; roles/xxxx/main.yml&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;- include: centos_el7.yml&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  when: ansible_os_family == &lt;span class=&#34;string&#34;&gt;&amp;quot;RedHat&amp;quot;&lt;/span&gt; and ansible_distribution_major_version == &lt;span class=&#34;string&#34;&gt;&amp;#x27;7&amp;#x27;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;- include: alma_el8.yml&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  when: ansible_os_family == &lt;span class=&#34;string&#34;&gt;&amp;quot;RedHat&amp;quot;&lt;/span&gt; and ansible_distribution_major_version == &lt;span class=&#34;string&#34;&gt;&amp;#x27;8&amp;#x27;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;$ ansible-playbook playbook.yml --list-tasks&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;playbook: site.yml&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  play &lt;span class=&#34;comment&#34;&gt;#1 (test): test	TAGS: []&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    tasks:&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;      os_init : RHEL/CentOS version	TAGS: []&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;      os_init : Create the temp &lt;span class=&#34;built_in&#34;&gt;dir&lt;/span&gt;	TAGS: []&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;      os_init : yum install rpms	TAGS: []&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;$ ansible-playbook playbook.yml --start-at-task=&lt;span class=&#34;string&#34;&gt;&amp;quot;yum install rpms&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;$ ansible-playbook playbook.yml --step &lt;span class=&#34;comment&#34;&gt;## every step will ask you&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;"><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=http://example.com/2018/04/12/ansible/&t=Ansible"><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> Share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy;
    
    
    2016-2023
    John Doe
  </div>
  <div class="footer-right">
    <nav>
      <ul>
        <!--
       --><li><a href="/">Home</a></li><!--
     --><!--
       --><li><a href="/about/">About</a></li><!--
     --><!--
       --><li><a href="/archives/">Writing</a></li><!--
     --><!--
       --><li><a target="_blank" rel="noopener" href="http://github.com/probberechts">Projects</a></li><!--
     -->
      </ul>
    </nav>
  </div>
</footer>

    </div>
    <!-- styles -->



  <link rel="preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css" crossorigin="anonymous" onload="this.onload=null;this.rel='stylesheet'"/>


    <!-- jquery -->
 
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" crossorigin="anonymous"></script> 




<!-- clipboard -->

  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.7/clipboard.min.js" crossorigin="anonymous"></script> 
  
  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"Copy to clipboard!\">";
    btn += '<i class="far fa-clone"></i>';
    btn += '</span>'; 
    // mount it!
    $(".highlight table").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      text: function(trigger) {
        return Array.from(trigger.nextElementSibling.querySelectorAll('.code')).reduce((str,it)=>str+it.innerText+'\n','')
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "Copied!");
      e.clearSelection();
    })
  })
  </script>


<script src="/js/main.js"></script>

<!-- search -->

<!-- Google Analytics -->

<!-- Baidu Analytics -->

<!-- Cloudflare Analytics -->

<!-- Umami Analytics -->

<!-- Disqus Comments -->

<!-- utterances Comments -->

    <script type="text/javascript">
      var utterances_repo = '67e8c052/67e8c052.github.io';
      var utterances_issue_term = 'pathname';
      var utterances_label = 'blog-comments';
      var utterances_theme = 'github-dark';

      (function(){
          var script = document.createElement('script');

          script.src = 'https://utteranc.es/client.js';
          script.setAttribute('repo', utterances_repo);
          script.setAttribute('issue-term', 'pathname');
          script.setAttribute('label', utterances_label);
          script.setAttribute('theme', utterances_theme);
          script.setAttribute('crossorigin', 'anonymous');
          script.async = true;
          (document.getElementById('utterances_thread')).appendChild(script);
      }());
  </script>

</body>
</html>
